f21c272fc54dba7225362286b4d9ea8c
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = validateEffects;

var _lodash = _interopRequireDefault(require("lodash.isequal"));

var _createErrorMessage = _interopRequireDefault(require("./createErrorMessage"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function validateEffects(eventChannel, effectName, effectKey, isHelperEffect, actual, expected, stepNumber) {
  if (actual == null) {
    return (0, _createErrorMessage.default)("expected " + effectName + " effect, but the saga yielded nothing", stepNumber, actual, expected, effectKey);
  }

  var bothEqual = (0, _lodash.default)(actual, expected);
  var effectsDifferent = isHelperEffect && !bothEqual || !isHelperEffect && (actual.type !== effectKey || expected.type !== effectKey);

  if (effectsDifferent) {
    return (0, _createErrorMessage.default)("expected " + effectName + " effect, but the saga yielded a different effect", stepNumber, actual, expected);
  }

  if (!bothEqual) {
    return (0, _createErrorMessage.default)(effectName + " effects do not match", stepNumber, actual, expected, effectKey);
  }

  return null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRlRWZmZWN0cy5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJ2YWxpZGF0ZUVmZmVjdHMiLCJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY3JlYXRlRXJyb3JNZXNzYWdlIiwib2JqIiwiX19lc01vZHVsZSIsImV2ZW50Q2hhbm5lbCIsImVmZmVjdE5hbWUiLCJlZmZlY3RLZXkiLCJpc0hlbHBlckVmZmVjdCIsImFjdHVhbCIsImV4cGVjdGVkIiwic3RlcE51bWJlciIsImJvdGhFcXVhbCIsImVmZmVjdHNEaWZmZXJlbnQiLCJ0eXBlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztBQUMzQ0MsRUFBQUEsS0FBSyxFQUFFO0FBRG9DLENBQTdDO0FBR0FELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQkMsZUFBbEI7O0FBRUEsSUFBSUMsT0FBTyxHQUFHQyxzQkFBc0IsQ0FBQ0MsT0FBTyxDQUFDLGdCQUFELENBQVIsQ0FBcEM7O0FBRUEsSUFBSUMsbUJBQW1CLEdBQUdGLHNCQUFzQixDQUFDQyxPQUFPLENBQUMsc0JBQUQsQ0FBUixDQUFoRDs7QUFFQSxTQUFTRCxzQkFBVCxDQUFnQ0csR0FBaEMsRUFBcUM7QUFBRSxTQUFPQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0MsVUFBWCxHQUF3QkQsR0FBeEIsR0FBOEI7QUFBRU4sSUFBQUEsT0FBTyxFQUFFTTtBQUFYLEdBQXJDO0FBQXdEOztBQUUvRixTQUFTTCxlQUFULENBQXlCTyxZQUF6QixFQUF1Q0MsVUFBdkMsRUFBbURDLFNBQW5ELEVBQThEQyxjQUE5RCxFQUE4RUMsTUFBOUUsRUFBc0ZDLFFBQXRGLEVBQWdHQyxVQUFoRyxFQUE0RztBQUMxRyxNQUFJRixNQUFNLElBQUksSUFBZCxFQUFvQjtBQUNsQixXQUFPLENBQUMsR0FBR1AsbUJBQW1CLENBQUNMLE9BQXhCLGdCQUE2Q1MsVUFBN0MsNENBQWdHSyxVQUFoRyxFQUE0R0YsTUFBNUcsRUFBb0hDLFFBQXBILEVBQThISCxTQUE5SCxDQUFQO0FBQ0Q7O0FBRUQsTUFBTUssU0FBUyxHQUFHLENBQUMsR0FBR2IsT0FBTyxDQUFDRixPQUFaLEVBQXFCWSxNQUFyQixFQUE2QkMsUUFBN0IsQ0FBbEI7QUFDQSxNQUFNRyxnQkFBZ0IsR0FBR0wsY0FBYyxJQUFJLENBQUNJLFNBQW5CLElBQWdDLENBQUNKLGNBQUQsS0FBb0JDLE1BQU0sQ0FBQ0ssSUFBUCxLQUFnQlAsU0FBaEIsSUFBNkJHLFFBQVEsQ0FBQ0ksSUFBVCxLQUFrQlAsU0FBbkUsQ0FBekQ7O0FBRUEsTUFBSU0sZ0JBQUosRUFBc0I7QUFDcEIsV0FBTyxDQUFDLEdBQUdYLG1CQUFtQixDQUFDTCxPQUF4QixnQkFBNkNTLFVBQTdDLHVEQUEyR0ssVUFBM0csRUFBdUhGLE1BQXZILEVBQStIQyxRQUEvSCxDQUFQO0FBQ0Q7O0FBRUQsTUFBSSxDQUFDRSxTQUFMLEVBQWdCO0FBQ2QsV0FBTyxDQUFDLEdBQUdWLG1CQUFtQixDQUFDTCxPQUF4QixFQUFvQ1MsVUFBcEMsNEJBQXVFSyxVQUF2RSxFQUFtRkYsTUFBbkYsRUFBMkZDLFFBQTNGLEVBQXFHSCxTQUFyRyxDQUFQO0FBQ0Q7O0FBRUQsU0FBTyxJQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZhbGlkYXRlRWZmZWN0cztcblxudmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJsb2Rhc2guaXNlcXVhbFwiKSk7XG5cbnZhciBfY3JlYXRlRXJyb3JNZXNzYWdlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jcmVhdGVFcnJvck1lc3NhZ2VcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUVmZmVjdHMoZXZlbnRDaGFubmVsLCBlZmZlY3ROYW1lLCBlZmZlY3RLZXksIGlzSGVscGVyRWZmZWN0LCBhY3R1YWwsIGV4cGVjdGVkLCBzdGVwTnVtYmVyKSB7XG4gIGlmIChhY3R1YWwgPT0gbnVsbCkge1xuICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yTWVzc2FnZS5kZWZhdWx0KShgZXhwZWN0ZWQgJHtlZmZlY3ROYW1lfSBlZmZlY3QsIGJ1dCB0aGUgc2FnYSB5aWVsZGVkIG5vdGhpbmdgLCBzdGVwTnVtYmVyLCBhY3R1YWwsIGV4cGVjdGVkLCBlZmZlY3RLZXkpO1xuICB9XG5cbiAgY29uc3QgYm90aEVxdWFsID0gKDAsIF9sb2Rhc2guZGVmYXVsdCkoYWN0dWFsLCBleHBlY3RlZCk7XG4gIGNvbnN0IGVmZmVjdHNEaWZmZXJlbnQgPSBpc0hlbHBlckVmZmVjdCAmJiAhYm90aEVxdWFsIHx8ICFpc0hlbHBlckVmZmVjdCAmJiAoYWN0dWFsLnR5cGUgIT09IGVmZmVjdEtleSB8fCBleHBlY3RlZC50eXBlICE9PSBlZmZlY3RLZXkpO1xuXG4gIGlmIChlZmZlY3RzRGlmZmVyZW50KSB7XG4gICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3JNZXNzYWdlLmRlZmF1bHQpKGBleHBlY3RlZCAke2VmZmVjdE5hbWV9IGVmZmVjdCwgYnV0IHRoZSBzYWdhIHlpZWxkZWQgYSBkaWZmZXJlbnQgZWZmZWN0YCwgc3RlcE51bWJlciwgYWN0dWFsLCBleHBlY3RlZCk7XG4gIH1cblxuICBpZiAoIWJvdGhFcXVhbCkge1xuICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yTWVzc2FnZS5kZWZhdWx0KShgJHtlZmZlY3ROYW1lfSBlZmZlY3RzIGRvIG5vdCBtYXRjaGAsIHN0ZXBOdW1iZXIsIGFjdHVhbCwgZXhwZWN0ZWQsIGVmZmVjdEtleSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0iXX0=