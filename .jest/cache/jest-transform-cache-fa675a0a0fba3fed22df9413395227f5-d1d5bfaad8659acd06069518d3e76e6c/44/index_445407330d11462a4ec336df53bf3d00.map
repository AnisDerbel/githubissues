{"version":3,"sources":["index.js"],"names":["Object","defineProperty","exports","value","default","testSaga","_lodash","_interopRequireDefault","require","_objectAssign","effects","_interopRequireWildcard","_reduxSaga","_historyTypes","_keys","_SagaTestError","_createErrorMessage","_assertSameEffect","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","saga","api","next","back","finish","restart","save","restore","throw","throwError","savePoints","history","sagaArgs","finalSagaArgs","iterator","createIterator","createEffectTester","name","effect","isForkedEffect","yieldedValue","eventChannel","length","createEffectTesterFromEffects","createEffectTesterFromHelperEffect","undefined","effectsTestersCreators","actionChannel","ACTION_CHANNEL","all","ALL","apply","CALL","cancel","CANCEL","cancelled","CANCELLED","cps","CPS","debounce","delay","flush","FLUSH","fork","FORK","getContext","GET_CONTEXT","join","JOIN","put","PUT","putResolve","race","RACE","select","SELECT","setContext","SET_CONTEXT","spawn","take","TAKE","takeEvery","takeLatest","takeLeading","takeMaybe","throttle","retry","isDone","done","is","arg","errorMessage","inspect","fn","returns","apiWithEffectsTesters","newApi","args","result","push","type","NONE","ARGUMENT","FINISH","return","FINISH_ARGUMENT","error","ERROR","Error","applyHistory","n","m","pop","slice","i","l"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = testSaga;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.isequal\"));\n\nvar _objectAssign = _interopRequireDefault(require(\"object-assign\"));\n\nvar effects = _interopRequireWildcard(require(\"redux-saga/effects\"));\n\nvar _reduxSaga = require(\"redux-saga\");\n\nvar _historyTypes = require(\"./historyTypes\");\n\nvar _keys = require(\"../shared/keys\");\n\nvar _SagaTestError = _interopRequireDefault(require(\"../shared/SagaTestError\"));\n\nvar _createErrorMessage = _interopRequireDefault(require(\"./createErrorMessage\"));\n\nvar _assertSameEffect = _interopRequireDefault(require(\"./assertSameEffect\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction testSaga(saga, ...sagaArgs) {\n  const api = {\n    next,\n    back,\n    finish,\n    restart,\n    save,\n    restore,\n    throw: throwError\n  };\n  const savePoints = {};\n  let history = [];\n  let finalSagaArgs = sagaArgs;\n  let iterator = createIterator();\n\n  function createEffectTester(name, key, effect, isForkedEffect = false) {\n    return yieldedValue => (...args) => {\n      (0, _assertSameEffect.default)(_reduxSaga.eventChannel, name, key, isForkedEffect, yieldedValue, effect(...args), history.length);\n      return api;\n    };\n  }\n\n  function createEffectTesterFromEffects(name, key) {\n    return createEffectTester(name, key, effects[name]);\n  }\n\n  function createEffectTesterFromHelperEffect(name) {\n    return createEffectTester(name, undefined, effects[name], true);\n  }\n\n  const effectsTestersCreators = {\n    actionChannel: createEffectTesterFromEffects('actionChannel', _keys.ACTION_CHANNEL),\n    all: createEffectTesterFromEffects('all', _keys.ALL),\n    apply: createEffectTesterFromEffects('apply', _keys.CALL),\n    call: createEffectTesterFromEffects('call', _keys.CALL),\n    cancel: createEffectTesterFromEffects('cancel', _keys.CANCEL),\n    cancelled: createEffectTesterFromEffects('cancelled', _keys.CANCELLED),\n    cps: createEffectTesterFromEffects('cps', _keys.CPS),\n    debounce: createEffectTesterFromHelperEffect('debounce'),\n    delay: createEffectTesterFromEffects('delay', _keys.CALL),\n    flush: createEffectTesterFromEffects('flush', _keys.FLUSH),\n    fork: createEffectTesterFromEffects('fork', _keys.FORK),\n    getContext: createEffectTesterFromEffects('getContext', _keys.GET_CONTEXT),\n    join: createEffectTesterFromEffects('join', _keys.JOIN),\n    put: createEffectTesterFromEffects('put', _keys.PUT),\n    putResolve: createEffectTesterFromEffects('putResolve', _keys.PUT),\n    race: createEffectTesterFromEffects('race', _keys.RACE),\n    select: createEffectTesterFromEffects('select', _keys.SELECT),\n    setContext: createEffectTesterFromEffects('setContext', _keys.SET_CONTEXT),\n    spawn: createEffectTesterFromEffects('spawn', _keys.FORK),\n    take: createEffectTesterFromEffects('take', _keys.TAKE),\n    takeEvery: createEffectTesterFromHelperEffect('takeEvery'),\n    takeLatest: createEffectTesterFromHelperEffect('takeLatest'),\n    takeLeading: createEffectTesterFromHelperEffect('takeLeading'),\n    takeMaybe: createEffectTesterFromEffects('takeMaybe', _keys.TAKE),\n    throttle: createEffectTesterFromHelperEffect('throttle'),\n    retry: createEffectTesterFromHelperEffect('retry'),\n    isDone: done => () => {\n      if (!done) {\n        throw new _SagaTestError.default('saga not done');\n      }\n\n      return api;\n    },\n    is: value => arg => {\n      if (!(0, _lodash.default)(arg, value)) {\n        const errorMessage = (0, _createErrorMessage.default)('yielded values do not match', history.length, value, arg);\n        throw new _SagaTestError.default(errorMessage);\n      }\n\n      return api;\n    },\n    inspect: value => fn => {\n      fn(value);\n      return api;\n    },\n    returns: (value, done) => arg => {\n      if (!done) {\n        throw new _SagaTestError.default('saga not done');\n      }\n\n      if (!(0, _lodash.default)(arg, value)) {\n        const errorMessage = (0, _createErrorMessage.default)('returned values do not match', history.length, value, arg);\n        throw new _SagaTestError.default(errorMessage);\n      }\n\n      return api;\n    }\n  };\n\n  function createIterator() {\n    return saga(...finalSagaArgs);\n  }\n\n  function apiWithEffectsTesters({\n    value,\n    done\n  }) {\n    const newApi = (0, _objectAssign.default)({}, api, {\n      actionChannel: effectsTestersCreators.actionChannel(value),\n      all: effectsTestersCreators.all(value),\n      apply: effectsTestersCreators.apply(value),\n      call: effectsTestersCreators.call(value),\n      cancel: effectsTestersCreators.cancel(value),\n      cancelled: effectsTestersCreators.cancelled(value),\n      cps: effectsTestersCreators.cps(value),\n      debounce: effectsTestersCreators.debounce(value),\n      delay: effectsTestersCreators.delay(value),\n      flush: effectsTestersCreators.flush(value),\n      fork: effectsTestersCreators.fork(value),\n      getContext: effectsTestersCreators.getContext(value),\n      join: effectsTestersCreators.join(value),\n      put: effectsTestersCreators.put(value),\n      putResolve: effectsTestersCreators.putResolve(value),\n      race: effectsTestersCreators.race(value),\n      select: effectsTestersCreators.select(value),\n      setContext: effectsTestersCreators.setContext(value),\n      spawn: effectsTestersCreators.spawn(value),\n      take: effectsTestersCreators.take(value),\n      takeEvery: effectsTestersCreators.takeEvery(value),\n      takeLatest: effectsTestersCreators.takeLatest(value),\n      takeLeading: effectsTestersCreators.takeLeading(value),\n      takeMaybe: effectsTestersCreators.takeMaybe(value),\n      throttle: effectsTestersCreators.throttle(value),\n      retry: effectsTestersCreators.retry(value),\n      is: effectsTestersCreators.is(value),\n      inspect: effectsTestersCreators.inspect(value),\n      isDone: effectsTestersCreators.isDone(done),\n      returns: effectsTestersCreators.returns(value, done)\n    });\n    return newApi;\n  }\n\n  function restart(...args) {\n    if (args.length > 0) {\n      finalSagaArgs = args;\n    }\n\n    history = [];\n    iterator = createIterator();\n    return api;\n  }\n\n  function next(...args) {\n    const arg = args[0];\n    let result;\n\n    if (args.length === 0) {\n      history.push({\n        type: _historyTypes.NONE\n      });\n      result = iterator.next();\n    } else {\n      history.push({\n        type: _historyTypes.ARGUMENT,\n        value: arg\n      });\n      result = iterator.next(arg);\n    }\n\n    return apiWithEffectsTesters(result);\n  }\n\n  function finish(...args) {\n    const arg = args[0];\n    let result;\n\n    if (args.length === 0) {\n      history.push({\n        type: _historyTypes.FINISH\n      });\n      result = iterator.return();\n    } else {\n      history.push({\n        type: _historyTypes.FINISH_ARGUMENT,\n        value: arg\n      });\n      result = iterator.return(arg);\n    }\n\n    return apiWithEffectsTesters(result);\n  }\n\n  function throwError(error) {\n    history.push({\n      type: _historyTypes.ERROR,\n      value: error\n    });\n    const result = iterator.throw(error);\n    return apiWithEffectsTesters(result);\n  }\n\n  function restore(name) {\n    if (!savePoints[name]) {\n      throw new Error(`No such save point ${name}`);\n    }\n\n    iterator = createIterator();\n    history = savePoints[name];\n    return applyHistory();\n  }\n\n  function back(n = 1) {\n    if (n > history.length) {\n      throw new Error('Cannot go back any further');\n    }\n\n    let m = n;\n\n    while (m--) {\n      history.pop();\n    }\n\n    iterator = createIterator();\n    return applyHistory();\n  }\n\n  function save(name) {\n    savePoints[name] = history.slice(0);\n    return api;\n  }\n\n  function applyHistory() {\n    for (let i = 0, l = history.length; i < l; i++) {\n      const arg = history[i];\n\n      switch (arg.type) {\n        case _historyTypes.NONE:\n          iterator.next();\n          break;\n\n        case _historyTypes.ARGUMENT:\n          iterator.next(arg.value);\n          break;\n\n        case _historyTypes.ERROR:\n          iterator.throw(arg.value);\n          break;\n\n        case _historyTypes.FINISH:\n          iterator.return();\n          break;\n\n        case _historyTypes.FINISH_ARGUMENT:\n          iterator.return(arg.value);\n          break;\n        // no default\n      }\n    }\n\n    return api;\n  }\n\n  return api;\n}"]}