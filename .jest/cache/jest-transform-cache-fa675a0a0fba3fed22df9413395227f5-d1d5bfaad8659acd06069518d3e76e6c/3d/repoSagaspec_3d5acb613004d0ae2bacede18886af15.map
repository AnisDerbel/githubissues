{"version":3,"sources":["/Users/anisderbel/Documents/apcgithubissues/src/redux/repo/__tests__/repoSaga.spec.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA,IAAM,SAAS,GAAG,SAAZ,SAAY,CAAC,iBAAD;AAAA,SAChB,mCAAW,aAAX,EAAqB,WAArB,CACE,4BAAgB;AACd,IAAA,IAAI,EAAE,kBADQ;AAEd,IAAA,IAAI,EAAE;AAFQ,GAAhB,CADF,EAKE,iBALF,CADgB;AAAA,CAAlB;;AASA,QAAQ,CAAC,UAAD,EAAa,YAAK;AACxB,MAAM,IAAI,GAAG,CAAb;AACA,EAAA,QAAQ,CAAC,qBAAD,EAAwB,YAAK;AACnC,QAAM,iBAAiB,GAAsB;AAC3C,MAAA,IAAI,EAAE,aADqC;AAE3C,MAAA,IAAI,EAAE;AAFqC,KAA7C;AAIA,IAAA,EAAE,CAAC,yCAAD,EAA4C;AAAA;;AAAA;AAAA;AAAA;AAAA;AACtC,cAAA,QADsC,GAC3B,wCAAyB,oBAAzB,CAD2B;AAAA;AAAA,gDAEjB,SAAS,CAAC,iBAAD,CAAT,CACxB,OADwB,CAChB,CAAC,CAAC,QAAQ,CAAC,IAAT,CAAc,EAAd,CAAiB,eAAM,GAAvB,CAAD,EAA8B,QAA9B,CAAD,CADgB,EAExB,QAFwB,CAEf,qBAAY,aAAZ,CAA0B;AAAC,gBAAA,IAAI,EAAJ;AAAD,eAA1B,CAFe,EAGxB,GAHwB,CAIvB,qBAAY,oBAAZ,CAAiC;AAC/B,gBAAA,MAAM,EAAE,QAAQ,CAAC,IADc;AAE/B,gBAAA,IAAI,EAAJ,IAF+B;AAG/B,gBAAA,aAAa,EAAE;AAHgB,eAAjC,CAJuB,EAUxB,SAVwB,EAFiB;;AAAA;AAAA;AAErC,cAAA,UAFqC,yBAErC,UAFqC;AAa5C,cAAA,MAAM,CAAC,UAAU,CAAC,IAAZ,CAAN,CAAwB,OAAxB,CAA+B,uBAAA,uBAAA,EAAA,EAC1B,UAAU,CAAC,IADe,CAAA,EACX;AAClB,gBAAA,MAAM,EAAA,uBAAA,uBAAA,EAAA,EACD,UAAU,CAAC,IAAX,CAAgB,MADf,CAAA,oCAEH,IAFG,EAEI,QAAQ,CAAC,IAFb,EADY;AAKlB,gBAAA,IAAI,EAAJ,IALkB;AAMlB,gBAAA,KAAK,EAAE,KANW;AAOlB,gBAAA,SAAS,EAAE,KAPO;AAQlB,gBAAA,aAAa,EAAE;AARG,eADW,CAA/B;;AAb4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA5C,CAAF;AAyBD,GA9BO,CAAR;AA+BD,CAjCO,CAAR","sourcesContent":["import {expectSaga} from 'redux-saga-test-plan';\nimport {reducer as formReducer} from 'redux-form';\nimport * as matchers from 'redux-saga-test-plan/matchers';\nimport {combineReducers} from 'redux';\nimport {createSuccessfulResponse} from '../../../__mocks__/response';\nimport repoReducer, {initialState} from '../reducer';\nimport axios from '../../axios';\nimport repoSaga from '../saga';\nimport formMock from '../../../__mocks__/form';\nimport {repoActions} from '../actions';\nimport {repoIssuesMock} from '../../../__mocks__/repo';\nimport {IApplicationState} from '../../appReducer';\n\nconst setupTest = (storeInitialState: IApplicationState) =>\n  expectSaga(repoSaga).withReducer<any, any>(\n    combineReducers({\n      form: formReducer,\n      repo: repoReducer,\n    }),\n    storeInitialState,\n  );\n\ndescribe('repoSaga', () => {\n  const page = 1;\n  describe(' get github issues ', () => {\n    const storeInitialState: IApplicationState = {\n      form: formMock,\n      repo: initialState,\n    };\n    it('should fetch github issues successfully', async () => {\n      const response = createSuccessfulResponse(repoIssuesMock);\n      const {storeState} = await setupTest(storeInitialState)\n        .provide([[matchers.call.fn(axios.get), response]])\n        .dispatch(repoActions.getRepoIssues({page}))\n        .put(\n          repoActions.getRepoIssuesSuccess({\n            issues: response.data,\n            page,\n            hasMoreIssues: true,\n          }),\n        )\n        .silentRun();\n      expect(storeState.repo).toEqual({\n        ...storeState.repo,\n        issues: {\n          ...storeState.repo.issues,\n          [page]: response.data,\n        },\n        page,\n        error: false,\n        isLoading: false,\n        hasMoreIssues: true,\n      });\n    });\n  });\n});\n"]}