{"version":3,"sources":["provideValue.js"],"names":["Object","defineProperty","exports","value","provideValue","handlers","next","NEXT","_parseEffect","_interopRequireDefault","require","_keys","_asEffect","obj","__esModule","default","create","ACTION_CHANNEL","ALL","providers","all","CALL","CANCEL","CANCELLED","CPS","FLUSH","FORK","effect","asEffect","fork","detached","spawn","GET_CONTEXT","JOIN","PUT","RACE","SELECT","SET_CONTEXT","TAKE","effectType","type","handler"],"mappings":"AAAA;;;;;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,YAAR,GAAuBA,YAAvB;AACAF,OAAO,CAACG,QAAR,GAAmBH,OAAO,CAACI,IAAR,GAAeJ,OAAO,CAACK,IAAR,GAAe,KAAK,CAAtD;;AAEA,IAAIC,YAAY,GAAGC,sBAAsB,CAACC,OAAO,CAAC,eAAD,CAAR,CAAzC;;AAEA,IAAIC,KAAK,GAAGD,OAAO,CAAC,gBAAD,CAAnB;;AAEA,IAAIE,SAAS,GAAGF,OAAO,CAAC,mBAAD,CAAvB;;AAEA,SAASD,sBAAT,CAAgCI,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,IAAMN,IAAI,GAAGP,MAAM,CAACgB,MAAP,CAAc,IAAd,CAAb;AACAd,OAAO,CAACK,IAAR,GAAeA,IAAf;;AAEA,IAAMD,IAAI,GAAG,SAAPA,IAAO;AAAA,SAAMC,IAAN;AAAA,CAAb;;AAEAL,OAAO,CAACI,IAAR,GAAeA,IAAf;AACA,IAAMD,QAAQ,6DACXM,KAAK,CAACM,cADK,EACY,eADZ,4CAGXN,KAAK,CAACO,GAHK,YAGAC,SAHA,EAGWhB,KAHX,EAGkB;AAC5B,MAAIgB,SAAS,CAACC,GAAd,EAAmB;AACjB,WAAOD,SAAS,CAACC,GAAV,CAAcjB,KAAd,EAAqBG,IAArB,CAAP;AACD;;AAED,SAAOC,IAAP;AACD,CATW,4CAWXI,KAAK,CAACU,IAXK,EAWE,MAXF,4CAYXV,KAAK,CAACW,MAZK,EAYI,QAZJ,4CAaXX,KAAK,CAACY,SAbK,EAaO,WAbP,4CAcXZ,KAAK,CAACa,GAdK,EAcC,KAdD,4CAeXb,KAAK,CAACc,KAfK,EAeG,OAfH,4CAiBXd,KAAK,CAACe,IAjBK,YAiBCP,SAjBD,EAiBYhB,KAjBZ,EAiBmB;AAC7B,MAAMwB,MAAM,GAAGf,SAAS,CAACgB,QAAV,CAAmBC,IAAnB,CAAwB1B,KAAxB,CAAf;;AAEA,MAAIgB,SAAS,CAACU,IAAV,IAAkB,CAACF,MAAM,CAACG,QAA9B,EAAwC;AACtC,WAAOX,SAAS,CAACU,IAAV,CAAeF,MAAf,EAAuBrB,IAAvB,CAAP;AACD;;AAED,MAAIa,SAAS,CAACY,KAAV,IAAmBJ,MAAM,CAACG,QAA9B,EAAwC;AACtC,WAAOX,SAAS,CAACY,KAAV,CAAgBJ,MAAhB,EAAwBrB,IAAxB,CAAP;AACD;;AAED,SAAOC,IAAP;AACD,CA7BW,4CA+BXI,KAAK,CAACqB,WA/BK,EA+BS,YA/BT,4CAgCXrB,KAAK,CAACsB,IAhCK,EAgCE,MAhCF,4CAiCXtB,KAAK,CAACuB,GAjCK,EAiCC,KAjCD,4CAkCXvB,KAAK,CAACwB,IAlCK,EAkCE,MAlCF,4CAmCXxB,KAAK,CAACyB,MAnCK,EAmCI,QAnCJ,4CAoCXzB,KAAK,CAAC0B,WApCK,EAoCS,YApCT,4CAqCX1B,KAAK,CAAC2B,IArCK,EAqCE,MArCF,aAAd;AAuCApC,OAAO,CAACG,QAAR,GAAmBA,QAAnB;;AAEA,SAASD,YAAT,CAAsBe,SAAtB,EAAiChB,KAAjC,EAAwC;AACtC,MAAIgB,SAAJ,EAAe;AACb,QAAMoB,UAAU,GAAG,CAAC,GAAG/B,YAAY,CAACO,OAAjB,EAA0BZ,KAA1B,EAAiCqC,IAApD;AACA,QAAMC,OAAO,GAAGpC,QAAQ,CAACkC,UAAD,CAAxB;;AAEA,QAAI,OAAOE,OAAP,KAAmB,QAAnB,IAA+BA,OAAO,IAAItB,SAA9C,EAAyD;AACvD,UAAMQ,MAAM,GAAGf,SAAS,CAACgB,QAAV,CAAmBa,OAAnB,EAA4BtC,KAA5B,CAAf;;AAEA,aAAOgB,SAAS,CAACsB,OAAD,CAAT,CAAmBd,MAAnB,EAA2BrB,IAA3B,CAAP;AACD;;AAED,QAAI,OAAOmC,OAAP,KAAmB,UAAvB,EAAmC;AACjC,aAAOA,OAAO,CAACtB,SAAD,EAAYhB,KAAZ,CAAd;AACD;AACF;;AAED,SAAOI,IAAP;AACD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.provideValue = provideValue;\nexports.handlers = exports.next = exports.NEXT = void 0;\n\nvar _parseEffect = _interopRequireDefault(require(\"./parseEffect\"));\n\nvar _keys = require(\"../shared/keys\");\n\nvar _asEffect = require(\"../utils/asEffect\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst NEXT = Object.create(null);\nexports.NEXT = NEXT;\n\nconst next = () => NEXT;\n\nexports.next = next;\nconst handlers = {\n  [_keys.ACTION_CHANNEL]: 'actionChannel',\n\n  [_keys.ALL](providers, value) {\n    if (providers.all) {\n      return providers.all(value, next);\n    }\n\n    return NEXT;\n  },\n\n  [_keys.CALL]: 'call',\n  [_keys.CANCEL]: 'cancel',\n  [_keys.CANCELLED]: 'cancelled',\n  [_keys.CPS]: 'cps',\n  [_keys.FLUSH]: 'flush',\n\n  [_keys.FORK](providers, value) {\n    const effect = _asEffect.asEffect.fork(value);\n\n    if (providers.fork && !effect.detached) {\n      return providers.fork(effect, next);\n    }\n\n    if (providers.spawn && effect.detached) {\n      return providers.spawn(effect, next);\n    }\n\n    return NEXT;\n  },\n\n  [_keys.GET_CONTEXT]: 'getContext',\n  [_keys.JOIN]: 'join',\n  [_keys.PUT]: 'put',\n  [_keys.RACE]: 'race',\n  [_keys.SELECT]: 'select',\n  [_keys.SET_CONTEXT]: 'setContext',\n  [_keys.TAKE]: 'take'\n};\nexports.handlers = handlers;\n\nfunction provideValue(providers, value) {\n  if (providers) {\n    const effectType = (0, _parseEffect.default)(value).type;\n    const handler = handlers[effectType];\n\n    if (typeof handler === 'string' && handler in providers) {\n      const effect = _asEffect.asEffect[handler](value);\n\n      return providers[handler](effect, next);\n    }\n\n    if (typeof handler === 'function') {\n      return handler(providers, value);\n    }\n  }\n\n  return NEXT;\n}"]}