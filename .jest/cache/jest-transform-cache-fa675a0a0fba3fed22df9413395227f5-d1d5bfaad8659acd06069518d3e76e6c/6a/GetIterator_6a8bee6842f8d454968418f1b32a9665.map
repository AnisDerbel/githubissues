{"version":3,"sources":["GetIterator.js"],"names":["GetIntrinsic","require","$TypeError","$asyncIterator","inspect","hasSymbols","getIteratorMethod","AdvanceStringIndex","Call","GetMethod","IsArray","Type","module","exports","GetIterator","obj","hint","method","actualHint","arguments","length","actualMethod","undefined","iterator"],"mappings":"AAAA;;AAEA,IAAIA,YAAY,GAAGC,OAAO,CAAC,eAAD,CAA1B;;AAEA,IAAIC,UAAU,GAAGF,YAAY,CAAC,aAAD,CAA7B;AACA,IAAIG,cAAc,GAAGH,YAAY,CAAC,wBAAD,EAA2B,IAA3B,CAAjC;;AAEA,IAAII,OAAO,GAAGH,OAAO,CAAC,gBAAD,CAArB;;AACA,IAAII,UAAU,GAAGJ,OAAO,CAAC,aAAD,CAAP,EAAjB;;AAEA,IAAIK,iBAAiB,GAAGL,OAAO,CAAC,8BAAD,CAA/B;;AACA,IAAIM,kBAAkB,GAAGN,OAAO,CAAC,sBAAD,CAAhC;;AACA,IAAIO,IAAI,GAAGP,OAAO,CAAC,QAAD,CAAlB;;AACA,IAAIQ,SAAS,GAAGR,OAAO,CAAC,aAAD,CAAvB;;AACA,IAAIS,OAAO,GAAGT,OAAO,CAAC,WAAD,CAArB;;AACA,IAAIU,IAAI,GAAGV,OAAO,CAAC,QAAD,CAAlB;;AAGAW,MAAM,CAACC,OAAP,GAAiB,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,IAA1B,EAAgCC,MAAhC,EAAwC;AACxD,MAAIC,UAAU,GAAGF,IAAjB;;AACA,MAAIG,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;AACzBF,IAAAA,UAAU,GAAG,MAAb;AACA;;AACD,MAAIA,UAAU,KAAK,MAAf,IAAyBA,UAAU,KAAK,OAA5C,EAAqD;AACpD,UAAM,IAAIhB,UAAJ,CAAe,oEAAoEE,OAAO,CAACY,IAAD,CAA1F,CAAN;AACA;;AAED,MAAIK,YAAY,GAAGJ,MAAnB;;AACA,MAAIE,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;AACzB,QAAIF,UAAU,KAAK,OAAnB,EAA4B;AAC3B,UAAIb,UAAU,IAAIF,cAAlB,EAAkC;AACjCkB,QAAAA,YAAY,GAAGZ,SAAS,CAACM,GAAD,EAAMZ,cAAN,CAAxB;AACA;;AACD,UAAIkB,YAAY,KAAKC,SAArB,EAAgC;AAC/B,cAAM,IAAIpB,UAAJ,CAAe,sDAAf,CAAN;AACA;AACD,KAPD,MAOO;AACNmB,MAAAA,YAAY,GAAGf,iBAAiB,CAC/B;AACCC,QAAAA,kBAAkB,EAAEA,kBADrB;AAECE,QAAAA,SAAS,EAAEA,SAFZ;AAGCC,QAAAA,OAAO,EAAEA,OAHV;AAICC,QAAAA,IAAI,EAAEA;AAJP,OAD+B,EAO/BI,GAP+B,CAAhC;AASA;AACD;;AACD,MAAIQ,QAAQ,GAAGf,IAAI,CAACa,YAAD,EAAeN,GAAf,CAAnB;;AACA,MAAIJ,IAAI,CAACY,QAAD,CAAJ,KAAmB,QAAvB,EAAiC;AAChC,UAAM,IAAIrB,UAAJ,CAAe,gCAAf,CAAN;AACA;;AAED,SAAOqB,QAAP;AAWA,CA9CD","sourcesContent":["'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $asyncIterator = GetIntrinsic('%Symbol.asyncIterator%', true);\n\nvar inspect = require('object-inspect');\nvar hasSymbols = require('has-symbols')();\n\nvar getIteratorMethod = require('../helpers/getIteratorMethod');\nvar AdvanceStringIndex = require('./AdvanceStringIndex');\nvar Call = require('./Call');\nvar GetMethod = require('./GetMethod');\nvar IsArray = require('./IsArray');\nvar Type = require('./Type');\n\n// https://262.ecma-international.org/9.0/#sec-getiterator\nmodule.exports = function GetIterator(obj, hint, method) {\n\tvar actualHint = hint;\n\tif (arguments.length < 2) {\n\t\tactualHint = 'sync';\n\t}\n\tif (actualHint !== 'sync' && actualHint !== 'async') {\n\t\tthrow new $TypeError(\"Assertion failed: `hint` must be one of 'sync' or 'async', got \" + inspect(hint));\n\t}\n\n\tvar actualMethod = method;\n\tif (arguments.length < 3) {\n\t\tif (actualHint === 'async') {\n\t\t\tif (hasSymbols && $asyncIterator) {\n\t\t\t\tactualMethod = GetMethod(obj, $asyncIterator);\n\t\t\t}\n\t\t\tif (actualMethod === undefined) {\n\t\t\t\tthrow new $TypeError(\"async from sync iterators aren't currently supported\");\n\t\t\t}\n\t\t} else {\n\t\t\tactualMethod = getIteratorMethod(\n\t\t\t\t{\n\t\t\t\t\tAdvanceStringIndex: AdvanceStringIndex,\n\t\t\t\t\tGetMethod: GetMethod,\n\t\t\t\t\tIsArray: IsArray,\n\t\t\t\t\tType: Type\n\t\t\t\t},\n\t\t\t\tobj\n\t\t\t);\n\t\t}\n\t}\n\tvar iterator = Call(actualMethod, obj);\n\tif (Type(iterator) !== 'Object') {\n\t\tthrow new $TypeError('iterator must return an object');\n\t}\n\n\treturn iterator;\n\n\t// TODO: This should return an IteratorRecord\n\t/*\n\tvar nextMethod = GetV(iterator, 'next');\n\treturn {\n\t\t'[[Iterator]]': iterator,\n\t\t'[[NextMethod]]': nextMethod,\n\t\t'[[Done]]': false\n\t};\n\t*/\n};\n"]}