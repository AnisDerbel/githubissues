8b146d39b4033ba70bff0bb96c50af73
var domEach = require('../utils').domEach;

var toString = Object.prototype.toString;

exports.css = function (prop, val) {
  if (arguments.length === 2 || toString.call(prop) === '[object Object]') {
    return domEach(this, function (idx, el) {
      setCss(el, prop, val, idx);
    });
  }

  return getCss(this[0], prop);
};

function setCss(el, prop, val, idx) {
  if ('string' == typeof prop) {
    var styles = getCss(el);

    if (typeof val === 'function') {
      val = val.call(el, idx, styles[prop]);
    }

    if (val === '') {
      delete styles[prop];
    } else if (val != null) {
      styles[prop] = val;
    }

    el.attribs.style = stringify(styles);
  } else if ('object' == typeof prop) {
    Object.keys(prop).forEach(function (k) {
      setCss(el, k, prop[k]);
    });
  }
}

function getCss(el, prop) {
  if (!el || !el.attribs) {
    return undefined;
  }

  var styles = parse(el.attribs.style);

  if (typeof prop === 'string') {
    return styles[prop];
  } else if (Array.isArray(prop)) {
    var newStyles = {};
    prop.forEach(function (item) {
      if (styles[item] != null) {
        newStyles[item] = styles[item];
      }
    });
    return newStyles;
  }

  return styles;
}

function stringify(obj) {
  return Object.keys(obj || {}).reduce(function (str, prop) {
    return str += '' + (str ? ' ' : '') + prop + ': ' + obj[prop] + ';';
  }, '');
}

function parse(styles) {
  styles = (styles || '').trim();
  if (!styles) return {};
  return styles.split(';').reduce(function (obj, str) {
    var n = str.indexOf(':');
    if (n < 1 || n === str.length - 1) return obj;
    obj[str.slice(0, n).trim()] = str.slice(n + 1).trim();
    return obj;
  }, {});
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNzcy5qcyJdLCJuYW1lcyI6WyJkb21FYWNoIiwicmVxdWlyZSIsInRvU3RyaW5nIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiZXhwb3J0cyIsImNzcyIsInByb3AiLCJ2YWwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJjYWxsIiwiaWR4IiwiZWwiLCJzZXRDc3MiLCJnZXRDc3MiLCJzdHlsZXMiLCJhdHRyaWJzIiwic3R5bGUiLCJzdHJpbmdpZnkiLCJrZXlzIiwiZm9yRWFjaCIsImsiLCJ1bmRlZmluZWQiLCJwYXJzZSIsIkFycmF5IiwiaXNBcnJheSIsIm5ld1N0eWxlcyIsIml0ZW0iLCJvYmoiLCJyZWR1Y2UiLCJzdHIiLCJ0cmltIiwic3BsaXQiLCJuIiwiaW5kZXhPZiIsInNsaWNlIl0sIm1hcHBpbmdzIjoiQUFJQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVAsQ0FBb0JELE9BQWxDOztBQUVBLElBQUlFLFFBQVEsR0FBR0MsTUFBTSxDQUFDQyxTQUFQLENBQWlCRixRQUFoQzs7QUFhQUcsT0FBTyxDQUFDQyxHQUFSLEdBQWMsVUFBVUMsSUFBVixFQUFnQkMsR0FBaEIsRUFBcUI7QUFDakMsTUFDRUMsU0FBUyxDQUFDQyxNQUFWLEtBQXFCLENBQXJCLElBRUFSLFFBQVEsQ0FBQ1MsSUFBVCxDQUFjSixJQUFkLE1BQXdCLGlCQUgxQixFQUlFO0FBQ0EsV0FBT1AsT0FBTyxDQUFDLElBQUQsRUFBTyxVQUFVWSxHQUFWLEVBQWVDLEVBQWYsRUFBbUI7QUFDdENDLE1BQUFBLE1BQU0sQ0FBQ0QsRUFBRCxFQUFLTixJQUFMLEVBQVdDLEdBQVgsRUFBZ0JJLEdBQWhCLENBQU47QUFDRCxLQUZhLENBQWQ7QUFHRDs7QUFDRCxTQUFPRyxNQUFNLENBQUMsS0FBSyxDQUFMLENBQUQsRUFBVVIsSUFBVixDQUFiO0FBQ0QsQ0FYRDs7QUF1QkEsU0FBU08sTUFBVCxDQUFnQkQsRUFBaEIsRUFBb0JOLElBQXBCLEVBQTBCQyxHQUExQixFQUErQkks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QUFaLENBQVI7QUFFQSxRQUFJRCxDQUFDLEdBQUcsQ0FBSixJQUFTQSxDQUFDLEtBQUtILEdBQUcsQ0FBQ3JCLE1BQUosR0FBYSxDQUFoQyxFQUFtQyxPQUFPbUIsR0FBUDtBQUNuQ0EsSUFBQUEsR0FBRyxDQUFDRSxHQUFHLENBQUNLLEtBQUosQ0FBVSxDQUFWLEVBQWFGLENBQWIsRUFBZ0JGLElBQWhCLEVBQUQsQ0FBSCxHQUE4QkQsR0FBRyxDQUFDSyxLQUFKLENBQVVGLENBQUMsR0FBRyxDQUFkLEVBQWlCRixJQUFqQixFQUE5QjtBQUNBLFdBQU9ILEdBQVA7QUFDRCxHQU5NLEVBTUosRUFOSSxDQUFQO0FBT0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBtb2R1bGUgY2hlZXJpby9jc3NcbiAqL1xuXG52YXIgZG9tRWFjaCA9IHJlcXVpcmUoJy4uL3V0aWxzJykuZG9tRWFjaDtcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGEgc3R5bGUgcHJvcGVydHkgZm9yIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBzZXQgb2ZcbiAqIG1hdGNoZWQgZWxlbWVudHMgb3Igc2V0IG9uZSBvciBtb3JlIENTUyBwcm9wZXJ0aWVzIGZvciBldmVyeSBtYXRjaGVkXG4gKiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcHJvcCAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsXSAtIElmIHNwZWNpZmllZCB0aGUgbmV3IHZhbHVlLlxuICogQHJldHVybnMge3NlbGZ9XG4gKlxuICogQHNlZSB7QGxpbmsgaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nzcy99XG4gKi9cbmV4cG9ydHMuY3NzID0gZnVuY3Rpb24gKHByb3AsIHZhbCkge1xuICBpZiAoXG4gICAgYXJndW1lbnRzLmxlbmd0aCA9PT0gMiB8fFxuICAgIC8vIFdoZW4gYHByb3BgIGlzIGEgXCJwbGFpblwiIG9iamVjdFxuICAgIHRvU3RyaW5nLmNhbGwocHJvcCkgPT09ICdbb2JqZWN0IE9iamVjdF0nXG4gICkge1xuICAgIHJldHVybiBkb21FYWNoKHRoaXMsIGZ1bmN0aW9uIChpZHgsIGVsKSB7XG4gICAgICBzZXRDc3MoZWwsIHByb3AsIHZhbCwgaWR4KTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZ2V0Q3NzKHRoaXNbMF0sIHByb3ApO1xufTtcblxuLyoqXG4gKiBTZXQgc3R5bGVzIG9mIGFsbCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZWwgLSBFbGVtZW50IHRvIHNldCBzdHlsZSBvZi5cbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcHJvcCAtIE5hbWUgb2YgcHJvcGVydHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsIC0gVmFsdWUgdG8gc2V0IHByb3BlcnR5IHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtpZHhdIC0gT3B0aW9uYWwgaW5kZXggd2l0aGluIHRoZSBzZWxlY3Rpb24uXG4gKiBAcmV0dXJucyB7c2VsZn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNldENzcyhlbCwgcHJvcCwgdmFsLCBpZHgpIHtcbiAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBwcm9wKSB7XG4gICAgdmFyIHN0eWxlcyA9IGdldENzcyhlbCk7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhbCA9IHZhbC5jYWxsKGVsLCBpZHgsIHN0eWxlc1twcm9wXSk7XG4gICAgfVxuXG4gICAgaWYgKHZhbCA9PT0gJycpIHtcbiAgICAgIGRlbGV0ZSBzdHlsZXNbcHJvcF07XG4gICAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgc3R5bGVzW3Byb3BdID0gdmFsO1xuICAgIH1cblxuICAgIGVsLmF0dHJpYnMuc3R5bGUgPSBzdHJpbmdpZnkoc3R5bGVzKTtcbiAgfSBlbHNlIGlmICgnb2JqZWN0JyA9PSB0eXBlb2YgcHJvcCkge1xuICAgIE9iamVjdC5rZXlzKHByb3ApLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgIHNldENzcyhlbCwgaywgcHJvcFtrXSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgcGFyc2VkIHN0eWxlcyBvZiB0aGUgZmlyc3QgZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge25vZGV9IGVsIC0gRWxlbWVudCB0byBnZXQgc3R5bGVzIGZyb20uXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIE5hbWUgb2YgdGhlIHByb3AuXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0Q3NzKGVsLCBwcm9wKSB7XG4gIGlmICghZWwgfHwgIWVsLmF0dHJpYnMpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIHN0eWxlcyA9IHBhcnNlKGVsLmF0dHJpYnMuc3R5bGUpO1xuICBpZiAodHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHN0eWxlc1twcm9wXTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHByb3ApKSB7XG4gICAgdmFyIG5ld1N0eWxlcyA9IHt9O1xuICAgIHByb3AuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgaWYgKHN0eWxlc1tpdGVtXSAhPSBudWxsKSB7XG4gICAgICAgIG5ld1N0eWxlc1tpdGVtXSA9IHN0eWxlc1tpdGVtXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbmV3U3R5bGVzO1xuICB9XG4gIHJldHVybiBzdHlsZXM7XG59XG5cbi8qKlxuICogU3RyaW5naWZ5IGBvYmpgIHRvIHN0eWxlcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb2JqIC0gT2JqZWN0IHRvIHN0cmluZ2lmeS5cbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnkob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmogfHwge30pLnJlZHVjZShmdW5jdGlvbiAoc3RyLCBwcm9wKSB7XG4gICAgcmV0dXJuIChzdHIgKz0gJycgKyAoc3RyID8gJyAnIDogJycpICsgcHJvcCArICc6ICcgKyBvYmpbcHJvcF0gKyAnOycpO1xuICB9LCAnJyk7XG59XG5cbi8qKlxuICogUGFyc2UgYHN0eWxlc2AuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlcyAtIFN0eWxlcyB0byBiZSBwYXJzZWQuXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcGFyc2Uoc3R5bGVzKSB7XG4gIHN0eWxlcyA9IChzdHlsZXMgfHwgJycpLnRyaW0oKTtcblxuICBpZiAoIXN0eWxlcykgcmV0dXJuIHt9O1xuXG4gIHJldHVybiBzdHlsZXMuc3BsaXQoJzsnKS5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgc3RyKSB7XG4gICAgdmFyIG4gPSBzdHIuaW5kZXhPZignOicpO1xuICAgIC8vIHNraXAgaWYgdGhlcmUgaXMgbm8gOiwgb3IgaWYgaXQgaXMgdGhlIGZpcnN0L2xhc3QgY2hhcmFjdGVyXG4gICAgaWYgKG4gPCAxIHx8IG4gPT09IHN0ci5sZW5ndGggLSAxKSByZXR1cm4gb2JqO1xuICAgIG9ialtzdHIuc2xpY2UoMCwgbikudHJpbSgpXSA9IHN0ci5zbGljZShuICsgMSkudHJpbSgpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcbn1cbiJdfQ==