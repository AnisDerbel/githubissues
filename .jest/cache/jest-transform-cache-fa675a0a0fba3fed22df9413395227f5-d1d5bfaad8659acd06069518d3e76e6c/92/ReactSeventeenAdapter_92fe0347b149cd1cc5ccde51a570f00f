1b67a8b8a28416586d753f69fb424984
"use strict";

var _object = _interopRequireDefault(require("object.assign"));

var _react = _interopRequireDefault(require("react"));

var _reactDom = _interopRequireDefault(require("react-dom"));

var _server = _interopRequireDefault(require("react-dom/server"));

var _shallow = _interopRequireDefault(require("react-test-renderer/shallow"));

var _testUtils = _interopRequireDefault(require("react-dom/test-utils"));

var _checkPropTypes2 = _interopRequireDefault(require("prop-types/checkPropTypes"));

var _has = _interopRequireDefault(require("has"));

var _reactIs = require("react-is");

var _enzyme = require("enzyme");

var _Utils = require("enzyme/build/Utils");

var _enzymeShallowEqual = _interopRequireDefault(require("enzyme-shallow-equal"));

var _enzymeAdapterUtils = require("@wojtekmaj/enzyme-adapter-utils");

var _findCurrentFiberUsingSlowPath = _interopRequireDefault(require("./findCurrentFiberUsingSlowPath"));

var _detectFiberTags = _interopRequireDefault(require("./detectFiberTags"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var FiberTags = null;

function nodeAndSiblingsArray(nodeWithSibling) {
  var array = [];
  var node = nodeWithSibling;

  while (node != null) {
    array.push(node);
    node = node.sibling;
  }

  return array;
}

function flatten(arr) {
  var result = [];
  var stack = [{
    i: 0,
    array: arr
  }];

  while (stack.length) {
    var n = stack.pop();

    while (n.i < n.array.length) {
      var el = n.array[n.i];
      n.i += 1;

      if (Array.isArray(el)) {
        stack.push(n);
        stack.push({
          i: 0,
          array: el
        });
        break;
      }

      result.push(el);
    }
  }

  return result;
}

function nodeTypeFromType(type) {
  if (type === _reactIs.Portal) {
    return 'portal';
  }

  return (0, _enzymeAdapterUtils.nodeTypeFromType)(type);
}

function isMemo(type) {
  return (0, _enzymeAdapterUtils.compareNodeTypeOf)(type, _reactIs.Memo);
}

function isLazy(type) {
  return (0, _enzymeAdapterUtils.compareNodeTypeOf)(type, _reactIs.Lazy);
}

function unmemoType(type) {
  return isMemo(type) ? type.type : type;
}

function checkIsSuspenseAndCloneElement(el, _ref) {
  var suspenseFallback = _ref.suspenseFallback;

  if (!(0, _reactIs.isSuspense)(el)) {
    return el;
  }

  var children = el.props.children;

  if (suspenseFallback) {
    var fallback = el.props.fallback;
    children = replaceLazyWithFallback(children, fallback);
  }

  var FakeSuspenseWrapper = function FakeSuspenseWrapper(props) {
    return _react["default"].createElement(el.type, _objectSpread(_objectSpread({}, el.props), props), children);
  };

  return _react["default"].createElement(FakeSuspenseWrapper, null, children);
}

function elementToTree(el) {
  if (!(0, _reactIs.isPortal)(el)) {
    return (0, _enzymeAdapterUtils.elementToTree)(el, elementToTree);
  }

  var children = el.children,
      containerInfo = el.containerInfo;
  var props = {
    children: children,
    containerInfo: containerInfo
  };
  return {
    nodeType: 'portal',
    type: _reactIs.Portal,
    props: props,
    key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(el.key),
    ref: el.ref || null,
    instance: null,
    rendered: elementToTree(el.children)
  };
}

function _toTree(vnode) {
  if (vnode == null) {
    return null;
  }

  var node = (0, _findCurrentFiberUsingSlowPath["default"])(vnode);

  switch (node.tag) {
    case FiberTags.HostRoot:
      return childrenToTree(node.child);

    case FiberTags.HostPortal:
      {
        var containerInfo = node.stateNode.containerInfo,
            children = node.memoizedProps;
        var props = {
          containerInfo: containerInfo,
          children: children
        };
        return {
          nodeType: 'portal',
          type: _reactIs.Portal,
          props: props,
          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
          ref: node.ref,
          instance: null,
          rendered: childrenToTree(node.child)
        };
      }

    case FiberTags.ClassComponent:
      return {
        nodeType: 'class',
        type: node.type,
        props: _objectSpread({}, node.memoizedProps),
        key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
        ref: node.ref,
        instance: node.stateNode,
        rendered: childrenToTree(node.child)
      };

    case FiberTags.FunctionalComponent:
      return {
        nodeType: 'function',
        type: node.type,
        props: _objectSpread({}, node.memoizedProps),
        key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
        ref: node.ref,
        instance: null,
        rendered: childrenToTree(node.child)
      };

    case FiberTags.MemoClass:
      return {
        nodeType: 'class',
        type: node.elementType.type,
        props: _objectSpread({}, node.memoizedProps),
        key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
        ref: node.ref,
        instance: node.stateNode,
        rendered: childrenToTree(node.child.child)
      };

    case FiberTags.MemoSFC:
      {
        var renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(_toTree));

        if (renderedNodes.length === 0) {
          renderedNodes = [node.memoizedProps.children];
        }

        return {
          nodeType: 'function',
          type: node.elementType,
          props: _objectSpread({}, node.memoizedProps),
          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
          ref: node.ref,
          instance: null,
          rendered: renderedNodes
        };
      }

    case FiberTags.HostComponent:
      {
        var _renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(_toTree));

        if (_renderedNodes.length === 0) {
          _renderedNodes = [node.memoizedProps.children];
        }

        return {
          nodeType: 'host',
          type: node.type,
          props: _objectSpread({}, node.memoizedProps),
          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
          ref: node.ref,
          instance: node.stateNode,
          rendered: _renderedNodes
        };
      }

    case FiberTags.HostText:
      return node.memoizedProps;

    case FiberTags.Fragment:
    case FiberTags.Mode:
    case FiberTags.ContextProvider:
    case FiberTags.ContextConsumer:
      return childrenToTree(node.child);

    case FiberTags.Profiler:
    case FiberTags.ForwardRef:
      {
        return {
          nodeType: 'function',
          type: node.type,
          props: _objectSpread({}, node.pendingProps),
          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
          ref: node.ref,
          instance: null,
          rendered: childrenToTree(node.child)
        };
      }

    case FiberTags.Suspense:
      {
        return {
          nodeType: 'function',
          type: _reactIs.Suspense,
          props: _objectSpread({}, node.memoizedProps),
          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),
          ref: node.ref,
          instance: null,
          rendered: childrenToTree(node.child)
        };
      }

    case FiberTags.Lazy:
      return childrenToTree(node.child);

    case FiberTags.OffscreenComponent:
      return _toTree(node.child);

    default:
      throw new Error("Enzyme Internal Error: unknown node with tag ".concat(node.tag));
  }
}

function childrenToTree(node) {
  if (!node) {
    return null;
  }

  var children = nodeAndSiblingsArray(node);

  if (children.length === 0) {
    return null;
  }

  if (children.length === 1) {
    return _toTree(children[0]);
  }

  return flatten(children.map(_toTree));
}

function _nodeToHostNode(_node) {
  var node = _node;

  while (node && !Array.isArray(node) && node.instance === null) {
    node = node.rendered;
  }

  if (!node) {
    return null;
  }

  var mapper = function mapper(item) {
    if (item && item.instance) return _reactDom["default"].findDOMNode(item.instance);
    return null;
  };

  if (Array.isArray(node)) {
    return node.map(mapper);
  }

  if (Array.isArray(node.rendered) && node.nodeType === 'class') {
    return node.rendered.map(mapper);
  }

  return mapper(node);
}

function replaceLazyWithFallback(node, fallback) {
  if (!node) {
    return null;
  }

  if (Array.isArray(node)) {
    return node.map(function (el) {
      return replaceLazyWithFallback(el, fallback);
    });
  }

  if (isLazy(node.type)) {
    return fallback;
  }

  return _objectSpread(_objectSpread({}, node), {}, {
    props: _objectSpread(_objectSpread({}, node.props), {}, {
      children: replaceLazyWithFallback(node.props.children, fallback)
    })
  });
}

var eventOptions = {
  animation: true,
  pointerEvents: true,
  auxClick: true
};

function getEmptyStateValue() {
  var EmptyState = function (_React$Component) {
    _inherits(EmptyState, _React$Component);

    var _super = _createSuper(EmptyState);

    function EmptyState() {
      _classCallCheck(this, EmptyState);

      return _super.apply(this, arguments);
    }

    _createClass(EmptyState, [{
      key: "render",
      value: function render() {
        return null;
      }
    }]);

    return EmptyState;
  }(_react["default"].Component);

  var testRenderer = new _shallow["default"]();
  testRenderer.render(_react["default"].createElement(EmptyState));
  return testRenderer._instance.state;
}

function wrapAct(fn) {
  var returnVal;

  _testUtils["default"].act(function () {
    returnVal = fn();
  });

  return returnVal;
}

function getProviderDefaultValue(Provider) {
  if ('_defaultValue' in Provider._context) {
    return Provider._context._defaultValue;
  }

  if ('_currentValue' in Provider._context) {
    return Provider._context._currentValue;
  }

  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');
}

function makeFakeElement(type) {
  return {
    $$typeof: _reactIs.Element,
    type: type
  };
}

function isStateful(Component) {
  return Component.prototype && (Component.prototype.isReactComponent || Array.isArray(Component.__reactAutoBindPairs));
}

var ReactSeventeenAdapter = function (_EnzymeAdapter) {
  _inherits(ReactSeventeenAdapter, _EnzymeAdapter);

  var _super2 = _createSuper(ReactSeventeenAdapter);

  function ReactSeventeenAdapter() {
    var _this;

    _classCallCheck(this, ReactSeventeenAdapter);

    _this = _super2.call(this);
    var lifecycles = _this.options.lifecycles;
    _this.options = _objectSpread(_objectSpread({}, _this.options), {}, {
      enableComponentDidUpdateOnSetState: true,
      legacyContextMode: 'parent',
      lifecycles: _objectSpread(_objectSpread({}, lifecycles), {}, {
        componentDidUpdate: {
          onSetState: true
        },
        getDerivedStateFromProps: {
          hasShouldComponentUpdateBug: false
        },
        getSnapshotBeforeUpdate: true,
        setState: {
          skipsComponentDidUpdateOnNullish: true
        },
        getChildContext: {
          calledByRenderer: false
        },
        getDerivedStateFromError: true
      })
    });
    return _this;
  }

  _createClass(ReactSeventeenAdapter, [{
    key: "createMountRenderer",
    value: function createMountRenderer(options) {
      (0, _enzymeAdapterUtils.assertDomAvailable)('mount');

      if ((0, _has["default"])(options, 'suspenseFallback')) {
        throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');
      }

      if (FiberTags === null) {
        FiberTags = (0, _detectFiberTags["default"])();
      }

      var attachTo = options.attachTo,
          hydrateIn = options.hydrateIn,
          wrappingComponentProps = options.wrappingComponentProps;
      var domNode = hydrateIn || attachTo || global.document.createElement('div');
      var instance = null;
      var adapter = this;
      return {
        render: function render(el, context, callback) {
          return wrapAct(function () {
            if (instance === null) {
              var type = el.type,
                  props = el.props,
                  ref = el.ref;

              var wrapperProps = _objectSpread({
                Component: type,
                props: props,
                wrappingComponentProps: wrappingComponentProps,
                context: context
              }, ref && {
                refProp: ref
              });

              var ReactWrapperComponent = (0, _enzymeAdapterUtils.createMountWrapper)(el, _objectSpread(_objectSpread({}, options), {}, {
                adapter: adapter
              }));

              var wrappedEl = _react["default"].createElement(ReactWrapperComponent, wrapperProps);

              instance = hydrateIn ? _reactDom["default"].hydrate(wrappedEl, domNode) : _reactDom["default"].render(wrappedEl, domNode);

              if (typeof callback === 'function') {
                callback();
              }
            } else {
              instance.setChildProps(el.props, context, callback);
            }
          });
        },
        unmount: function unmount() {
          _reactDom["default"].unmountComponentAtNode(domNode);

          instance = null;
        },
        getNode: function getNode() {
          if (!instance) {
            return null;
          }

          return (0, _enzymeAdapterUtils.getNodeFromRootFinder)(adapter.isCustomComponent, _toTree(instance._reactInternals), options);
        },
        simulateError: function simulateError(nodeHierarchy, rootNode, error) {
          var isErrorBoundary = function isErrorBoundary(_ref2) {
            var elInstance = _ref2.instance,
                type = _ref2.type;

            if (type && type.getDerivedStateFromError) {
              return true;
            }

            return elInstance && elInstance.componentDidCatch;
          };

          var _ref3 = nodeHierarchy.find(isErrorBoundary) || {},
              catchingInstance = _ref3.instance,
              catchingType = _ref3.type;

          (0, _enzymeAdapterUtils.simulateError)(error, catchingInstance, rootNode, nodeHierarchy, nodeTypeFromType, adapter.displayNameOfNode, catchingType);
        },
        simulateEvent: function simulateEvent(node, event, mock) {
          var mappedEvent = (0, _enzymeAdapterUtils.mapNativeEventNames)(event, eventOptions);
          var eventFn = _testUtils["default"].Simulate[mappedEvent];

          if (!eventFn) {
            throw new TypeError("ReactWrapper::simulate() event '".concat(event, "' does not exist"));
          }

          wrapAct(function () {
            eventFn(adapter.nodeToHostNode(node), mock);
          });
        },
        batchedUpdates: function batchedUpdates(fn) {
          return fn();
        },
        getWrappingComponentRenderer: function getWrappingComponentRenderer() {
          return _objectSpread(_objectSpread({}, this), (0, _enzymeAdapterUtils.getWrappingComponentMountRenderer)({
            toTree: function toTree(inst) {
              return _toTree(inst._reactInternals);
            },
            getMountWrapperInstance: function getMountWrapperInstance() {
              return instance;
            }
          }));
        },
        wrapInvoke: wrapAct
      };
    }
  }, {
    key: "createShallowRenderer",
    value: function createShallowRenderer() {
      var _this2 = this;

      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var adapter = this;
      var renderer = new _shallow["default"]();
      var suspenseFallback = options.suspenseFallback;

      if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {
        throw TypeError('`options.suspenseFallback` should be boolean or undefined');
      }

      var isDOM = false;
      var cachedNode = null;
      var lastComponent = null;
      var wrappedComponent = null;
      var sentinel = {};

      var wrapPureComponent = function wrapPureComponent(Component, compare) {
        if (lastComponent !== Component) {
          if (isStateful(Component)) {
            wrappedComponent = function (_Component) {
              _inherits(wrappedComponent, _Component);

              var _super3 = _createSuper(wrappedComponent);

              function wrappedComponent() {
                _classCallCheck(this, wrappedComponent);

                return _super3.apply(this, arguments);
              }

              return wrappedComponent;
            }(Component);

            if (compare) {
              wrappedComponent.prototype.shouldComponentUpdate = function (nextProps) {
                return !compare(_this2.props, nextProps);
              };
            } else {
              wrappedComponent.prototype.isPureReactComponent = true;
            }
          } else {
            var memoized = sentinel;
            var prevProps;

            wrappedComponent = function wrappedComponentFn(props) {
              var shouldUpdate = memoized === sentinel || (compare ? !compare(prevProps, props) : !(0, _enzymeShallowEqual["default"])(prevProps, props));

              if (shouldUpdate) {
                for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                  args[_key - 1] = arguments[_key];
                }

                memoized = Component.apply(void 0, [_objectSpread(_objectSpread({}, Component.defaultProps), props)].concat(args));
                prevProps = props;
              }

              return memoized;
            };
          }

          (0, _object["default"])(wrappedComponent, Component, {
            displayName: adapter.displayNameOfNode({
              type: Component
            })
          });
          lastComponent = Component;
        }

        return wrappedComponent;
      };

      var wrapFunctionalComponent = function wrapFunctionalComponent(Component) {
        if ((0, _has["default"])(Component, 'defaultProps')) {
          if (lastComponent !== Component) {
            wrappedComponent = (0, _object["default"])(function (props) {
              for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                args[_key2 - 1] = arguments[_key2];
              }

              return Component.apply(void 0, [_objectSpread(_objectSpread({}, Component.defaultProps), props)].concat(args));
            }, Component, {
              displayName: adapter.displayNameOfNode({
                type: Component
              })
            });
            lastComponent = Component;
          }

          return wrappedComponent;
        }

        return Component;
      };

      var renderElement = function renderElement(elConfig) {
        for (var _len3 = arguments.length, rest = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
          rest[_key3 - 1] = arguments[_key3];
        }

        var renderedEl = renderer.render.apply(renderer, [elConfig].concat(rest));
        var typeIsExisted = !!(renderedEl && renderedEl.type);

        if (typeIsExisted) {
          var clonedEl = checkIsSuspenseAndCloneElement(renderedEl, {
            suspenseFallback: suspenseFallback
          });
          var elementIsChanged = clonedEl.type !== renderedEl.type;

          if (elementIsChanged) {
            return renderer.render.apply(renderer, [_objectSpread(_objectSpread({}, elConfig), {}, {
              type: clonedEl.type
            })].concat(rest));
          }
        }

        return renderedEl;
      };

      return {
        render: function render(el, unmaskedContext) {
          var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
              _ref4$providerValues = _ref4.providerValues,
              providerValues = _ref4$providerValues === void 0 ? new Map() : _ref4$providerValues;

          cachedNode = el;

          if (typeof el.type === 'string') {
            isDOM = true;
          } else if ((0, _reactIs.isContextProvider)(el)) {
            providerValues.set(el.type, el.props.value);
            var MockProvider = (0, _object["default"])(function (props) {
              return props.children;
            }, el.type);
            return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
              return renderElement(_objectSpread(_objectSpread({}, el), {}, {
                type: MockProvider
              }));
            });
          } else if ((0, _reactIs.isContextConsumer)(el)) {
            var Provider = adapter.getProviderFromConsumer(el.type);
            var value = providerValues.has(Provider) ? providerValues.get(Provider) : getProviderDefaultValue(Provider);
            var MockConsumer = (0, _object["default"])(function (props) {
              return props.children(value);
            }, el.type);
            return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
              return renderElement(_objectSpread(_objectSpread({}, el), {}, {
                type: MockConsumer
              }));
            });
          } else {
            isDOM = false;
            var renderedEl = el;

            if (isLazy(renderedEl)) {
              throw TypeError('`React.lazy` is not supported by shallow rendering.');
            }

            renderedEl = checkIsSuspenseAndCloneElement(renderedEl, {
              suspenseFallback: suspenseFallback
            });
            var _renderedEl = renderedEl,
                Component = _renderedEl.type;
            var context = (0, _enzymeAdapterUtils.getMaskedContext)(Component.contextTypes, unmaskedContext);

            if (isMemo(el.type)) {
              var _el$type = el.type,
                  InnerComp = _el$type.type,
                  compare = _el$type.compare;
              return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
                return renderElement(_objectSpread(_objectSpread({}, el), {}, {
                  type: wrapPureComponent(InnerComp, compare)
                }), context);
              });
            }

            var isComponentStateful = isStateful(Component);

            if (!isComponentStateful && typeof Component === 'function') {
              return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
                return renderElement(_objectSpread(_objectSpread({}, renderedEl), {}, {
                  type: wrapFunctionalComponent(Component)
                }), context);
              });
            }

            if (isComponentStateful) {
              if (renderer._instance && el.props === renderer._instance.props && !(0, _enzymeShallowEqual["default"])(context, renderer._instance.context)) {
                var _spyMethod = (0, _enzymeAdapterUtils.spyMethod)(renderer, '_updateClassComponent', function (originalMethod) {
                  return function _updateClassComponent() {
                    var props = renderer._instance.props;

                    var clonedProps = _objectSpread({}, props);

                    renderer._instance.props = clonedProps;

                    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
                      args[_key4] = arguments[_key4];
                    }

                    var result = originalMethod.apply(renderer, args);
                    renderer._instance.props = props;
                    restore();
                    return result;
                  };
                }),
                    restore = _spyMethod.restore;
              }

              var emptyStateValue = getEmptyStateValue();

              if (emptyStateValue) {
                Object.defineProperty(Component.prototype, 'state', {
                  configurable: true,
                  enumerable: true,
                  get: function get() {
                    return null;
                  },
                  set: function set(value) {
                    if (value !== emptyStateValue) {
                      Object.defineProperty(this, 'state', {
                        configurable: true,
                        enumerable: true,
                        value: value,
                        writable: true
                      });
                    }

                    return true;
                  }
                });
              }
            }

            return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
              return renderElement(renderedEl, context);
            });
          }
        },
        unmount: function unmount() {
          renderer.unmount();
        },
        getNode: function getNode() {
          if (isDOM) {
            return elementToTree(cachedNode);
          }

          var output = renderer.getRenderOutput();
          return {
            nodeType: nodeTypeFromType(cachedNode.type),
            type: cachedNode.type,
            props: cachedNode.props,
            key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(cachedNode.key),
            ref: cachedNode.ref,
            instance: renderer._instance,
            rendered: Array.isArray(output) ? flatten(output).map(function (el) {
              return elementToTree(el);
            }) : elementToTree(output)
          };
        },
        simulateError: function simulateError(nodeHierarchy, rootNode, error) {
          (0, _enzymeAdapterUtils.simulateError)(error, renderer._instance, cachedNode, nodeHierarchy.concat(cachedNode), nodeTypeFromType, adapter.displayNameOfNode, cachedNode.type);
        },
        simulateEvent: function simulateEvent(node, event) {
          for (var _len5 = arguments.length, args = new Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {
            args[_key5 - 2] = arguments[_key5];
          }

          var handler = node.props[(0, _enzymeAdapterUtils.propFromEvent)(event, eventOptions)];

          if (handler) {
            (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
              handler.apply(void 0, args);
            });
          }
        },
        batchedUpdates: function batchedUpdates(fn) {
          return fn();
        },
        checkPropTypes: function checkPropTypes(typeSpecs, values, location, hierarchy) {
          return (0, _checkPropTypes2["default"])(typeSpecs, values, location, (0, _enzymeAdapterUtils.displayNameOfNode)(cachedNode), function () {
            return (0, _enzymeAdapterUtils.getComponentStack)(hierarchy.concat([cachedNode]));
          });
        }
      };
    }
  }, {
    key: "createStringRenderer",
    value: function createStringRenderer(options) {
      if ((0, _has["default"])(options, 'suspenseFallback')) {
        throw new TypeError('`suspenseFallback` should not be specified in options of string renderer');
      }

      return {
        render: function render(el, context) {
          if (options.context && (el.type.contextTypes || options.childContextTypes)) {
            var childContextTypes = _objectSpread(_objectSpread({}, el.type.contextTypes || {}), options.childContextTypes);

            var ContextWrapper = (0, _enzymeAdapterUtils.createRenderWrapper)(el, context, childContextTypes);
            return _server["default"].renderToStaticMarkup(_react["default"].createElement(ContextWrapper));
          }

          return _server["default"].renderToStaticMarkup(el);
        }
      };
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(options) {
      switch (options.mode) {
        case _enzyme.EnzymeAdapter.MODES.MOUNT:
          return this.createMountRenderer(options);

        case _enzyme.EnzymeAdapter.MODES.SHALLOW:
          return this.createShallowRenderer(options);

        case _enzyme.EnzymeAdapter.MODES.STRING:
          return this.createStringRenderer(options);

        default:
          throw new Error("Enzyme Internal Error: Unrecognized mode: ".concat(options.mode));
      }
    }
  }, {
    key: "wrap",
    value: function wrap(element) {
      return (0, _enzymeAdapterUtils.wrap)(element);
    }
  }, {
    key: "nodeToElement",
    value: function nodeToElement(node) {
      if (!node || _typeof(node) !== 'object') return null;
      var type = node.type;
      return _react["default"].createElement(unmemoType(type), (0, _enzymeAdapterUtils.propsWithKeysAndRef)(node));
    }
  }, {
    key: "matchesElementType",
    value: function matchesElementType(node, matchingType) {
      if (!node) {
        return node;
      }

      var type = node.type;
      return unmemoType(type) === unmemoType(matchingType);
    }
  }, {
    key: "elementToNode",
    value: function elementToNode(element) {
      return elementToTree(element);
    }
  }, {
    key: "nodeToHostNode",
    value: function nodeToHostNode(node) {
      var supportsArray = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      var nodes = _nodeToHostNode(node);

      if (Array.isArray(nodes) && !supportsArray) {
        return nodes[0];
      }

      return nodes;
    }
  }, {
    key: "displayNameOfNode",
    value: function displayNameOfNode(node) {
      if (!node) return null;
      var type = node.type,
          $$typeof = node.$$typeof;
      var adapter = this;
      var nodeType = type || $$typeof;

      if (nodeType) {
        switch (nodeType) {
          case _reactIs.ConcurrentMode || NaN:
            return 'ConcurrentMode';

          case _reactIs.Fragment || NaN:
            return 'Fragment';

          case _reactIs.StrictMode || NaN:
            return 'StrictMode';

          case _reactIs.Profiler || NaN:
            return 'Profiler';

          case _reactIs.Portal || NaN:
            return 'Portal';

          case _reactIs.Suspense || NaN:
            return 'Suspense';

          default:
        }
      }

      var $$typeofType = type && type.$$typeof;

      switch ($$typeofType) {
        case _reactIs.ContextConsumer || NaN:
          return 'ContextConsumer';

        case _reactIs.ContextProvider || NaN:
          return 'ContextProvider';

        case _reactIs.Memo || NaN:
          {
            var nodeName = (0, _enzymeAdapterUtils.displayNameOfNode)(node);
            return typeof nodeName === 'string' ? nodeName : "Memo(".concat(adapter.displayNameOfNode(type), ")");
          }

        case _reactIs.ForwardRef || NaN:
          {
            if (type.displayName) {
              return type.displayName;
            }

            var name = adapter.displayNameOfNode({
              type: type.render
            });
            return name ? "ForwardRef(".concat(name, ")") : 'ForwardRef';
          }

        case _reactIs.Lazy || NaN:
          {
            return 'lazy';
          }

        default:
          return (0, _enzymeAdapterUtils.displayNameOfNode)(node);
      }
    }
  }, {
    key: "isValidElement",
    value: function isValidElement(element) {
      return (0, _reactIs.isElement)(element);
    }
  }, {
    key: "isValidElementType",
    value: function isValidElementType(object) {
      return !!object && (0, _reactIs.isValidElementType)(object);
    }
  }, {
    key: "isFragment",
    value: function isFragment(fragment) {
      return (0, _Utils.typeOfNode)(fragment) === _reactIs.Fragment;
    }
  }, {
    key: "isCustomComponent",
    value: function isCustomComponent(type) {
      var fakeElement = makeFakeElement(type);
      return !!type && (typeof type === 'function' || (0, _reactIs.isForwardRef)(fakeElement) || (0, _reactIs.isContextProvider)(fakeElement) || (0, _reactIs.isContextConsumer)(fakeElement) || (0, _reactIs.isSuspense)(fakeElement));
    }
  }, {
    key: "isContextConsumer",
    value: function isContextConsumer(type) {
      return !!type && (0, _reactIs.isContextConsumer)(makeFakeElement(type));
    }
  }, {
    key: "isCustomComponentElement",
    value: function isCustomComponentElement(inst) {
      if (!inst || !this.isValidElement(inst)) {
        return false;
      }

      return this.isCustomComponent(inst.type);
    }
  }, {
    key: "getProviderFromConsumer",
    value: function getProviderFromConsumer(Consumer) {
      if (Consumer) {
        var Provider;

        if (Consumer._context) {
          Provider = Consumer._context.Provider;
        } else if (Consumer.Provider) {
          Provider = Consumer.Provider;
        }

        if (Provider) {
          return Provider;
        }
      }

      throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');
    }
  }, {
    key: "createElement",
    value: function createElement() {
      return _react["default"].createElement.apply(_react["default"], arguments);
    }
  }, {
    key: "wrapWithWrappingComponent",
    value: function wrapWithWrappingComponent(node, options) {
      return {
        RootFinder: _enzymeAdapterUtils.RootFinder,
        node: (0, _enzymeAdapterUtils.wrapWithWrappingComponent)(_react["default"].createElement, node, options)
      };
    }
  }]);

  return ReactSeventeenAdapter;
}(_enzyme.EnzymeAdapter);

module.exports = ReactSeventeenAdapter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9SZWFjdFNldmVudGVlbkFkYXB0ZXIuanMiXSwibmFtZXMiOlsiRmliZXJUYWdzIiwiYXJyYXkiLCJub2RlIiwicmVzdWx0Iiwic3RhY2siLCJpIiwiYXJyIiwibiIsImVsIiwiQXJyYXkiLCJ0eXBlIiwiUG9ydGFsIiwiTWVtbyIsIkxhenkiLCJpc01lbW8iLCJzdXNwZW5zZUZhbGxiYWNrIiwiY2hpbGRyZW4iLCJmYWxsYmFjayIsInJlcGxhY2VMYXp5V2l0aEZhbGxiYWNrIiwiRmFrZVN1c3BlbnNlV3JhcHBlciIsIlJlYWN0IiwiY29udGFpbmVySW5mbyIsInByb3BzIiwibm9kZVR5cGUiLCJrZXkiLCJyZWYiLCJpbnN0YW5jZSIsInJlbmRlcmVkIiwiZWxlbWVudFRvVHJlZSIsInZub2RlIiwiY2hpbGRyZW5Ub1RyZWUiLCJyZW5kZXJlZE5vZGVzIiwiZmxhdHRlbiIsIm5vZGVBbmRTaWJsaW5nc0FycmF5IiwiU3VzcGVuc2UiLCJ0b1RyZWUiLCJtYXBwZXIiLCJpdGVtIiwiUmVhY3RET00iLCJpc0xhenkiLCJldmVudE9wdGlvbnMiLCJhbmltYXRpb24iLCJwb2ludGVyRXZlbnRzIiwiYXV4Q2xpY2siLCJFbXB0eVN0YXRlIiwidGVzdFJlbmRlcmVyIiwiU2hhbGxvd1JlbmRlcmVyIiwiVGVzdFV0aWxzIiwicmV0dXJuVmFsIiwiZm4iLCJQcm92aWRlciIsIiQkdHlwZW9mIiwiRWxlbWVudCIsIkNvbXBvbmVudCIsIlJlYWN0U2V2ZW50ZWVuQWRhcHRlciIsIkVuenltZUFkYXB0ZXIiLCJsaWZlY3ljbGVzIiwiZW5hYmxlQ29tcG9uZW50RGlkVXBkYXRlT25TZXRTdGF0ZSIsImxlZ2FjeUNvbnRleHRNb2RlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwib25TZXRTdGF0ZSIsImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyIsImhhc1Nob3VsZENvbXBvbmVudFVwZGF0ZUJ1ZyIsImdldFNuYXBzaG90QmVmb3JlVXBkYXRlIiwic2V0U3RhdGUiLCJza2lwc0NvbXBvbmVudERpZFVwZGF0ZU9uTnVsbGlzaCIsImdldENoaWxkQ29udGV4dCIsImNhbGxlZEJ5UmVuZGVyZXIiLCJnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IiLCJvcHRpb25zIiwiYXR0YWNoVG8iLCJoeWRyYXRlSW4iLCJ3cmFwcGluZ0NvbXBvbmVudFByb3BzIiwiZG9tTm9kZSIsImdsb2JhbCIsImFkYXB0ZXIiLCJyZW5kZXIiLCJ3cmFwQWN0Iiwid3JhcHBlclByb3BzIiwiY29udGV4dCIsInJlZlByb3AiLCJSZWFjdFdyYXBwZXJDb21wb25lbnQiLCJ3cmFwcGVkRWwiLCJjYWxsYmFjayIsInVubW91bnQiLCJnZXROb2RlIiwic2ltdWxhdGVFcnJvciIsImlzRXJyb3JCb3VuZGFyeSIsImVsSW5zdGFuY2UiLCJjYXRjaGluZ0luc3RhbmNlIiwiY2F0Y2hpbmdUeXBlIiwibm9kZUhpZXJhcmNoeSIsInNpbXVsYXRlRXZlbnQiLCJtYXBwZWRFdmVudCIsImV2ZW50Rm4iLCJiYXRjaGVkVXBkYXRlcyIsImdldFdyYXBwaW5nQ29tcG9uZW50UmVuZGVyZXIiLCJpbnN0IiwiZ2V0TW91bnRXcmFwcGVySW5zdGFuY2UiLCJ3cmFwSW52b2tlIiwicmVuZGVyZXIiLCJUeXBlRXJyb3IiLCJpc0RPTSIsImNhY2hlZE5vZGUiLCJsYXN0Q29tcG9uZW50Iiwid3JhcHBlZENvbXBvbmVudCIsInNlbnRpbmVsIiwid3JhcFB1cmVDb21wb25lbnQiLCJpc1N0YXRlZnVsIiwiY29tcGFyZSIsIm1lbW9pemVkIiwiYXJncyIsInNob3VsZFVwZGF0ZSIsInByZXZQcm9wcyIsImRpc3BsYXlOYW1lIiwid3JhcEZ1bmN0aW9uYWxDb21wb25lbnQiLCJyZW5kZXJFbGVtZW50IiwicmVzdCIsInJlbmRlcmVkRWwiLCJ0eXBlSXNFeGlzdGVkIiwiY2xvbmVkRWwiLCJjaGVja0lzU3VzcGVuc2VBbmRDbG9uZUVsZW1lbnQiLCJlbGVtZW50SXNDaGFuZ2VkIiwicHJvdmlkZXJWYWx1ZXMiLCJNb2NrUHJvdmlkZXIiLCJ2YWx1ZSIsImdldFByb3ZpZGVyRGVmYXVsdFZhbHVlIiwiTW9ja0NvbnN1bWVyIiwiSW5uZXJDb21wIiwiaXNDb21wb25lbnRTdGF0ZWZ1bCIsInJlc3RvcmUiLCJjbG9uZWRQcm9wcyIsIm9yaWdpbmFsTWV0aG9kIiwiZW1wdHlTdGF0ZVZhbHVlIiwiZ2V0RW1wdHlTdGF0ZVZhbHVlIiwiT2JqZWN0IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInNldCIsIndyaXRhYmxlIiwib3V0cHV0Iiwibm9kZVR5cGVGcm9tVHlwZSIsImhhbmRsZXIiLCJjaGVja1Byb3BUeXBlcyIsImhpZXJhcmNoeSIsImNoaWxkQ29udGV4dFR5cGVzIiwiQ29udGV4dFdyYXBwZXIiLCJSZWFjdERPTVNlcnZlciIsImVsZW1lbnQiLCJ1bm1lbW9UeXBlIiwibWF0Y2hpbmdUeXBlIiwic3VwcG9ydHNBcnJheSIsIm5vZGVzIiwibm9kZVRvSG9zdE5vZGUiLCJDb25jdXJyZW50TW9kZSIsIkZyYWdtZW50IiwiU3RyaWN0TW9kZSIsIlByb2ZpbGVyIiwiJCR0eXBlb2ZUeXBlIiwiQ29udGV4dENvbnN1bWVyIiwiQ29udGV4dFByb3ZpZGVyIiwibm9kZU5hbWUiLCJGb3J3YXJkUmVmIiwibmFtZSIsIm9iamVjdCIsImZyYWdtZW50IiwiZmFrZUVsZW1lbnQiLCJtYWtlRmFrZUVsZW1lbnQiLCJDb25zdW1lciIsIlJvb3RGaW5kZXIiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxJQUFBLE1BQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFNBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLE9BQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxRQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsNkJBQUEsQ0FBQSxDQUFBOztBQUNBLElB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a0IsTUFBQUEsQ0FBQUEsU0FBQUEsQ0FBQUEsQ0FBMUIsYUFBQSxFQUFBLElBQUEsRUFBQSxPQUFBO0FBRkQsT0FBUDtBQUlEOzs7O0VBcmlCaUNtQyxPQUFBQSxDQUFBQSxhOztBQXdpQnBDb0gsTUFBTSxDQUFOQSxPQUFBQSxHQUFBQSxxQkFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFJlYWN0RE9NU2VydmVyIGZyb20gJ3JlYWN0LWRvbS9zZXJ2ZXInO1xuaW1wb3J0IFNoYWxsb3dSZW5kZXJlciBmcm9tICdyZWFjdC10ZXN0LXJlbmRlcmVyL3NoYWxsb3cnO1xuaW1wb3J0IFRlc3RVdGlscyBmcm9tICdyZWFjdC1kb20vdGVzdC11dGlscyc7XG5pbXBvcnQgY2hlY2tQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcy9jaGVja1Byb3BUeXBlcyc7XG5pbXBvcnQgaGFzIGZyb20gJ2hhcyc7XG5pbXBvcnQge1xuICBDb25jdXJyZW50TW9kZSxcbiAgQ29udGV4dENvbnN1bWVyLFxuICBDb250ZXh0UHJvdmlkZXIsXG4gIEVsZW1lbnQsXG4gIEZvcndhcmRSZWYsXG4gIEZyYWdtZW50LFxuICBpc0NvbnRleHRDb25zdW1lcixcbiAgaXNDb250ZXh0UHJvdmlkZXIsXG4gIGlzRWxlbWVudCxcbiAgaXNGb3J3YXJkUmVmLFxuICBpc1BvcnRhbCxcbiAgaXNTdXNwZW5zZSxcbiAgaXNWYWxpZEVsZW1lbnRUeXBlLFxuICBMYXp5LFxuICBNZW1vLFxuICBQb3J0YWwsXG4gIFByb2ZpbGVyLFxuICBTdHJpY3RNb2RlLFxuICBTdXNwZW5zZSxcbn0gZnJvbSAncmVhY3QtaXMnO1xuaW1wb3J0IHsgRW56eW1lQWRhcHRlciB9IGZyb20gJ2VuenltZSc7XG5pbXBvcnQgeyB0eXBlT2ZOb2RlIH0gZnJvbSAnZW56eW1lL2J1aWxkL1V0aWxzJztcbmltcG9ydCBzaGFsbG93RXF1YWwgZnJvbSAnZW56eW1lLXNoYWxsb3ctZXF1YWwnO1xuaW1wb3J0IHtcbiAgZGlzcGxheU5hbWVPZk5vZGUsXG4gIGVsZW1lbnRUb1RyZWUgYXMgdXRpbEVsZW1lbnRUb1RyZWUsXG4gIG5vZGVUeXBlRnJvbVR5cGUgYXMgdXRpbE5vZGVUeXBlRnJvbVR5cGUsXG4gIG1hcE5hdGl2ZUV2ZW50TmFtZXMsXG4gIHByb3BGcm9tRXZlbnQsXG4gIGFzc2VydERvbUF2YWlsYWJsZSxcbiAgd2l0aFNldFN0YXRlQWxsb3dlZCxcbiAgY3JlYXRlUmVuZGVyV3JhcHBlcixcbiAgY3JlYXRlTW91bnRXcmFwcGVyLFxuICBwcm9wc1dpdGhLZXlzQW5kUmVmLFxuICBlbnN1cmVLZXlPclVuZGVmaW5lZCxcbiAgc2ltdWxhdGVFcnJvcixcbiAgd3JhcCxcbiAgZ2V0TWFza2VkQ29udGV4dCxcbiAgZ2V0Q29tcG9uZW50U3RhY2ssXG4gIFJvb3RGaW5kZXIsXG4gIGdldE5vZGVGcm9tUm9vdEZpbmRlcixcbiAgd3JhcFdpdGhXcmFwcGluZ0NvbXBvbmVudCxcbiAgZ2V0V3JhcHBpbmdDb21wb25lbnRNb3VudFJlbmRlcmVyLFxuICBjb21wYXJlTm9kZVR5cGVPZixcbiAgc3B5TWV0aG9kLFxufSBmcm9tICdAd29qdGVrbWFqL2VuenltZS1hZGFwdGVyLXV0aWxzJztcbmltcG9ydCBmaW5kQ3VycmVudEZpYmVyVXNpbmdTbG93UGF0aCBmcm9tICcuL2ZpbmRDdXJyZW50RmliZXJVc2luZ1Nsb3dQYXRoJztcbmltcG9ydCBkZXRlY3RGaWJlclRhZ3MgZnJvbSAnLi9kZXRlY3RGaWJlclRhZ3MnO1xuXG4vLyBMYXppbHkgcG9wdWxhdGVkIGlmIERPTSBpcyBhdmFpbGFibGUuXG5sZXQgRmliZXJUYWdzID0gbnVsbDtcblxuZnVuY3Rpb24gbm9kZUFuZFNpYmxpbmdzQXJyYXkobm9kZVdpdGhTaWJsaW5nKSB7XG4gIGNvbnN0IGFycmF5ID0gW107XG4gIGxldCBub2RlID0gbm9kZVdpdGhTaWJsaW5nO1xuICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgYXJyYXkucHVzaChub2RlKTtcbiAgICBub2RlID0gbm9kZS5zaWJsaW5nO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gZmxhdHRlbihhcnIpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGNvbnN0IHN0YWNrID0gW3sgaTogMCwgYXJyYXk6IGFyciB9XTtcbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIGNvbnN0IG4gPSBzdGFjay5wb3AoKTtcbiAgICB3aGlsZSAobi5pIDwgbi5hcnJheS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGVsID0gbi5hcnJheVtuLmldO1xuICAgICAgbi5pICs9IDE7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShlbCkpIHtcbiAgICAgICAgc3RhY2sucHVzaChuKTtcbiAgICAgICAgc3RhY2sucHVzaCh7IGk6IDAsIGFycmF5OiBlbCB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXN1bHQucHVzaChlbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG5vZGVUeXBlRnJvbVR5cGUodHlwZSkge1xuICBpZiAodHlwZSA9PT0gUG9ydGFsKSB7XG4gICAgcmV0dXJuICdwb3J0YWwnO1xuICB9XG5cbiAgcmV0dXJuIHV0aWxOb2RlVHlwZUZyb21UeXBlKHR5cGUpO1xufVxuXG5mdW5jdGlvbiBpc01lbW8odHlwZSkge1xuICByZXR1cm4gY29tcGFyZU5vZGVUeXBlT2YodHlwZSwgTWVtbyk7XG59XG5cbmZ1bmN0aW9uIGlzTGF6eSh0eXBlKSB7XG4gIHJldHVybiBjb21wYXJlTm9kZVR5cGVPZih0eXBlLCBMYXp5KTtcbn1cblxuZnVuY3Rpb24gdW5tZW1vVHlwZSh0eXBlKSB7XG4gIHJldHVybiBpc01lbW8odHlwZSkgPyB0eXBlLnR5cGUgOiB0eXBlO1xufVxuXG5mdW5jdGlvbiBjaGVja0lzU3VzcGVuc2VBbmRDbG9uZUVsZW1lbnQoZWwsIHsgc3VzcGVuc2VGYWxsYmFjayB9KSB7XG4gIGlmICghaXNTdXNwZW5zZShlbCkpIHtcbiAgICByZXR1cm4gZWw7XG4gIH1cblxuICBsZXQgeyBjaGlsZHJlbiB9ID0gZWwucHJvcHM7XG5cbiAgaWYgKHN1c3BlbnNlRmFsbGJhY2spIHtcbiAgICBjb25zdCB7IGZhbGxiYWNrIH0gPSBlbC5wcm9wcztcbiAgICBjaGlsZHJlbiA9IHJlcGxhY2VMYXp5V2l0aEZhbGxiYWNrKGNoaWxkcmVuLCBmYWxsYmFjayk7XG4gIH1cblxuICBjb25zdCBGYWtlU3VzcGVuc2VXcmFwcGVyID0gKHByb3BzKSA9PiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgIGVsLnR5cGUsXG4gICAgeyAuLi5lbC5wcm9wcywgLi4ucHJvcHMgfSxcbiAgICBjaGlsZHJlbixcbiAgKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmFrZVN1c3BlbnNlV3JhcHBlciwgbnVsbCwgY2hpbGRyZW4pO1xufVxuXG5mdW5jdGlvbiBlbGVtZW50VG9UcmVlKGVsKSB7XG4gIGlmICghaXNQb3J0YWwoZWwpKSB7XG4gICAgcmV0dXJuIHV0aWxFbGVtZW50VG9UcmVlKGVsLCBlbGVtZW50VG9UcmVlKTtcbiAgfVxuXG4gIGNvbnN0IHsgY2hpbGRyZW4sIGNvbnRhaW5lckluZm8gfSA9IGVsO1xuICBjb25zdCBwcm9wcyA9IHsgY2hpbGRyZW4sIGNvbnRhaW5lckluZm8gfTtcblxuICByZXR1cm4ge1xuICAgIG5vZGVUeXBlOiAncG9ydGFsJyxcbiAgICB0eXBlOiBQb3J0YWwsXG4gICAgcHJvcHMsXG4gICAga2V5OiBlbnN1cmVLZXlPclVuZGVmaW5lZChlbC5rZXkpLFxuICAgIHJlZjogZWwucmVmIHx8IG51bGwsXG4gICAgaW5zdGFuY2U6IG51bGwsXG4gICAgcmVuZGVyZWQ6IGVsZW1lbnRUb1RyZWUoZWwuY2hpbGRyZW4pLFxuICB9O1xufVxuXG5mdW5jdGlvbiB0b1RyZWUodm5vZGUpIHtcbiAgaWYgKHZub2RlID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyBUT0RPKGxtcik6IEknbSBub3QgcmVhbGx5IHN1cmUgSSB1bmRlcnN0YW5kIHdoZXRoZXIgb3Igbm90IHRoaXMgaXMgd2hhdFxuICAvLyBpIHNob3VsZCBiZSBkb2luZywgb3IgaWYgdGhpcyBpcyBhIGhhY2sgZm9yIHNvbWV0aGluZyBpJ20gZG9pbmcgd3JvbmdcbiAgLy8gc29tZXdoZXJlIGVsc2UuIFNob3VsZCB0YWxrIHRvIHNlYmFzdGlhbiBhYm91dCB0aGlzIHBlcmhhcHNcbiAgY29uc3Qgbm9kZSA9IGZpbmRDdXJyZW50RmliZXJVc2luZ1Nsb3dQYXRoKHZub2RlKTtcbiAgc3dpdGNoIChub2RlLnRhZykge1xuICAgIGNhc2UgRmliZXJUYWdzLkhvc3RSb290OlxuICAgICAgcmV0dXJuIGNoaWxkcmVuVG9UcmVlKG5vZGUuY2hpbGQpO1xuICAgIGNhc2UgRmliZXJUYWdzLkhvc3RQb3J0YWw6IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc3RhdGVOb2RlOiB7IGNvbnRhaW5lckluZm8gfSxcbiAgICAgICAgbWVtb2l6ZWRQcm9wczogY2hpbGRyZW4sXG4gICAgICB9ID0gbm9kZTtcbiAgICAgIGNvbnN0IHByb3BzID0geyBjb250YWluZXJJbmZvLCBjaGlsZHJlbiB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZVR5cGU6ICdwb3J0YWwnLFxuICAgICAgICB0eXBlOiBQb3J0YWwsXG4gICAgICAgIHByb3BzLFxuICAgICAgICBrZXk6IGVuc3VyZUtleU9yVW5kZWZpbmVkKG5vZGUua2V5KSxcbiAgICAgICAgcmVmOiBub2RlLnJlZixcbiAgICAgICAgaW5zdGFuY2U6IG51bGwsXG4gICAgICAgIHJlbmRlcmVkOiBjaGlsZHJlblRvVHJlZShub2RlLmNoaWxkKSxcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgRmliZXJUYWdzLkNsYXNzQ29tcG9uZW50OlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZVR5cGU6ICdjbGFzcycsXG4gICAgICAgIHR5cGU6IG5vZGUudHlwZSxcbiAgICAgICAgcHJvcHM6IHsgLi4ubm9kZS5tZW1vaXplZFByb3BzIH0sXG4gICAgICAgIGtleTogZW5zdXJlS2V5T3JVbmRlZmluZWQobm9kZS5rZXkpLFxuICAgICAgICByZWY6IG5vZGUucmVmLFxuICAgICAgICBpbnN0YW5jZTogbm9kZS5zdGF0ZU5vZGUsXG4gICAgICAgIHJlbmRlcmVkOiBjaGlsZHJlblRvVHJlZShub2RlLmNoaWxkKSxcbiAgICAgIH07XG4gICAgY2FzZSBGaWJlclRhZ3MuRnVuY3Rpb25hbENvbXBvbmVudDpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5vZGVUeXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICB0eXBlOiBub2RlLnR5cGUsXG4gICAgICAgIHByb3BzOiB7IC4uLm5vZGUubWVtb2l6ZWRQcm9wcyB9LFxuICAgICAgICBrZXk6IGVuc3VyZUtleU9yVW5kZWZpbmVkKG5vZGUua2V5KSxcbiAgICAgICAgcmVmOiBub2RlLnJlZixcbiAgICAgICAgaW5zdGFuY2U6IG51bGwsXG4gICAgICAgIHJlbmRlcmVkOiBjaGlsZHJlblRvVHJlZShub2RlLmNoaWxkKSxcbiAgICAgIH07XG4gICAgY2FzZSBGaWJlclRhZ3MuTWVtb0NsYXNzOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZVR5cGU6ICdjbGFzcycsXG4gICAgICAgIHR5cGU6IG5vZGUuZWxlbWVudFR5cGUudHlwZSxcbiAgICAgICAgcHJvcHM6IHsgLi4ubm9kZS5tZW1vaXplZFByb3BzIH0sXG4gICAgICAgIGtleTogZW5zdXJlS2V5T3JVbmRlZmluZWQobm9kZS5rZXkpLFxuICAgICAgICByZWY6IG5vZGUucmVmLFxuICAgICAgICBpbnN0YW5jZTogbm9kZS5zdGF0ZU5vZGUsXG4gICAgICAgIHJlbmRlcmVkOiBjaGlsZHJlblRvVHJlZShub2RlLmNoaWxkLmNoaWxkKSxcbiAgICAgIH07XG4gICAgY2FzZSBGaWJlclRhZ3MuTWVtb1NGQzoge1xuICAgICAgbGV0IHJlbmRlcmVkTm9kZXMgPSBmbGF0dGVuKG5vZGVBbmRTaWJsaW5nc0FycmF5KG5vZGUuY2hpbGQpLm1hcCh0b1RyZWUpKTtcbiAgICAgIGlmIChyZW5kZXJlZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW5kZXJlZE5vZGVzID0gW25vZGUubWVtb2l6ZWRQcm9wcy5jaGlsZHJlbl07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBub2RlVHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgdHlwZTogbm9kZS5lbGVtZW50VHlwZSxcbiAgICAgICAgcHJvcHM6IHsgLi4ubm9kZS5tZW1vaXplZFByb3BzIH0sXG4gICAgICAgIGtleTogZW5zdXJlS2V5T3JVbmRlZmluZWQobm9kZS5rZXkpLFxuICAgICAgICByZWY6IG5vZGUucmVmLFxuICAgICAgICBpbnN0YW5jZTogbnVsbCxcbiAgICAgICAgcmVuZGVyZWQ6IHJlbmRlcmVkTm9kZXMsXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIEZpYmVyVGFncy5Ib3N0Q29tcG9uZW50OiB7XG4gICAgICBsZXQgcmVuZGVyZWROb2RlcyA9IGZsYXR0ZW4obm9kZUFuZFNpYmxpbmdzQXJyYXkobm9kZS5jaGlsZCkubWFwKHRvVHJlZSkpO1xuICAgICAgaWYgKHJlbmRlcmVkTm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbmRlcmVkTm9kZXMgPSBbbm9kZS5tZW1vaXplZFByb3BzLmNoaWxkcmVuXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5vZGVUeXBlOiAnaG9zdCcsXG4gICAgICAgIHR5cGU6IG5vZGUudHlwZSxcbiAgICAgICAgcHJvcHM6IHsgLi4ubm9kZS5tZW1vaXplZFByb3BzIH0sXG4gICAgICAgIGtleTogZW5zdXJlS2V5T3JVbmRlZmluZWQobm9kZS5rZXkpLFxuICAgICAgICByZWY6IG5vZGUucmVmLFxuICAgICAgICBpbnN0YW5jZTogbm9kZS5zdGF0ZU5vZGUsXG4gICAgICAgIHJlbmRlcmVkOiByZW5kZXJlZE5vZGVzLFxuICAgICAgfTtcbiAgICB9XG4gICAgY2FzZSBGaWJlclRhZ3MuSG9zdFRleHQ6XG4gICAgICByZXR1cm4gbm9kZS5tZW1vaXplZFByb3BzO1xuICAgIGNhc2UgRmliZXJUYWdzLkZyYWdtZW50OlxuICAgIGNhc2UgRmliZXJUYWdzLk1vZGU6XG4gICAgY2FzZSBGaWJlclRhZ3MuQ29udGV4dFByb3ZpZGVyOlxuICAgIGNhc2UgRmliZXJUYWdzLkNvbnRleHRDb25zdW1lcjpcbiAgICAgIHJldHVybiBjaGlsZHJlblRvVHJlZShub2RlLmNoaWxkKTtcbiAgICBjYXNlIEZpYmVyVGFncy5Qcm9maWxlcjpcbiAgICBjYXNlIEZpYmVyVGFncy5Gb3J3YXJkUmVmOiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBub2RlVHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgdHlwZTogbm9kZS50eXBlLFxuICAgICAgICBwcm9wczogeyAuLi5ub2RlLnBlbmRpbmdQcm9wcyB9LFxuICAgICAgICBrZXk6IGVuc3VyZUtleU9yVW5kZWZpbmVkKG5vZGUua2V5KSxcbiAgICAgICAgcmVmOiBub2RlLnJlZixcbiAgICAgICAgaW5zdGFuY2U6IG51bGwsXG4gICAgICAgIHJlbmRlcmVkOiBjaGlsZHJlblRvVHJlZShub2RlLmNoaWxkKSxcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgRmliZXJUYWdzLlN1c3BlbnNlOiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBub2RlVHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgdHlwZTogU3VzcGVuc2UsXG4gICAgICAgIHByb3BzOiB7IC4uLm5vZGUubWVtb2l6ZWRQcm9wcyB9LFxuICAgICAgICBrZXk6IGVuc3VyZUtleU9yVW5kZWZpbmVkKG5vZGUua2V5KSxcbiAgICAgICAgcmVmOiBub2RlLnJlZixcbiAgICAgICAgaW5zdGFuY2U6IG51bGwsXG4gICAgICAgIHJlbmRlcmVkOiBjaGlsZHJlblRvVHJlZShub2RlLmNoaWxkKSxcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgRmliZXJUYWdzLkxhenk6XG4gICAgICByZXR1cm4gY2hpbGRyZW5Ub1RyZWUobm9kZS5jaGlsZCk7XG4gICAgY2FzZSBGaWJlclRhZ3MuT2Zmc2NyZWVuQ29tcG9uZW50OlxuICAgICAgcmV0dXJuIHRvVHJlZShub2RlLmNoaWxkKTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbnp5bWUgSW50ZXJuYWwgRXJyb3I6IHVua25vd24gbm9kZSB3aXRoIHRhZyAke25vZGUudGFnfWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNoaWxkcmVuVG9UcmVlKG5vZGUpIHtcbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgY2hpbGRyZW4gPSBub2RlQW5kU2libGluZ3NBcnJheShub2RlKTtcbiAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gdG9UcmVlKGNoaWxkcmVuWzBdKTtcbiAgfVxuICByZXR1cm4gZmxhdHRlbihjaGlsZHJlbi5tYXAodG9UcmVlKSk7XG59XG5cbmZ1bmN0aW9uIG5vZGVUb0hvc3ROb2RlKF9ub2RlKSB7XG4gIC8vIE5PVEUobG1yKTogbm9kZSBjb3VsZCBiZSBhIGZ1bmN0aW9uIGNvbXBvbmVudFxuICAvLyB3aGljaCB3b250IGhhdmUgYW4gaW5zdGFuY2UgcHJvcCwgYnV0IHdlIGNhbiBnZXQgdGhlXG4gIC8vIGhvc3Qgbm9kZSBhc3NvY2lhdGVkIHdpdGggaXRzIHJldHVybiB2YWx1ZSBhdCB0aGF0IHBvaW50LlxuICAvLyBBbHRob3VnaCB0aGlzIGJyZWFrcyBkb3duIGlmIHRoZSByZXR1cm4gdmFsdWUgaXMgYW4gYXJyYXksXG4gIC8vIGFzIGlzIHBvc3NpYmxlIHdpdGggUmVhY3QgMTYuXG4gIGxldCBub2RlID0gX25vZGU7XG4gIHdoaWxlIChub2RlICYmICFBcnJheS5pc0FycmF5KG5vZGUpICYmIG5vZGUuaW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICBub2RlID0gbm9kZS5yZW5kZXJlZDtcbiAgfVxuICAvLyBpZiB0aGUgU0ZDIHJldHVybmVkIG51bGwgZWZmZWN0aXZlbHksIHRoZXJlIGlzIG5vIGhvc3Qgbm9kZS5cbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBtYXBwZXIgPSAoaXRlbSkgPT4ge1xuICAgIGlmIChpdGVtICYmIGl0ZW0uaW5zdGFuY2UpIHJldHVybiBSZWFjdERPTS5maW5kRE9NTm9kZShpdGVtLmluc3RhbmNlKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZS5tYXAobWFwcGVyKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShub2RlLnJlbmRlcmVkKSAmJiBub2RlLm5vZGVUeXBlID09PSAnY2xhc3MnKSB7XG4gICAgcmV0dXJuIG5vZGUucmVuZGVyZWQubWFwKG1hcHBlcik7XG4gIH1cbiAgcmV0dXJuIG1hcHBlcihub2RlKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZUxhenlXaXRoRmFsbGJhY2sobm9kZSwgZmFsbGJhY2spIHtcbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZS5tYXAoKGVsKSA9PiByZXBsYWNlTGF6eVdpdGhGYWxsYmFjayhlbCwgZmFsbGJhY2spKTtcbiAgfVxuICBpZiAoaXNMYXp5KG5vZGUudHlwZSkpIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICAuLi5ub2RlLFxuICAgIHByb3BzOiB7XG4gICAgICAuLi5ub2RlLnByb3BzLFxuICAgICAgY2hpbGRyZW46IHJlcGxhY2VMYXp5V2l0aEZhbGxiYWNrKG5vZGUucHJvcHMuY2hpbGRyZW4sIGZhbGxiYWNrKSxcbiAgICB9LFxuICB9O1xufVxuXG5jb25zdCBldmVudE9wdGlvbnMgPSB7XG4gIGFuaW1hdGlvbjogdHJ1ZSxcbiAgcG9pbnRlckV2ZW50czogdHJ1ZSxcbiAgYXV4Q2xpY2s6IHRydWUsXG59O1xuXG5mdW5jdGlvbiBnZXRFbXB0eVN0YXRlVmFsdWUoKSB7XG4gIC8vIHRoaXMgaGFuZGxlcyBhIGJ1ZyBpbiBSZWFjdCAxNi4wIC0gMTYuMlxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2NvbW1pdC8zOWJlODM1NjVjNjVmOWM1MjIxNTBlNTIzNzUxNjc1NjhhMmExNDU5XG4gIC8vIGFsc28gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9wdWxsLzExOTY1XG5cbiAgY2xhc3MgRW1wdHlTdGF0ZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIGNvbnN0IHRlc3RSZW5kZXJlciA9IG5ldyBTaGFsbG93UmVuZGVyZXIoKTtcbiAgdGVzdFJlbmRlcmVyLnJlbmRlcihSZWFjdC5jcmVhdGVFbGVtZW50KEVtcHR5U3RhdGUpKTtcbiAgcmV0dXJuIHRlc3RSZW5kZXJlci5faW5zdGFuY2Uuc3RhdGU7XG59XG5cbmZ1bmN0aW9uIHdyYXBBY3QoZm4pIHtcbiAgbGV0IHJldHVyblZhbDtcbiAgVGVzdFV0aWxzLmFjdCgoKSA9PiB7IHJldHVyblZhbCA9IGZuKCk7IH0pO1xuICByZXR1cm4gcmV0dXJuVmFsO1xufVxuXG5mdW5jdGlvbiBnZXRQcm92aWRlckRlZmF1bHRWYWx1ZShQcm92aWRlcikge1xuICAvLyBSZWFjdCBzdG9yZXMgcmVmZXJlbmNlcyB0byB0aGUgUHJvdmlkZXIncyBkZWZhdWx0VmFsdWUgZGlmZmVyZW50bHkgYWNyb3NzIHZlcnNpb25zLlxuICBpZiAoJ19kZWZhdWx0VmFsdWUnIGluIFByb3ZpZGVyLl9jb250ZXh0KSB7XG4gICAgcmV0dXJuIFByb3ZpZGVyLl9jb250ZXh0Ll9kZWZhdWx0VmFsdWU7XG4gIH1cbiAgaWYgKCdfY3VycmVudFZhbHVlJyBpbiBQcm92aWRlci5fY29udGV4dCkge1xuICAgIHJldHVybiBQcm92aWRlci5fY29udGV4dC5fY3VycmVudFZhbHVlO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcignRW56eW1lIEludGVybmFsIEVycm9yOiBjYW7igJl0IGZpZ3VyZSBvdXQgaG93IHRvIGdldCBQcm92aWRlcuKAmXMgZGVmYXVsdCB2YWx1ZScpO1xufVxuXG5mdW5jdGlvbiBtYWtlRmFrZUVsZW1lbnQodHlwZSkge1xuICByZXR1cm4geyAkJHR5cGVvZjogRWxlbWVudCwgdHlwZSB9O1xufVxuXG5mdW5jdGlvbiBpc1N0YXRlZnVsKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50LnByb3RvdHlwZSAmJiAoXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50XG4gICAgfHwgQXJyYXkuaXNBcnJheShDb21wb25lbnQuX19yZWFjdEF1dG9CaW5kUGFpcnMpIC8vIGZhbGxiYWNrIGZvciBjcmVhdGVDbGFzcyBjb21wb25lbnRzXG4gICk7XG59XG5cbmNsYXNzIFJlYWN0U2V2ZW50ZWVuQWRhcHRlciBleHRlbmRzIEVuenltZUFkYXB0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IHsgbGlmZWN5Y2xlcyB9ID0gdGhpcy5vcHRpb25zO1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIGVuYWJsZUNvbXBvbmVudERpZFVwZGF0ZU9uU2V0U3RhdGU6IHRydWUsIC8vIFRPRE86IHJlbW92ZSwgc2VtdmVyLW1ham9yXG4gICAgICBsZWdhY3lDb250ZXh0TW9kZTogJ3BhcmVudCcsXG4gICAgICBsaWZlY3ljbGVzOiB7XG4gICAgICAgIC4uLmxpZmVjeWNsZXMsXG4gICAgICAgIGNvbXBvbmVudERpZFVwZGF0ZToge1xuICAgICAgICAgIG9uU2V0U3RhdGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczoge1xuICAgICAgICAgIGhhc1Nob3VsZENvbXBvbmVudFVwZGF0ZUJ1ZzogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGdldFNuYXBzaG90QmVmb3JlVXBkYXRlOiB0cnVlLFxuICAgICAgICBzZXRTdGF0ZToge1xuICAgICAgICAgIHNraXBzQ29tcG9uZW50RGlkVXBkYXRlT25OdWxsaXNoOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBnZXRDaGlsZENvbnRleHQ6IHtcbiAgICAgICAgICBjYWxsZWRCeVJlbmRlcmVyOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yOiB0cnVlLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY3JlYXRlTW91bnRSZW5kZXJlcihvcHRpb25zKSB7XG4gICAgYXNzZXJ0RG9tQXZhaWxhYmxlKCdtb3VudCcpO1xuICAgIGlmIChoYXMob3B0aW9ucywgJ3N1c3BlbnNlRmFsbGJhY2snKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYHN1c3BlbnNlRmFsbGJhY2tgIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBtb3VudGAgcmVuZGVyZXInKTtcbiAgICB9XG4gICAgaWYgKEZpYmVyVGFncyA9PT0gbnVsbCkge1xuICAgICAgLy8gUmVxdWlyZXMgRE9NLlxuICAgICAgRmliZXJUYWdzID0gZGV0ZWN0RmliZXJUYWdzKCk7XG4gICAgfVxuICAgIGNvbnN0IHsgYXR0YWNoVG8sIGh5ZHJhdGVJbiwgd3JhcHBpbmdDb21wb25lbnRQcm9wcyB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBkb21Ob2RlID0gaHlkcmF0ZUluIHx8IGF0dGFjaFRvIHx8IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZXQgaW5zdGFuY2UgPSBudWxsO1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICByZW5kZXIoZWwsIGNvbnRleHQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB3cmFwQWN0KCgpID0+IHtcbiAgICAgICAgICBpZiAoaW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZSwgcHJvcHMsIHJlZiB9ID0gZWw7XG4gICAgICAgICAgICBjb25zdCB3cmFwcGVyUHJvcHMgPSB7XG4gICAgICAgICAgICAgIENvbXBvbmVudDogdHlwZSxcbiAgICAgICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgICAgIHdyYXBwaW5nQ29tcG9uZW50UHJvcHMsXG4gICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgIC4uLihyZWYgJiYgeyByZWZQcm9wOiByZWYgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgUmVhY3RXcmFwcGVyQ29tcG9uZW50ID0gY3JlYXRlTW91bnRXcmFwcGVyKGVsLCB7IC4uLm9wdGlvbnMsIGFkYXB0ZXIgfSk7XG4gICAgICAgICAgICBjb25zdCB3cmFwcGVkRWwgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0V3JhcHBlckNvbXBvbmVudCwgd3JhcHBlclByb3BzKTtcbiAgICAgICAgICAgIGluc3RhbmNlID0gaHlkcmF0ZUluXG4gICAgICAgICAgICAgID8gUmVhY3RET00uaHlkcmF0ZSh3cmFwcGVkRWwsIGRvbU5vZGUpXG4gICAgICAgICAgICAgIDogUmVhY3RET00ucmVuZGVyKHdyYXBwZWRFbCwgZG9tTm9kZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnNldENoaWxkUHJvcHMoZWwucHJvcHMsIGNvbnRleHQsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVubW91bnQoKSB7XG4gICAgICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUoZG9tTm9kZSk7XG4gICAgICAgIGluc3RhbmNlID0gbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXROb2RlKCkge1xuICAgICAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdldE5vZGVGcm9tUm9vdEZpbmRlcihcbiAgICAgICAgICBhZGFwdGVyLmlzQ3VzdG9tQ29tcG9uZW50LFxuICAgICAgICAgIHRvVHJlZShpbnN0YW5jZS5fcmVhY3RJbnRlcm5hbHMpLFxuICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgc2ltdWxhdGVFcnJvcihub2RlSGllcmFyY2h5LCByb290Tm9kZSwgZXJyb3IpIHtcbiAgICAgICAgY29uc3QgaXNFcnJvckJvdW5kYXJ5ID0gKHsgaW5zdGFuY2U6IGVsSW5zdGFuY2UsIHR5cGUgfSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlICYmIHR5cGUuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGVsSW5zdGFuY2UgJiYgZWxJbnN0YW5jZS5jb21wb25lbnREaWRDYXRjaDtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgaW5zdGFuY2U6IGNhdGNoaW5nSW5zdGFuY2UsXG4gICAgICAgICAgdHlwZTogY2F0Y2hpbmdUeXBlLFxuICAgICAgICB9ID0gbm9kZUhpZXJhcmNoeS5maW5kKGlzRXJyb3JCb3VuZGFyeSkgfHwge307XG5cbiAgICAgICAgc2ltdWxhdGVFcnJvcihcbiAgICAgICAgICBlcnJvcixcbiAgICAgICAgICBjYXRjaGluZ0luc3RhbmNlLFxuICAgICAgICAgIHJvb3ROb2RlLFxuICAgICAgICAgIG5vZGVIaWVyYXJjaHksXG4gICAgICAgICAgbm9kZVR5cGVGcm9tVHlwZSxcbiAgICAgICAgICBhZGFwdGVyLmRpc3BsYXlOYW1lT2ZOb2RlLFxuICAgICAgICAgIGNhdGNoaW5nVHlwZSxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBzaW11bGF0ZUV2ZW50KG5vZGUsIGV2ZW50LCBtb2NrKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlZEV2ZW50ID0gbWFwTmF0aXZlRXZlbnROYW1lcyhldmVudCwgZXZlbnRPcHRpb25zKTtcbiAgICAgICAgY29uc3QgZXZlbnRGbiA9IFRlc3RVdGlscy5TaW11bGF0ZVttYXBwZWRFdmVudF07XG4gICAgICAgIGlmICghZXZlbnRGbikge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlYWN0V3JhcHBlcjo6c2ltdWxhdGUoKSBldmVudCAnJHtldmVudH0nIGRvZXMgbm90IGV4aXN0YCk7XG4gICAgICAgIH1cbiAgICAgICAgd3JhcEFjdCgoKSA9PiB7XG4gICAgICAgICAgZXZlbnRGbihhZGFwdGVyLm5vZGVUb0hvc3ROb2RlKG5vZGUpLCBtb2NrKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgYmF0Y2hlZFVwZGF0ZXMoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgIC8vIHJldHVybiBSZWFjdERPTS51bnN0YWJsZV9iYXRjaGVkVXBkYXRlcyhmbik7XG4gICAgICB9LFxuICAgICAgZ2V0V3JhcHBpbmdDb21wb25lbnRSZW5kZXJlcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi50aGlzLFxuICAgICAgICAgIC4uLmdldFdyYXBwaW5nQ29tcG9uZW50TW91bnRSZW5kZXJlcih7XG4gICAgICAgICAgICB0b1RyZWU6IChpbnN0KSA9PiB0b1RyZWUoaW5zdC5fcmVhY3RJbnRlcm5hbHMpLFxuICAgICAgICAgICAgZ2V0TW91bnRXcmFwcGVySW5zdGFuY2U6ICgpID0+IGluc3RhbmNlLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHdyYXBJbnZva2U6IHdyYXBBY3QsXG4gICAgfTtcbiAgfVxuXG4gIGNyZWF0ZVNoYWxsb3dSZW5kZXJlcihvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcztcbiAgICBjb25zdCByZW5kZXJlciA9IG5ldyBTaGFsbG93UmVuZGVyZXIoKTtcbiAgICBjb25zdCB7IHN1c3BlbnNlRmFsbGJhY2sgfSA9IG9wdGlvbnM7XG4gICAgaWYgKHR5cGVvZiBzdXNwZW5zZUZhbGxiYWNrICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygc3VzcGVuc2VGYWxsYmFjayAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ2BvcHRpb25zLnN1c3BlbnNlRmFsbGJhY2tgIHNob3VsZCBiZSBib29sZWFuIG9yIHVuZGVmaW5lZCcpO1xuICAgIH1cbiAgICBsZXQgaXNET00gPSBmYWxzZTtcbiAgICBsZXQgY2FjaGVkTm9kZSA9IG51bGw7XG5cbiAgICBsZXQgbGFzdENvbXBvbmVudCA9IG51bGw7XG4gICAgbGV0IHdyYXBwZWRDb21wb25lbnQgPSBudWxsO1xuICAgIGNvbnN0IHNlbnRpbmVsID0ge307XG5cbiAgICAvLyB3cmFwIG1lbW8gY29tcG9uZW50cyB3aXRoIGEgUHVyZUNvbXBvbmVudCwgb3IgYSBjbGFzcyBjb21wb25lbnQgd2l0aCBzQ1VcbiAgICBjb25zdCB3cmFwUHVyZUNvbXBvbmVudCA9IChDb21wb25lbnQsIGNvbXBhcmUpID0+IHtcbiAgICAgIGlmIChsYXN0Q29tcG9uZW50ICE9PSBDb21wb25lbnQpIHtcbiAgICAgICAgaWYgKGlzU3RhdGVmdWwoQ29tcG9uZW50KSkge1xuICAgICAgICAgIHdyYXBwZWRDb21wb25lbnQgPSBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7fTtcbiAgICAgICAgICBpZiAoY29tcGFyZSkge1xuICAgICAgICAgICAgd3JhcHBlZENvbXBvbmVudC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gKG5leHRQcm9wcykgPT4gKFxuICAgICAgICAgICAgICAhY29tcGFyZSh0aGlzLnByb3BzLCBuZXh0UHJvcHMpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3cmFwcGVkQ29tcG9uZW50LnByb3RvdHlwZS5pc1B1cmVSZWFjdENvbXBvbmVudCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBtZW1vaXplZCA9IHNlbnRpbmVsO1xuICAgICAgICAgIGxldCBwcmV2UHJvcHM7XG4gICAgICAgICAgd3JhcHBlZENvbXBvbmVudCA9IGZ1bmN0aW9uIHdyYXBwZWRDb21wb25lbnRGbihwcm9wcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkVXBkYXRlID0gbWVtb2l6ZWQgPT09IHNlbnRpbmVsIHx8IChjb21wYXJlXG4gICAgICAgICAgICAgID8gIWNvbXBhcmUocHJldlByb3BzLCBwcm9wcylcbiAgICAgICAgICAgICAgOiAhc2hhbGxvd0VxdWFsKHByZXZQcm9wcywgcHJvcHMpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgICAgICBtZW1vaXplZCA9IENvbXBvbmVudCh7IC4uLkNvbXBvbmVudC5kZWZhdWx0UHJvcHMsIC4uLnByb3BzIH0sIC4uLmFyZ3MpO1xuICAgICAgICAgICAgICBwcmV2UHJvcHMgPSBwcm9wcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZW1vaXplZDtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgd3JhcHBlZENvbXBvbmVudCxcbiAgICAgICAgICBDb21wb25lbnQsXG4gICAgICAgICAgeyBkaXNwbGF5TmFtZTogYWRhcHRlci5kaXNwbGF5TmFtZU9mTm9kZSh7IHR5cGU6IENvbXBvbmVudCB9KSB9LFxuICAgICAgICApO1xuICAgICAgICBsYXN0Q29tcG9uZW50ID0gQ29tcG9uZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBwZWRDb21wb25lbnQ7XG4gICAgfTtcblxuICAgIC8vIFdyYXAgZnVuY3Rpb25hbCBjb21wb25lbnRzIG9uIHZlcnNpb25zIHByaW9yIHRvIDE2LjUsXG4gICAgLy8gdG8gYXZvaWQgaW5hZHZlcnRlbnRseSBwYXNzIGEgYHRoaXNgIGluc3RhbmNlIHRvIGl0LlxuICAgIGNvbnN0IHdyYXBGdW5jdGlvbmFsQ29tcG9uZW50ID0gKENvbXBvbmVudCkgPT4ge1xuICAgICAgaWYgKGhhcyhDb21wb25lbnQsICdkZWZhdWx0UHJvcHMnKSkge1xuICAgICAgICBpZiAobGFzdENvbXBvbmVudCAhPT0gQ29tcG9uZW50KSB7XG4gICAgICAgICAgd3JhcHBlZENvbXBvbmVudCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcFxuICAgICAgICAgICAgKHByb3BzLCAuLi5hcmdzKSA9PiBDb21wb25lbnQoeyAuLi5Db21wb25lbnQuZGVmYXVsdFByb3BzLCAuLi5wcm9wcyB9LCAuLi5hcmdzKSxcbiAgICAgICAgICAgIENvbXBvbmVudCxcbiAgICAgICAgICAgIHsgZGlzcGxheU5hbWU6IGFkYXB0ZXIuZGlzcGxheU5hbWVPZk5vZGUoeyB0eXBlOiBDb21wb25lbnQgfSkgfSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGxhc3RDb21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZWRDb21wb25lbnQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb21wb25lbnQ7XG4gICAgfTtcblxuICAgIGNvbnN0IHJlbmRlckVsZW1lbnQgPSAoZWxDb25maWcsIC4uLnJlc3QpID0+IHtcbiAgICAgIGNvbnN0IHJlbmRlcmVkRWwgPSByZW5kZXJlci5yZW5kZXIoZWxDb25maWcsIC4uLnJlc3QpO1xuXG4gICAgICBjb25zdCB0eXBlSXNFeGlzdGVkID0gISEocmVuZGVyZWRFbCAmJiByZW5kZXJlZEVsLnR5cGUpO1xuICAgICAgaWYgKHR5cGVJc0V4aXN0ZWQpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkRWwgPSBjaGVja0lzU3VzcGVuc2VBbmRDbG9uZUVsZW1lbnQocmVuZGVyZWRFbCwgeyBzdXNwZW5zZUZhbGxiYWNrIH0pO1xuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRJc0NoYW5nZWQgPSBjbG9uZWRFbC50eXBlICE9PSByZW5kZXJlZEVsLnR5cGU7XG4gICAgICAgIGlmIChlbGVtZW50SXNDaGFuZ2VkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlcmVyLnJlbmRlcih7IC4uLmVsQ29uZmlnLCB0eXBlOiBjbG9uZWRFbC50eXBlIH0sIC4uLnJlc3QpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZW5kZXJlZEVsO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgICByZW5kZXIoZWwsIHVubWFza2VkQ29udGV4dCwge1xuICAgICAgICBwcm92aWRlclZhbHVlcyA9IG5ldyBNYXAoKSxcbiAgICAgIH0gPSB7fSkge1xuICAgICAgICBjYWNoZWROb2RlID0gZWw7XG4gICAgICAgIGlmICh0eXBlb2YgZWwudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpc0RPTSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNDb250ZXh0UHJvdmlkZXIoZWwpKSB7XG4gICAgICAgICAgcHJvdmlkZXJWYWx1ZXMuc2V0KGVsLnR5cGUsIGVsLnByb3BzLnZhbHVlKTtcbiAgICAgICAgICBjb25zdCBNb2NrUHJvdmlkZXIgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgKHByb3BzKSA9PiBwcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICAgIGVsLnR5cGUsXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gd2l0aFNldFN0YXRlQWxsb3dlZCgoKSA9PiByZW5kZXJFbGVtZW50KHsgLi4uZWwsIHR5cGU6IE1vY2tQcm92aWRlciB9KSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNDb250ZXh0Q29uc3VtZXIoZWwpKSB7XG4gICAgICAgICAgY29uc3QgUHJvdmlkZXIgPSBhZGFwdGVyLmdldFByb3ZpZGVyRnJvbUNvbnN1bWVyKGVsLnR5cGUpO1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvdmlkZXJWYWx1ZXMuaGFzKFByb3ZpZGVyKVxuICAgICAgICAgICAgPyBwcm92aWRlclZhbHVlcy5nZXQoUHJvdmlkZXIpXG4gICAgICAgICAgICA6IGdldFByb3ZpZGVyRGVmYXVsdFZhbHVlKFByb3ZpZGVyKTtcbiAgICAgICAgICBjb25zdCBNb2NrQ29uc3VtZXIgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgKHByb3BzKSA9PiBwcm9wcy5jaGlsZHJlbih2YWx1ZSksXG4gICAgICAgICAgICBlbC50eXBlLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIHdpdGhTZXRTdGF0ZUFsbG93ZWQoKCkgPT4gcmVuZGVyRWxlbWVudCh7IC4uLmVsLCB0eXBlOiBNb2NrQ29uc3VtZXIgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlzRE9NID0gZmFsc2U7XG4gICAgICAgICAgbGV0IHJlbmRlcmVkRWwgPSBlbDtcbiAgICAgICAgICBpZiAoaXNMYXp5KHJlbmRlcmVkRWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ2BSZWFjdC5sYXp5YCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHNoYWxsb3cgcmVuZGVyaW5nLicpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlbmRlcmVkRWwgPSBjaGVja0lzU3VzcGVuc2VBbmRDbG9uZUVsZW1lbnQocmVuZGVyZWRFbCwgeyBzdXNwZW5zZUZhbGxiYWNrIH0pO1xuICAgICAgICAgIGNvbnN0IHsgdHlwZTogQ29tcG9uZW50IH0gPSByZW5kZXJlZEVsO1xuXG4gICAgICAgICAgY29uc3QgY29udGV4dCA9IGdldE1hc2tlZENvbnRleHQoQ29tcG9uZW50LmNvbnRleHRUeXBlcywgdW5tYXNrZWRDb250ZXh0KTtcblxuICAgICAgICAgIGlmIChpc01lbW8oZWwudHlwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZTogSW5uZXJDb21wLCBjb21wYXJlIH0gPSBlbC50eXBlO1xuXG4gICAgICAgICAgICByZXR1cm4gd2l0aFNldFN0YXRlQWxsb3dlZCgoKSA9PiByZW5kZXJFbGVtZW50KFxuICAgICAgICAgICAgICB7IC4uLmVsLCB0eXBlOiB3cmFwUHVyZUNvbXBvbmVudChJbm5lckNvbXAsIGNvbXBhcmUpIH0sXG4gICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICApKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBpc0NvbXBvbmVudFN0YXRlZnVsID0gaXNTdGF0ZWZ1bChDb21wb25lbnQpO1xuXG4gICAgICAgICAgaWYgKCFpc0NvbXBvbmVudFN0YXRlZnVsICYmIHR5cGVvZiBDb21wb25lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoU2V0U3RhdGVBbGxvd2VkKCgpID0+IHJlbmRlckVsZW1lbnQoXG4gICAgICAgICAgICAgIHsgLi4ucmVuZGVyZWRFbCwgdHlwZTogd3JhcEZ1bmN0aW9uYWxDb21wb25lbnQoQ29tcG9uZW50KSB9LFxuICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzQ29tcG9uZW50U3RhdGVmdWwpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgcmVuZGVyZXIuX2luc3RhbmNlXG4gICAgICAgICAgICAgICYmIGVsLnByb3BzID09PSByZW5kZXJlci5faW5zdGFuY2UucHJvcHNcbiAgICAgICAgICAgICAgJiYgIXNoYWxsb3dFcXVhbChjb250ZXh0LCByZW5kZXJlci5faW5zdGFuY2UuY29udGV4dClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCB7IHJlc3RvcmUgfSA9IHNweU1ldGhvZChcbiAgICAgICAgICAgICAgICByZW5kZXJlcixcbiAgICAgICAgICAgICAgICAnX3VwZGF0ZUNsYXNzQ29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICAob3JpZ2luYWxNZXRob2QpID0+IGZ1bmN0aW9uIF91cGRhdGVDbGFzc0NvbXBvbmVudCguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BzIH0gPSByZW5kZXJlci5faW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjbG9uZWRQcm9wcyA9IHsgLi4ucHJvcHMgfTtcbiAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLl9pbnN0YW5jZS5wcm9wcyA9IGNsb25lZFByb3BzO1xuXG4gICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcmlnaW5hbE1ldGhvZC5hcHBseShyZW5kZXJlciwgYXJncyk7XG5cbiAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLl9pbnN0YW5jZS5wcm9wcyA9IHByb3BzO1xuICAgICAgICAgICAgICAgICAgcmVzdG9yZSgpO1xuXG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGZpeCByZWFjdCBidWc7IHNlZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0RW1wdHlTdGF0ZVZhbHVlYFxuICAgICAgICAgICAgY29uc3QgZW1wdHlTdGF0ZVZhbHVlID0gZ2V0RW1wdHlTdGF0ZVZhbHVlKCk7XG4gICAgICAgICAgICBpZiAoZW1wdHlTdGF0ZVZhbHVlKSB7XG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQucHJvdG90eXBlLCAnc3RhdGUnLCB7XG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gZW1wdHlTdGF0ZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnc3RhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB3aXRoU2V0U3RhdGVBbGxvd2VkKCgpID0+IHJlbmRlckVsZW1lbnQocmVuZGVyZWRFbCwgY29udGV4dCkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdW5tb3VudCgpIHtcbiAgICAgICAgcmVuZGVyZXIudW5tb3VudCgpO1xuICAgICAgfSxcbiAgICAgIGdldE5vZGUoKSB7XG4gICAgICAgIGlmIChpc0RPTSkge1xuICAgICAgICAgIHJldHVybiBlbGVtZW50VG9UcmVlKGNhY2hlZE5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHJlbmRlcmVyLmdldFJlbmRlck91dHB1dCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5vZGVUeXBlOiBub2RlVHlwZUZyb21UeXBlKGNhY2hlZE5vZGUudHlwZSksXG4gICAgICAgICAgdHlwZTogY2FjaGVkTm9kZS50eXBlLFxuICAgICAgICAgIHByb3BzOiBjYWNoZWROb2RlLnByb3BzLFxuICAgICAgICAgIGtleTogZW5zdXJlS2V5T3JVbmRlZmluZWQoY2FjaGVkTm9kZS5rZXkpLFxuICAgICAgICAgIHJlZjogY2FjaGVkTm9kZS5yZWYsXG4gICAgICAgICAgaW5zdGFuY2U6IHJlbmRlcmVyLl9pbnN0YW5jZSxcbiAgICAgICAgICByZW5kZXJlZDogQXJyYXkuaXNBcnJheShvdXRwdXQpXG4gICAgICAgICAgICA/IGZsYXR0ZW4ob3V0cHV0KS5tYXAoKGVsKSA9PiBlbGVtZW50VG9UcmVlKGVsKSlcbiAgICAgICAgICAgIDogZWxlbWVudFRvVHJlZShvdXRwdXQpLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHNpbXVsYXRlRXJyb3Iobm9kZUhpZXJhcmNoeSwgcm9vdE5vZGUsIGVycm9yKSB7XG4gICAgICAgIHNpbXVsYXRlRXJyb3IoXG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgcmVuZGVyZXIuX2luc3RhbmNlLFxuICAgICAgICAgIGNhY2hlZE5vZGUsXG4gICAgICAgICAgbm9kZUhpZXJhcmNoeS5jb25jYXQoY2FjaGVkTm9kZSksXG4gICAgICAgICAgbm9kZVR5cGVGcm9tVHlwZSxcbiAgICAgICAgICBhZGFwdGVyLmRpc3BsYXlOYW1lT2ZOb2RlLFxuICAgICAgICAgIGNhY2hlZE5vZGUudHlwZSxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBzaW11bGF0ZUV2ZW50KG5vZGUsIGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSBub2RlLnByb3BzW3Byb3BGcm9tRXZlbnQoZXZlbnQsIGV2ZW50T3B0aW9ucyldO1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIHdpdGhTZXRTdGF0ZUFsbG93ZWQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhsbXIpOiBjcmVhdGUvdXNlIHN5bnRoZXRpYyBldmVudHNcbiAgICAgICAgICAgIC8vIFRPRE8obG1yKTogZW11bGF0ZSBSZWFjdCdzIGV2ZW50IHByb3BhZ2F0aW9uXG4gICAgICAgICAgICAvLyBSZWFjdERPTS51bnN0YWJsZV9iYXRjaGVkVXBkYXRlcygoKSA9PiB7XG4gICAgICAgICAgICBoYW5kbGVyKC4uLmFyZ3MpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBiYXRjaGVkVXBkYXRlcyhmbikge1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgLy8gcmV0dXJuIFJlYWN0RE9NLnVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzKGZuKTtcbiAgICAgIH0sXG4gICAgICBjaGVja1Byb3BUeXBlcyh0eXBlU3BlY3MsIHZhbHVlcywgbG9jYXRpb24sIGhpZXJhcmNoeSkge1xuICAgICAgICByZXR1cm4gY2hlY2tQcm9wVHlwZXMoXG4gICAgICAgICAgdHlwZVNwZWNzLFxuICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICBkaXNwbGF5TmFtZU9mTm9kZShjYWNoZWROb2RlKSxcbiAgICAgICAgICAoKSA9PiBnZXRDb21wb25lbnRTdGFjayhoaWVyYXJjaHkuY29uY2F0KFtjYWNoZWROb2RlXSkpLFxuICAgICAgICApO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY3JlYXRlU3RyaW5nUmVuZGVyZXIob3B0aW9ucykge1xuICAgIGlmIChoYXMob3B0aW9ucywgJ3N1c3BlbnNlRmFsbGJhY2snKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYHN1c3BlbnNlRmFsbGJhY2tgIHNob3VsZCBub3QgYmUgc3BlY2lmaWVkIGluIG9wdGlvbnMgb2Ygc3RyaW5nIHJlbmRlcmVyJyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICByZW5kZXIoZWwsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGV4dCAmJiAoZWwudHlwZS5jb250ZXh0VHlwZXMgfHwgb3B0aW9ucy5jaGlsZENvbnRleHRUeXBlcykpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgICAgICAgICAgIC4uLihlbC50eXBlLmNvbnRleHRUeXBlcyB8fCB7fSksXG4gICAgICAgICAgICAuLi5vcHRpb25zLmNoaWxkQ29udGV4dFR5cGVzLFxuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3QgQ29udGV4dFdyYXBwZXIgPSBjcmVhdGVSZW5kZXJXcmFwcGVyKGVsLCBjb250ZXh0LCBjaGlsZENvbnRleHRUeXBlcyk7XG4gICAgICAgICAgcmV0dXJuIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udGV4dFdyYXBwZXIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXAoZWwpO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gUHJvdmlkZWQgYSBiYWcgb2Ygb3B0aW9ucywgcmV0dXJuIGFuIGBFbnp5bWVSZW5kZXJlcmAuIFNvbWUgb3B0aW9ucyBjYW4gYmUgaW1wbGVtZW50YXRpb25cbiAgLy8gc3BlY2lmaWMsIGxpa2UgYGF0dGFjaGAgZXRjLiBmb3IgUmVhY3QsIGJ1dCBub3QgcGFydCBvZiB0aGlzIGludGVyZmFjZSBleHBsaWNpdGx5LlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBjcmVhdGVSZW5kZXJlcihvcHRpb25zKSB7XG4gICAgc3dpdGNoIChvcHRpb25zLm1vZGUpIHtcbiAgICAgIGNhc2UgRW56eW1lQWRhcHRlci5NT0RFUy5NT1VOVDogcmV0dXJuIHRoaXMuY3JlYXRlTW91bnRSZW5kZXJlcihvcHRpb25zKTtcbiAgICAgIGNhc2UgRW56eW1lQWRhcHRlci5NT0RFUy5TSEFMTE9XOiByZXR1cm4gdGhpcy5jcmVhdGVTaGFsbG93UmVuZGVyZXIob3B0aW9ucyk7XG4gICAgICBjYXNlIEVuenltZUFkYXB0ZXIuTU9ERVMuU1RSSU5HOiByZXR1cm4gdGhpcy5jcmVhdGVTdHJpbmdSZW5kZXJlcihvcHRpb25zKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRW56eW1lIEludGVybmFsIEVycm9yOiBVbnJlY29nbml6ZWQgbW9kZTogJHtvcHRpb25zLm1vZGV9YCk7XG4gICAgfVxuICB9XG5cbiAgd3JhcChlbGVtZW50KSB7XG4gICAgcmV0dXJuIHdyYXAoZWxlbWVudCk7XG4gIH1cblxuICAvLyBjb252ZXJ0cyBhbiBSU1ROb2RlIHRvIHRoZSBjb3JyZXNwb25kaW5nIEpTWCBQcmFnbWEgRWxlbWVudC4gVGhpcyB3aWxsIGJlIG5lZWRlZFxuICAvLyBpbiBvcmRlciB0byBpbXBsZW1lbnQgdGhlIGBXcmFwcGVyLm1vdW50KClgIGFuZCBgV3JhcHBlci5zaGFsbG93KClgIG1ldGhvZHMsIGJ1dCBzaG91bGRcbiAgLy8gYmUgcHJldHR5IHN0cmFpZ2h0Zm9yd2FyZCBmb3IgcGVvcGxlIHRvIGltcGxlbWVudC5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgbm9kZVRvRWxlbWVudChub2RlKSB7XG4gICAgaWYgKCFub2RlIHx8IHR5cGVvZiBub2RlICE9PSAnb2JqZWN0JykgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgeyB0eXBlIH0gPSBub2RlO1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KHVubWVtb1R5cGUodHlwZSksIHByb3BzV2l0aEtleXNBbmRSZWYobm9kZSkpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgbWF0Y2hlc0VsZW1lbnRUeXBlKG5vZGUsIG1hdGNoaW5nVHlwZSkge1xuICAgIGlmICghbm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIGNvbnN0IHsgdHlwZSB9ID0gbm9kZTtcbiAgICByZXR1cm4gdW5tZW1vVHlwZSh0eXBlKSA9PT0gdW5tZW1vVHlwZShtYXRjaGluZ1R5cGUpO1xuICB9XG5cbiAgZWxlbWVudFRvTm9kZShlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnRUb1RyZWUoZWxlbWVudCk7XG4gIH1cblxuICBub2RlVG9Ib3N0Tm9kZShub2RlLCBzdXBwb3J0c0FycmF5ID0gZmFsc2UpIHtcbiAgICBjb25zdCBub2RlcyA9IG5vZGVUb0hvc3ROb2RlKG5vZGUpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGVzKSAmJiAhc3VwcG9ydHNBcnJheSkge1xuICAgICAgcmV0dXJuIG5vZGVzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZXM7XG4gIH1cblxuICBkaXNwbGF5TmFtZU9mTm9kZShub2RlKSB7XG4gICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCB7IHR5cGUsICQkdHlwZW9mIH0gPSBub2RlO1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzO1xuXG4gICAgY29uc3Qgbm9kZVR5cGUgPSB0eXBlIHx8ICQkdHlwZW9mO1xuXG4gICAgLy8gbmV3ZXIgbm9kZSB0eXBlcyBtYXkgYmUgdW5kZWZpbmVkLCBzbyBvbmx5IHRlc3QgaWYgdGhlIG5vZGVUeXBlIGV4aXN0c1xuICAgIGlmIChub2RlVHlwZSkge1xuICAgICAgc3dpdGNoIChub2RlVHlwZSkge1xuICAgICAgICBjYXNlIENvbmN1cnJlbnRNb2RlIHx8IE5hTjogcmV0dXJuICdDb25jdXJyZW50TW9kZSc7XG4gICAgICAgIGNhc2UgRnJhZ21lbnQgfHwgTmFOOiByZXR1cm4gJ0ZyYWdtZW50JztcbiAgICAgICAgY2FzZSBTdHJpY3RNb2RlIHx8IE5hTjogcmV0dXJuICdTdHJpY3RNb2RlJztcbiAgICAgICAgY2FzZSBQcm9maWxlciB8fCBOYU46IHJldHVybiAnUHJvZmlsZXInO1xuICAgICAgICBjYXNlIFBvcnRhbCB8fCBOYU46IHJldHVybiAnUG9ydGFsJztcbiAgICAgICAgY2FzZSBTdXNwZW5zZSB8fCBOYU46IHJldHVybiAnU3VzcGVuc2UnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0ICQkdHlwZW9mVHlwZSA9IHR5cGUgJiYgdHlwZS4kJHR5cGVvZjtcblxuICAgIHN3aXRjaCAoJCR0eXBlb2ZUeXBlKSB7XG4gICAgICBjYXNlIENvbnRleHRDb25zdW1lciB8fCBOYU46IHJldHVybiAnQ29udGV4dENvbnN1bWVyJztcbiAgICAgIGNhc2UgQ29udGV4dFByb3ZpZGVyIHx8IE5hTjogcmV0dXJuICdDb250ZXh0UHJvdmlkZXInO1xuICAgICAgY2FzZSBNZW1vIHx8IE5hTjoge1xuICAgICAgICBjb25zdCBub2RlTmFtZSA9IGRpc3BsYXlOYW1lT2ZOb2RlKG5vZGUpO1xuICAgICAgICByZXR1cm4gdHlwZW9mIG5vZGVOYW1lID09PSAnc3RyaW5nJyA/IG5vZGVOYW1lIDogYE1lbW8oJHthZGFwdGVyLmRpc3BsYXlOYW1lT2ZOb2RlKHR5cGUpfSlgO1xuICAgICAgfVxuICAgICAgY2FzZSBGb3J3YXJkUmVmIHx8IE5hTjoge1xuICAgICAgICBpZiAodHlwZS5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIHJldHVybiB0eXBlLmRpc3BsYXlOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWUgPSBhZGFwdGVyLmRpc3BsYXlOYW1lT2ZOb2RlKHsgdHlwZTogdHlwZS5yZW5kZXIgfSk7XG4gICAgICAgIHJldHVybiBuYW1lID8gYEZvcndhcmRSZWYoJHtuYW1lfSlgIDogJ0ZvcndhcmRSZWYnO1xuICAgICAgfVxuICAgICAgY2FzZSBMYXp5IHx8IE5hTjoge1xuICAgICAgICByZXR1cm4gJ2xhenknO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDogcmV0dXJuIGRpc3BsYXlOYW1lT2ZOb2RlKG5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGlzVmFsaWRFbGVtZW50KGVsZW1lbnQpIHtcbiAgICByZXR1cm4gaXNFbGVtZW50KGVsZW1lbnQpO1xuICB9XG5cbiAgaXNWYWxpZEVsZW1lbnRUeXBlKG9iamVjdCkge1xuICAgIHJldHVybiAhIW9iamVjdCAmJiBpc1ZhbGlkRWxlbWVudFR5cGUob2JqZWN0KTtcbiAgfVxuXG4gIGlzRnJhZ21lbnQoZnJhZ21lbnQpIHtcbiAgICByZXR1cm4gdHlwZU9mTm9kZShmcmFnbWVudCkgPT09IEZyYWdtZW50O1xuICB9XG5cbiAgaXNDdXN0b21Db21wb25lbnQodHlwZSkge1xuICAgIGNvbnN0IGZha2VFbGVtZW50ID0gbWFrZUZha2VFbGVtZW50KHR5cGUpO1xuICAgIHJldHVybiAhIXR5cGUgJiYgKFxuICAgICAgdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbidcbiAgICAgIHx8IGlzRm9yd2FyZFJlZihmYWtlRWxlbWVudClcbiAgICAgIHx8IGlzQ29udGV4dFByb3ZpZGVyKGZha2VFbGVtZW50KVxuICAgICAgfHwgaXNDb250ZXh0Q29uc3VtZXIoZmFrZUVsZW1lbnQpXG4gICAgICB8fCBpc1N1c3BlbnNlKGZha2VFbGVtZW50KVxuICAgICk7XG4gIH1cblxuICBpc0NvbnRleHRDb25zdW1lcih0eXBlKSB7XG4gICAgcmV0dXJuICEhdHlwZSAmJiBpc0NvbnRleHRDb25zdW1lcihtYWtlRmFrZUVsZW1lbnQodHlwZSkpO1xuICB9XG5cbiAgaXNDdXN0b21Db21wb25lbnRFbGVtZW50KGluc3QpIHtcbiAgICBpZiAoIWluc3QgfHwgIXRoaXMuaXNWYWxpZEVsZW1lbnQoaW5zdCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaXNDdXN0b21Db21wb25lbnQoaW5zdC50eXBlKTtcbiAgfVxuXG4gIGdldFByb3ZpZGVyRnJvbUNvbnN1bWVyKENvbnN1bWVyKSB7XG4gICAgLy8gUmVhY3Qgc3RvcmVzIHJlZmVyZW5jZXMgdG8gdGhlIFByb3ZpZGVyIG9uIGEgQ29uc3VtZXIgZGlmZmVyZW50bHkgYWNyb3NzIHZlcnNpb25zLlxuICAgIGlmIChDb25zdW1lcikge1xuICAgICAgbGV0IFByb3ZpZGVyO1xuICAgICAgaWYgKENvbnN1bWVyLl9jb250ZXh0KSB7IC8vIGNoZWNrIHRoaXMgZmlyc3QsIHRvIGF2b2lkIGEgZGVwcmVjYXRpb24gd2FybmluZ1xuICAgICAgICAoeyBQcm92aWRlciB9ID0gQ29uc3VtZXIuX2NvbnRleHQpO1xuICAgICAgfSBlbHNlIGlmIChDb25zdW1lci5Qcm92aWRlcikge1xuICAgICAgICAoeyBQcm92aWRlciB9ID0gQ29uc3VtZXIpO1xuICAgICAgfVxuICAgICAgaWYgKFByb3ZpZGVyKSB7XG4gICAgICAgIHJldHVybiBQcm92aWRlcjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFbnp5bWUgSW50ZXJuYWwgRXJyb3I6IGNhbuKAmXQgZmlndXJlIG91dCBob3cgdG8gZ2V0IFByb3ZpZGVyIGZyb20gQ29uc3VtZXInKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoLi4uYXJncykge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KC4uLmFyZ3MpO1xuICB9XG5cbiAgd3JhcFdpdGhXcmFwcGluZ0NvbXBvbmVudChub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFJvb3RGaW5kZXIsXG4gICAgICBub2RlOiB3cmFwV2l0aFdyYXBwaW5nQ29tcG9uZW50KFJlYWN0LmNyZWF0ZUVsZW1lbnQsIG5vZGUsIG9wdGlvbnMpLFxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNldmVudGVlbkFkYXB0ZXI7XG4iXX0=