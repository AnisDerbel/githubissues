96b60192c66828ac562c60b35ae5f8d5
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports["default"] = createFieldArrayProps;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutPropertiesLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose"));

function createFieldArrayProps(_ref, name, form, sectionPrefix, getValue, _ref2) {
  var getIn = _ref.getIn;
  var arrayInsert = _ref2.arrayInsert,
      arrayMove = _ref2.arrayMove,
      arrayPop = _ref2.arrayPop,
      arrayPush = _ref2.arrayPush,
      arrayRemove = _ref2.arrayRemove,
      arrayRemoveAll = _ref2.arrayRemoveAll,
      arrayShift = _ref2.arrayShift,
      arraySplice = _ref2.arraySplice,
      arraySwap = _ref2.arraySwap,
      arrayUnshift = _ref2.arrayUnshift,
      asyncError = _ref2.asyncError,
      dirty = _ref2.dirty,
      length = _ref2.length,
      pristine = _ref2.pristine,
      submitError = _ref2.submitError,
      state = _ref2.state,
      submitFailed = _ref2.submitFailed,
      submitting = _ref2.submitting,
      syncError = _ref2.syncError,
      syncWarning = _ref2.syncWarning,
      value = _ref2.value,
      props = _ref2.props,
      rest = (0, _objectWithoutPropertiesLoose2["default"])(_ref2, ["arrayInsert", "arrayMove", "arrayPop", "arrayPush", "arrayRemove", "arrayRemoveAll", "arrayShift", "arraySplice", "arraySwap", "arrayUnshift", "asyncError", "dirty", "length", "pristine", "submitError", "state", "submitFailed", "submitting", "syncError", "syncWarning", "value", "props"]);
  var error = syncError || asyncError || submitError;
  var warning = syncWarning;
  var fieldName = sectionPrefix ? name.replace(sectionPrefix + ".", '') : name;
  var finalProps = (0, _extends2["default"])({
    fields: {
      _isFieldArray: true,
      forEach: function forEach(callback) {
        return (value || []).forEach(function (item, index) {
          return callback(fieldName + "[" + index + "]", index, finalProps.fields);
        });
      },
      get: getValue,
      getAll: function getAll() {
        return value;
      },
      insert: arrayInsert,
      length: length,
      map: function map(callback) {
        return (value || []).map(function (item, index) {
          return callback(fieldName + "[" + index + "]", index, finalProps.fields);
        });
      },
      move: arrayMove,
      name: name,
      pop: function pop() {
        arrayPop();
        return getIn(value, String(length - 1));
      },
      push: arrayPush,
      reduce: function reduce(callback, initial) {
        return (value || []).reduce(function (accumulator, item, index) {
          return callback(accumulator, fieldName + "[" + index + "]", index, finalProps.fields);
        }, initial);
      },
      remove: arrayRemove,
      removeAll: arrayRemoveAll,
      shift: function shift() {
        arrayShift();
        return getIn(value, '0');
      },
      splice: arraySplice,
      swap: arraySwap,
      unshift: arrayUnshift
    },
    meta: {
      dirty: dirty,
      error: error,
      form: form,
      warning: warning,
      invalid: !!error,
      pristine: pristine,
      submitting: submitting,
      submitFailed: submitFailed,
      valid: !error
    }
  }, props, {}, rest);
  return finalProps;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZUZpZWxkQXJyYXlQcm9wcy5qcyJdLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiY3JlYXRlRmllbGRBcnJheVByb3BzIiwiX2V4dGVuZHMyIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UyIiwiX3JlZiIsIm5hbWUiLCJmb3JtIiwic2VjdGlvblByZWZpeCIsImdldFZhbHVlIiwiX3JlZjIiLCJnZXRJbiIsImFycmF5SW5zZXJ0IiwiYXJyYXlNb3ZlIiwiYXJyYXlQb3AiLCJhcnJheVB1c2giLCJhcnJheVJlbW92ZSIsImFycmF5UmVtb3ZlQWxsIiwiYXJyYXlTaGlmdCIsImFycmF5U3BsaWNlIiwiYXJyYXlTd2FwIiwiYXJyYXlVbnNoaWZ0IiwiYXN5bmNFcnJvciIsImRpcnR5IiwibGVuZ3RoIiwicHJpc3RpbmUiLCJzdWJtaXRFcnJvciIsInN0YXRlIiwic3VibWl0RmFpbGVkIiwic3VibWl0dGluZyIsInN5bmNFcnJvciIsInN5bmNXYXJuaW5nIiwidmFsdWUiLCJwcm9wcyIsInJlc3QiLCJlcnJvciIsIndhcm5pbmciLCJmaWVsZE5hbWUiLCJyZXBsYWNlIiwiZmluYWxQcm9wcyIsImZpZWxkcyIsIl9pc0ZpZWxkQXJyYXkiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJpdGVtIiwiaW5kZXgiLCJnZXQiLCJnZXRBbGwiLCJpbnNlcnQiLCJtYXAiLCJtb3ZlIiwicG9wIiwiU3RyaW5nIiwicHVzaCIsInJlZHVjZSIsImluaXRpYWwiLCJhY2N1bXVsYXRvciIsInJlbW92ZSIsInJlbW92ZUFsbCIsInNoaWZ0Iiwic3BsaWNlIiwic3dhcCIsInVuc2hpZnQiLCJtZXRhIiwiaW52YWxpZCIsInZhbGlkIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFJQSxzQkFBc0IsR0FBR0MsT0FBTyxDQUFDLDhDQUFELENBQXBDOztBQUVBQyxPQUFPLENBQUNDLFVBQVIs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QVFKRCxNQUFBQSxZQUFZLEVBQUVBLFlBUlY7QUFTSnFDLE1BQUFBLEtBQUssRUFBRSxDQUFDOUI7QUFUSjtBQXpDbUMsR0FBMUIsRUFvRGRGLEtBcERjLEVBb0RQLEVBcERPLEVBb0RIQyxJQXBERyxDQUFqQjtBQXFEQSxTQUFPSyxVQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGNyZWF0ZUZpZWxkQXJyYXlQcm9wcztcblxudmFyIF9leHRlbmRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiKSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIikpO1xuXG5mdW5jdGlvbiBjcmVhdGVGaWVsZEFycmF5UHJvcHMoX3JlZiwgbmFtZSwgZm9ybSwgc2VjdGlvblByZWZpeCwgZ2V0VmFsdWUsIF9yZWYyKSB7XG4gIHZhciBnZXRJbiA9IF9yZWYuZ2V0SW47XG4gIHZhciBhcnJheUluc2VydCA9IF9yZWYyLmFycmF5SW5zZXJ0LFxuICAgICAgYXJyYXlNb3ZlID0gX3JlZjIuYXJyYXlNb3ZlLFxuICAgICAgYXJyYXlQb3AgPSBfcmVmMi5hcnJheVBvcCxcbiAgICAgIGFycmF5UHVzaCA9IF9yZWYyLmFycmF5UHVzaCxcbiAgICAgIGFycmF5UmVtb3ZlID0gX3JlZjIuYXJyYXlSZW1vdmUsXG4gICAgICBhcnJheVJlbW92ZUFsbCA9IF9yZWYyLmFycmF5UmVtb3ZlQWxsLFxuICAgICAgYXJyYXlTaGlmdCA9IF9yZWYyLmFycmF5U2hpZnQsXG4gICAgICBhcnJheVNwbGljZSA9IF9yZWYyLmFycmF5U3BsaWNlLFxuICAgICAgYXJyYXlTd2FwID0gX3JlZjIuYXJyYXlTd2FwLFxuICAgICAgYXJyYXlVbnNoaWZ0ID0gX3JlZjIuYXJyYXlVbnNoaWZ0LFxuICAgICAgYXN5bmNFcnJvciA9IF9yZWYyLmFzeW5jRXJyb3IsXG4gICAgICBkaXJ0eSA9IF9yZWYyLmRpcnR5LFxuICAgICAgbGVuZ3RoID0gX3JlZjIubGVuZ3RoLFxuICAgICAgcHJpc3RpbmUgPSBfcmVmMi5wcmlzdGluZSxcbiAgICAgIHN1Ym1pdEVycm9yID0gX3JlZjIuc3VibWl0RXJyb3IsXG4gICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlLFxuICAgICAgc3VibWl0RmFpbGVkID0gX3JlZjIuc3VibWl0RmFpbGVkLFxuICAgICAgc3VibWl0dGluZyA9IF9yZWYyLnN1Ym1pdHRpbmcsXG4gICAgICBzeW5jRXJyb3IgPSBfcmVmMi5zeW5jRXJyb3IsXG4gICAgICBzeW5jV2FybmluZyA9IF9yZWYyLnN5bmNXYXJuaW5nLFxuICAgICAgdmFsdWUgPSBfcmVmMi52YWx1ZSxcbiAgICAgIHByb3BzID0gX3JlZjIucHJvcHMsXG4gICAgICByZXN0ID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlMltcImRlZmF1bHRcIl0pKF9yZWYyLCBbXCJhcnJheUluc2VydFwiLCBcImFycmF5TW92ZVwiLCBcImFycmF5UG9wXCIsIFwiYXJyYXlQdXNoXCIsIFwiYXJyYXlSZW1vdmVcIiwgXCJhcnJheVJlbW92ZUFsbFwiLCBcImFycmF5U2hpZnRcIiwgXCJhcnJheVNwbGljZVwiLCBcImFycmF5U3dhcFwiLCBcImFycmF5VW5zaGlmdFwiLCBcImFzeW5jRXJyb3JcIiwgXCJkaXJ0eVwiLCBcImxlbmd0aFwiLCBcInByaXN0aW5lXCIsIFwic3VibWl0RXJyb3JcIiwgXCJzdGF0ZVwiLCBcInN1Ym1pdEZhaWxlZFwiLCBcInN1Ym1pdHRpbmdcIiwgXCJzeW5jRXJyb3JcIiwgXCJzeW5jV2FybmluZ1wiLCBcInZhbHVlXCIsIFwicHJvcHNcIl0pO1xuICB2YXIgZXJyb3IgPSBzeW5jRXJyb3IgfHwgYXN5bmNFcnJvciB8fCBzdWJtaXRFcnJvcjtcbiAgdmFyIHdhcm5pbmcgPSBzeW5jV2FybmluZztcbiAgdmFyIGZpZWxkTmFtZSA9IHNlY3Rpb25QcmVmaXggPyBuYW1lLnJlcGxhY2Uoc2VjdGlvblByZWZpeCArIFwiLlwiLCAnJykgOiBuYW1lO1xuICB2YXIgZmluYWxQcm9wcyA9ICgwLCBfZXh0ZW5kczJbXCJkZWZhdWx0XCJdKSh7XG4gICAgZmllbGRzOiB7XG4gICAgICBfaXNGaWVsZEFycmF5OiB0cnVlLFxuICAgICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gKHZhbHVlIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmaWVsZE5hbWUgKyBcIltcIiArIGluZGV4ICsgXCJdXCIsIGluZGV4LCBmaW5hbFByb3BzLmZpZWxkcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldDogZ2V0VmFsdWUsXG4gICAgICBnZXRBbGw6IGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSxcbiAgICAgIGluc2VydDogYXJyYXlJbnNlcnQsXG4gICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgIG1hcDogZnVuY3Rpb24gbWFwKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiAodmFsdWUgfHwgW10pLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmllbGROYW1lICsgXCJbXCIgKyBpbmRleCArIFwiXVwiLCBpbmRleCwgZmluYWxQcm9wcy5maWVsZHMpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBtb3ZlOiBhcnJheU1vdmUsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcG9wOiBmdW5jdGlvbiBwb3AoKSB7XG4gICAgICAgIGFycmF5UG9wKCk7XG4gICAgICAgIHJldHVybiBnZXRJbih2YWx1ZSwgU3RyaW5nKGxlbmd0aCAtIDEpKTtcbiAgICAgIH0sXG4gICAgICBwdXNoOiBhcnJheVB1c2gsXG4gICAgICByZWR1Y2U6IGZ1bmN0aW9uIHJlZHVjZShjYWxsYmFjaywgaW5pdGlhbCkge1xuICAgICAgICByZXR1cm4gKHZhbHVlIHx8IFtdKS5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtdWxhdG9yLCBpdGVtLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhhY2N1bXVsYXRvciwgZmllbGROYW1lICsgXCJbXCIgKyBpbmRleCArIFwiXVwiLCBpbmRleCwgZmluYWxQcm9wcy5maWVsZHMpO1xuICAgICAgICB9LCBpbml0aWFsKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmU6IGFycmF5UmVtb3ZlLFxuICAgICAgcmVtb3ZlQWxsOiBhcnJheVJlbW92ZUFsbCxcbiAgICAgIHNoaWZ0OiBmdW5jdGlvbiBzaGlmdCgpIHtcbiAgICAgICAgYXJyYXlTaGlmdCgpO1xuICAgICAgICByZXR1cm4gZ2V0SW4odmFsdWUsICcwJyk7XG4gICAgICB9LFxuICAgICAgc3BsaWNlOiBhcnJheVNwbGljZSxcbiAgICAgIHN3YXA6IGFycmF5U3dhcCxcbiAgICAgIHVuc2hpZnQ6IGFycmF5VW5zaGlmdFxuICAgIH0sXG4gICAgbWV0YToge1xuICAgICAgZGlydHk6IGRpcnR5LFxuICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgZm9ybTogZm9ybSxcbiAgICAgIHdhcm5pbmc6IHdhcm5pbmcsXG4gICAgICBpbnZhbGlkOiAhIWVycm9yLFxuICAgICAgcHJpc3RpbmU6IHByaXN0aW5lLFxuICAgICAgc3VibWl0dGluZzogc3VibWl0dGluZyxcbiAgICAgIHN1Ym1pdEZhaWxlZDogc3VibWl0RmFpbGVkLFxuICAgICAgdmFsaWQ6ICFlcnJvclxuICAgIH1cbiAgfSwgcHJvcHMsIHt9LCByZXN0KTtcbiAgcmV0dXJuIGZpbmFsUHJvcHM7XG59Il19