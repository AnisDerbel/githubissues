{"version":3,"sources":["preprocessor-mixin.js"],"names":["ErrorReportingMixinBase","require","PositionTrackingPreprocessorMixin","Mixin","ErrorReportingPreprocessorMixin","preprocessor","opts","posTracker","install","lastErrOffset","code","offset","module","exports"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,uBAAuB,GAAGC,OAAO,CAAC,cAAD,CAAvC;;AACA,IAAMC,iCAAiC,GAAGD,OAAO,CAAC,yCAAD,CAAjD;;AACA,IAAME,KAAK,GAAGF,OAAO,CAAC,mBAAD,CAArB;;IAEMG,+B;;;;;AACF,2CAAYC,YAAZ,EAA0BC,IAA1B,EAAgC;AAAA;;AAAA;AAC5B,8BAAMD,YAAN,EAAoBC,IAApB;AAEA,UAAKC,UAAL,GAAkBJ,KAAK,CAACK,OAAN,CAAcH,YAAd,EAA4BH,iCAA5B,CAAlB;AACA,UAAKO,aAAL,GAAqB,CAAC,CAAtB;AAJ4B;AAK/B;;;;WAED,sBAAaC,IAAb,EAAmB;AAEf,UAAI,KAAKD,aAAL,KAAuB,KAAKF,UAAL,CAAgBI,MAA3C,EAAmD;AAC/C,aAAKF,aAAL,GAAqB,KAAKF,UAAL,CAAgBI,MAArC;AACA,sIAAmBD,IAAnB;AACH;AACJ;;;EAdyCV,uB;;AAiB9CY,MAAM,CAACC,OAAP,GAAiBT,+BAAjB","sourcesContent":["'use strict';\n\nconst ErrorReportingMixinBase = require('./mixin-base');\nconst PositionTrackingPreprocessorMixin = require('../position-tracking/preprocessor-mixin');\nconst Mixin = require('../../utils/mixin');\n\nclass ErrorReportingPreprocessorMixin extends ErrorReportingMixinBase {\n    constructor(preprocessor, opts) {\n        super(preprocessor, opts);\n\n        this.posTracker = Mixin.install(preprocessor, PositionTrackingPreprocessorMixin);\n        this.lastErrOffset = -1;\n    }\n\n    _reportError(code) {\n        //NOTE: avoid reporting error twice on advance/retreat\n        if (this.lastErrOffset !== this.posTracker.offset) {\n            this.lastErrOffset = this.posTracker.offset;\n            super._reportError(code);\n        }\n    }\n}\n\nmodule.exports = ErrorReportingPreprocessorMixin;\n"]}