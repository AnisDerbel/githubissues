86aeead424862bfb64d0edf918e6d1b7
var map = require('array-map');

var indexOf = require('indexof');

var isArray = require('isarray');

var forEach = require('foreach');

var reduce = require('array-reduce');

var getObjectKeys = require('object-keys');

var JSON = require('json3');

function objectKeys(val) {
  if (Object.keys) return Object.keys(val);
  return getObjectKeys(val);
}

module.exports = inspect;
/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 * @license MIT (Â© Joyent)
 */

function inspect(obj, opts) {
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];

  if (isBoolean(opts)) {
    ctx.showHidden = opts;
  } else if (opts) {
    _extend(ctx, opts);
  }

  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}

inspect.colors = {
  'bold': [1, 22],
  'italic': [3, 23],
  'underline': [4, 24],
  'inverse': [7, 27],
  'white': [37, 39],
  'grey': [90, 39],
  'black': [30, 39],
  'blue': [34, 39],
  'cyan': [36, 39],
  'green': [32, 39],
  'magenta': [35, 39],
  'red': [31, 39],
  'yellow': [33, 39]
};
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  'regexp': 'red'
};

function stylizeNoColor(str, styleType) {
  return str;
}

function isBoolean(arg) {
  return typeof arg === 'boolean';
}

function isUndefined(arg) {
  return arg === void 0;
}

function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return "\x1B[" + inspect.colors[style][0] + 'm' + str + "\x1B[" + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}

function isFunction(arg) {
  return typeof arg === 'function';
}

function isString(arg) {
  return typeof arg === 'string';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isNull(arg) {
  return arg === null;
}

function hasOwn(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isError(e) {
  return isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);
}

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

function arrayToHash(array) {
  var hash = {};
  forEach(array, function (val, idx) {
    hash[val] = true;
  });
  return hash;
}

function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];

  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwn(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));
    } else {
      output.push('');
    }
  }

  forEach(keys, function (key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));
    }
  });
  return output;
}

function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}

function formatValue(ctx, value, recurseTimes) {
  if (ctx.customInspect && value && isFunction(value.inspect) && value.inspect !== inspect && !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);

    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }

    return ret;
  }

  var primitive = formatPrimitive(ctx, value);

  if (primitive) {
    return primitive;
  }

  var keys = objectKeys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden && Object.getOwnPropertyNames) {
    keys = Object.getOwnPropertyNames(value);
  }

  if (isError(value) && (indexOf(keys, 'message') >= 0 || indexOf(keys, 'description') >= 0)) {
    return formatError(value);
  }

  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }

    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }

    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }

    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '',
      array = false,
      braces = ['{', '}'];

  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);
  var output;

  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = map(keys, function (key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();
  return reduceToSingleString(output, base, braces);
}

function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = {
    value: value[key]
  };

  if (Object.getOwnPropertyDescriptor) {
    desc = Object.getOwnPropertyDescriptor(value, key) || desc;
  }

  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }

  if (!hasOwn(visibleKeys, key)) {
    name = '[' + key + ']';
  }

  if (!str) {
    if (indexOf(ctx.seen, desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }

      if (str.indexOf('\n') > -1) {
        if (array) {
          str = map(str.split('\n'), function (line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + map(str.split('\n'), function (line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }

  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }

    name = JSON.stringify('' + key);

    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}

function formatPrimitive(ctx, value) {
  if (isUndefined(value)) return ctx.stylize('undefined', 'undefined');

  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '').replace(/'/g, "\\'").replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }

  if (isNumber(value)) return ctx.stylize('' + value, 'number');
  if (isBoolean(value)) return ctx.stylize('' + value, 'boolean');
  if (isNull(value)) return ctx.stylize('null', 'null');
}

function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = reduce(output, function (prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] + (base === '' ? '' : base + '\n ') + ' ' + output.join(',\n  ') + ' ' + braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}

function _extend(origin, add) {
  if (!add || !isObject(add)) return origin;
  var keys = objectKeys(add);
  var i = keys.length;

  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }

  return origin;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm1hcCIsInJlcXVpcmUiLCJpbmRleE9mIiwiaXNBcnJheSIsImZvckVhY2giLCJyZWR1Y2UiLCJnZXRPYmplY3RLZXlzIiwiSlNPTiIsIm9iamVjdEtleXMiLCJ2YWwiLCJPYmplY3QiLCJrZXlzIiwibW9kdWxlIiwiZXhwb3J0cyIsImluc3BlY3QiLCJvYmoiLCJvcHRzIiwiY3R4Iiwic2VlbiIsInN0eWxpemUiLCJzdHlsaXplTm9Db2xvciIsImFyZ3VtZW50cyIsImxlbmd0aCIsImRlcHRoIiwiY29sb3JzIiwiaXNCb29sZWFuIiwic2hvd0hpZGRlbiIsIl9leHRlbmQiLCJpc1VuZGVmaW5lZCIsImN1c3RvbUluc3BlY3QiLCJzdHlsaXplV2l0aENvbG9yIiwiZm9ybWF0VmFsdWUiLCJzdHlsZXMiLCJzdHIiLCJzdHlsZVR5cGUiLCJhcmciLCJzdHlsZSIsImlzRnVuY3Rpb24iLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaXNOdWxsIiwiaGFzT3duIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImlzUmVnRXhwIiwicmUiLCJpc09iamVjdCIsIm9iamVjdFRvU3RyaW5nIiwiaXNFcnJvciIsImUiLCJFcnJvciIsImlzRGF0ZSIsImQiLCJvIiwidG9TdHJpbmciLCJhcnJheVRvSGFzaCIsImFycmF5IiwiaGFzaCIsImlkeCIsImZvcm1hdEFycmF5IiwidmFsdWUiLCJyZWN1cnNlVGltZXMiLCJ2aXNpYmxlS2V5cyIsIm91dHB1dCIsImkiLCJsIiwiU3RyaW5nIiwicHVzaCIsImZvcm1hdFByb3BlcnR5Iiwia2V5IiwibWF0Y2giLCJmb3JtYXRFcnJvciIsImNvbnN0cnVjdG9yIiwicmV0IiwicHJpbWl0aXZlIiwiZm9ybWF0UHJpbWl0aXZlIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIm5hbWUiLCJSZWdFeHAiLCJEYXRlIiwiYmFzZSIsImJyYWNlcyIsIm4iLCJ0b1VUQ1N0cmluZyIsInBvcCIsInJlZHVjZVRvU2luZ2xlU3RyaW5nIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldCIsInNldCIsInNwbGl0IiwibGluZSIsImpvaW4iLCJzdWJzdHIiLCJzdHJpbmdpZnkiLCJyZXBsYWNlIiwic2ltcGxlIiwibnVtTGluZXNFc3QiLCJwcmV2IiwiY3VyIiwib3JpZ2luIiwiYWRkIl0sIm1hcHBpbmdzIjoiQUFLQSxJQUFJQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxXQUFELENBQWpCOztBQUNBLElBQUlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0EsSUFBSUUsT0FBTyxHQUFHRixPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxJQUFJRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlJLE1BQU0sR0FBR0osT0FBTyxDQUFDLGNBQUQsQ0FBcEI7O0FBQ0EsSUFBSUssYUFBYSxHQUFHTCxPQUFPLENBQUMsYUFBRCxDQUEzQjs7QUFDQSxJQUFJTSxJQUFJLEdBQUdOLE9BQU8sQ0FBQyxPQUFELENBQWxCOztBQVVBLFNBQVNPLFVBQVQsQ0FBb0JDLEdBQXBCLEVBQXdCO0FBQ3RCLE1BQUlDLE1BQU0sQ0FBQ0MsSUFBWCxFQUFpQixPQUFPRCxNQUFNLENBQUNDLElBQVAsQ0FBWUYsR0FBWixDQUFQO0FBQ2pCLFNBQU9ILGFBQWEsQ0FBQ0csR0FBRCxDQUFwQjtBQUNEOztBQU1ERyxNQUFNLENBQUNDLE9BQVAsR0FBaUJDLE9BQWpCO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxTQUFTQSxPQUFULENBQWlCQyxHQUFqQixFQUFzQkMsSUFBdEIsRUFBNEI7QUFFMUIsTUFBSUMsR0FBRyxHQUFHO0FBQ1JDLElBQUFBLElBQUksRUFBRSxFQURFO0FBRVJDLElBQUFBLE9BQU8sRUFBRUM7QUFGRCxHQUFWO0FBS0EsTUFBSUMsU0FBUyxDQUFDQyxNQUFWLElBQW9CLENBQXhCLEVBQTJCTCxH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LEVBQStCLEVBQS9CLEVBQW1DM0UsTUFBMUMsR0FBbUQsQ0FBMUQ7QUFDRCxHQUprQixFQUloQixDQUpnQixDQUFuQjs7QUFNQSxNQUFJQSxNQUFNLEdBQUcsRUFBYixFQUFpQjtBQUNmLFdBQU82RCxNQUFNLENBQUMsQ0FBRCxDQUFOLElBQ0NELElBQUksS0FBSyxFQUFULEdBQWMsRUFBZCxHQUFtQkEsSUFBSSxHQUFHLEtBRDNCLElBRUEsR0FGQSxHQUdBakIsTUFBTSxDQUFDNkIsSUFBUCxDQUFZLE9BQVosQ0FIQSxHQUlBLEdBSkEsR0FLQVgsTUFBTSxDQUFDLENBQUQsQ0FMYjtBQU1EOztBQUVELFNBQU9BLE1BQU0sQ0FBQyxDQUFELENBQU4sR0FBWUQsSUFBWixHQUFtQixHQUFuQixHQUF5QmpCLE1BQU0sQ0FBQzZCLElBQVAsQ0FBWSxJQUFaLENBQXpCLEdBQTZDLEdBQTdDLEdBQW1EWCxNQUFNLENBQUMsQ0FBRCxDQUFoRTtBQUNEOztBQUVELFNBQVN4RCxPQUFULENBQWlCMkUsTUFBakIsRUFBeUJDLEdBQXpCLEVBQThCO0FBRTVCLE1BQUksQ0FBQ0EsR0FBRCxJQUFRLENBQUN2RCxRQUFRLENBQUN1RCxHQUFELENBQXJCLEVBQTRCLE9BQU9ELE1BQVA7QUFFNUIsTUFBSTNGLElBQUksR0FBR0gsVUFBVSxDQUFDK0YsR0FBRCxDQUFyQjtBQUNBLE1BQUlyQyxDQUFDLEdBQUd2RCxJQUFJLENBQUNXLE1BQWI7O0FBQ0EsU0FBTzRDLENBQUMsRUFBUixFQUFZO0FBQ1ZvQyxJQUFBQSxNQUFNLENBQUMzRixJQUFJLENBQUN1RCxDQUFELENBQUwsQ0FBTixHQUFrQnFDLEdBQUcsQ0FBQzVGLElBQUksQ0FBQ3VELENBQUQsQ0FBTCxDQUFyQjtBQUNEOztBQUNELFNBQU9vQyxNQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgbWFwID0gcmVxdWlyZSgnYXJyYXktbWFwJyk7XG52YXIgaW5kZXhPZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpO1xudmFyIGZvckVhY2ggPSByZXF1aXJlKCdmb3JlYWNoJyk7XG52YXIgcmVkdWNlID0gcmVxdWlyZSgnYXJyYXktcmVkdWNlJyk7XG52YXIgZ2V0T2JqZWN0S2V5cyA9IHJlcXVpcmUoJ29iamVjdC1rZXlzJyk7XG52YXIgSlNPTiA9IHJlcXVpcmUoJ2pzb24zJyk7XG5cbi8qKlxuICogTWFrZSBzdXJlIGBPYmplY3Qua2V5c2Agd29yayBmb3IgYHVuZGVmaW5lZGBcbiAqIHZhbHVlcyB0aGF0IGFyZSBzdGlsbCB0aGVyZSwgbGlrZSBgZG9jdW1lbnQuYWxsYC5cbiAqIGh0dHA6Ly9saXN0cy53My5vcmcvQXJjaGl2ZXMvUHVibGljL3B1YmxpYy1odG1sLzIwMDlKdW4vMDU0Ni5odG1sXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gb2JqZWN0S2V5cyh2YWwpe1xuICBpZiAoT2JqZWN0LmtleXMpIHJldHVybiBPYmplY3Qua2V5cyh2YWwpO1xuICByZXR1cm4gZ2V0T2JqZWN0S2V5cyh2YWwpO1xufVxuXG4vKipcbiAqIE1vZHVsZSBleHBvcnRzLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gaW5zcGVjdDtcblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqIEBsaWNlbnNlIE1JVCAowqkgSm95ZW50KVxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5cbmZ1bmN0aW9uIGluc3BlY3Qob2JqLCBvcHRzKSB7XG4gIC8vIGRlZmF1bHQgb3B0aW9uc1xuICB2YXIgY3R4ID0ge1xuICAgIHNlZW46IFtdLFxuICAgIHN0eWxpemU6IHN0eWxpemVOb0NvbG9yXG4gIH07XG4gIC8vIGxlZ2FjeS4uLlxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBjdHguZGVwdGggPSBhcmd1bWVudHNbMl07XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG4gIGlmIChpc0Jvb2xlYW4ob3B0cykpIHtcbiAgICAvLyBsZWdhY3kuLi5cbiAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG4gIH0gZWxzZSBpZiAob3B0cykge1xuICAgIC8vIGdvdCBhbiBcIm9wdGlvbnNcIiBvYmplY3RcbiAgICBfZXh0ZW5kKGN0eCwgb3B0cyk7XG4gIH1cbiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcbiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuICAnYm9sZCcgOiBbMSwgMjJdLFxuICAnaXRhbGljJyA6IFszLCAyM10sXG4gICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcbiAgJ2ludmVyc2UnIDogWzcsIDI3XSxcbiAgJ3doaXRlJyA6IFszNywgMzldLFxuICAnZ3JleScgOiBbOTAsIDM5XSxcbiAgJ2JsYWNrJyA6IFszMCwgMzldLFxuICAnYmx1ZScgOiBbMzQsIDM5XSxcbiAgJ2N5YW4nIDogWzM2LCAzOV0sXG4gICdncmVlbicgOiBbMzIsIDM5XSxcbiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG4gICdyZWQnIDogWzMxLCAzOV0sXG4gICd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG4gICdzcGVjaWFsJzogJ2N5YW4nLFxuICAnbnVtYmVyJzogJ3llbGxvdycsXG4gICdib29sZWFuJzogJ3llbGxvdycsXG4gICd1bmRlZmluZWQnOiAnZ3JleScsXG4gICdudWxsJzogJ2JvbGQnLFxuICAnc3RyaW5nJzogJ2dyZWVuJyxcbiAgJ2RhdGUnOiAnbWFnZW50YScsXG4gIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG4gICdyZWdleHAnOiAncmVkJ1xufTtcblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cbiAgaWYgKHN0eWxlKSB7XG4gICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaGFzT3duKG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gaXNPYmplY3QoZSkgJiZcbiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGZvckVhY2goYXJyYXksIGZ1bmN0aW9uKHZhbCwgaWR4KSB7XG4gICAgaGFzaFt2YWxdID0gdHJ1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGhhc2g7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd24odmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAgZm9yRWFjaChrZXlzLCBmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoIWtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAga2V5LCB0cnVlKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG4gIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cbiAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG4gIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuICAgICAgdmFsdWUgJiZcbiAgICAgIGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiZcbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKHZhbHVlKTtcbiAgdmFyIHZpc2libGVLZXlzID0gYXJyYXlUb0hhc2goa2V5cyk7XG5cbiAgaWYgKGN0eC5zaG93SGlkZGVuICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKSB7XG4gICAga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgfVxuXG4gIC8vIElFIGRvZXNuJ3QgbWFrZSBlcnJvciBmaWVsZHMgbm9uLWVudW1lcmFibGVcbiAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2R3dzUyc2J0KHY9dnMuOTQpLmFzcHhcbiAgaWYgKGlzRXJyb3IodmFsdWUpXG4gICAgICAmJiAoaW5kZXhPZihrZXlzLCAnbWVzc2FnZScpID49IDAgfHwgaW5kZXhPZihrZXlzLCAnZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBtYXAoa2V5cywgZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7XG4gICAgfSk7XG4gIH1cblxuICBjdHguc2Vlbi5wb3AoKTtcblxuICByZXR1cm4gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KSB7XG4gIHZhciBuYW1lLCBzdHIsIGRlc2M7XG4gIGRlc2MgPSB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKSB7XG4gICAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgZGVzYztcbiAgfVxuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duKHZpc2libGVLZXlzLCBrZXkpKSB7XG4gICAgbmFtZSA9ICdbJyArIGtleSArICddJztcbiAgfVxuICBpZiAoIXN0cikge1xuICAgIGlmIChpbmRleE9mKGN0eC5zZWVuLCBkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBtYXAoc3RyLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIG1hcChzdHIuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzVW5kZWZpbmVkKG5hbWUpKSB7XG4gICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7XG4gICAgaWYgKG5hbWUubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKSB7XG4gICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMSwgbmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cInxcIiQpL2csIFwiJ1wiKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnc3RyaW5nJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IHJlZHVjZShvdXRwdXQsIGZ1bmN0aW9uKHByZXYsIGN1cikge1xuICAgIG51bUxpbmVzRXN0Kys7XG4gICAgaWYgKGN1ci5pbmRleE9mKCdcXG4nKSA+PSAwKSBudW1MaW5lc0VzdCsrO1xuICAgIHJldHVybiBwcmV2ICsgY3VyLnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLCAnJykubGVuZ3RoICsgMTtcbiAgfSwgMCk7XG5cbiAgaWYgKGxlbmd0aCA+IDYwKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArXG4gICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcXG4gJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBicmFjZXNbMV07XG4gIH1cblxuICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdO1xufVxuXG5mdW5jdGlvbiBfZXh0ZW5kKG9yaWdpbiwgYWRkKSB7XG4gIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIGFkZCBpc24ndCBhbiBvYmplY3RcbiAgaWYgKCFhZGQgfHwgIWlzT2JqZWN0KGFkZCkpIHJldHVybiBvcmlnaW47XG5cbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn1cbiJdfQ==