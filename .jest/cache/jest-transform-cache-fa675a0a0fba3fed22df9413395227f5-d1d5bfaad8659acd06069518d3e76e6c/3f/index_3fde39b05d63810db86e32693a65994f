37e0aa1ab0b0cbb34751d40e5e437517
function encode(data, replacer, list, seen) {
  var stored, key, value, i, l;
  var seenIndex = seen.get(data);

  if (seenIndex != null) {
    return seenIndex;
  }

  var index = list.length;
  var proto = Object.prototype.toString.call(data);

  if (proto === '[object Object]') {
    stored = {};
    seen.set(data, index);
    list.push(stored);
    var keys = Object.keys(data);

    for (i = 0, l = keys.length; i < l; i++) {
      key = keys[i];
      value = data[key];
      if (replacer) value = replacer.call(data, key, value);
      stored[key] = encode(value, replacer, list, seen);
    }
  } else if (proto === '[object Array]') {
    stored = [];
    seen.set(data, index);
    list.push(stored);

    for (i = 0, l = data.length; i < l; i++) {
      value = data[i];
      if (replacer) value = replacer.call(data, i, value);
      stored[i] = encode(value, replacer, list, seen);
    }
  } else {
    list.push(data);
  }

  return index;
}

function decode(list, reviver) {
  var i = list.length;
  var j, k, data, key, value, proto;

  while (i--) {
    data = list[i];
    proto = Object.prototype.toString.call(data);

    if (proto === '[object Object]') {
      var keys = Object.keys(data);

      for (j = 0, k = keys.length; j < k; j++) {
        key = keys[j];
        value = list[data[key]];
        if (reviver) value = reviver.call(data, key, value);
        data[key] = value;
      }
    } else if (proto === '[object Array]') {
      for (j = 0, k = data.length; j < k; j++) {
        value = list[data[j]];
        if (reviver) value = reviver.call(data, j, value);
        data[j] = value;
      }
    }
  }
}

exports.stringify = function stringify(data, replacer, space) {
  try {
    return arguments.length === 1 ? JSON.stringify(data) : JSON.stringify(data, replacer, space);
  } catch (e) {
    return exports.stringifyStrict(data, replacer, space);
  }
};

exports.parse = function parse(data, reviver) {
  var hasCircular = /^\s/.test(data);

  if (!hasCircular) {
    return arguments.length === 1 ? JSON.parse(data) : JSON.parse(data, reviver);
  } else {
    var list = JSON.parse(data);
    decode(list, reviver);
    return list[0];
  }
};

exports.stringifyStrict = function stringifyStrict(data, replacer, space) {
  var list = [];
  encode(data, replacer, list, new Map());
  return space ? ' ' + JSON.stringify(list, null, space) : ' ' + JSON.stringify(list);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImVuY29kZSIsImRhdGEiLCJyZXBsYWNlciIsImxpc3QiLCJzZWVuIiwic3RvcmVkIiwia2V5IiwidmFsdWUiLCJpIiwibCIsInNlZW5JbmRleCIsImdldCIsImluZGV4IiwibGVuZ3RoIiwicHJvdG8iLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJzZXQiLCJwdXNoIiwia2V5cyIsImRlY29kZSIsInJldml2ZXIiLCJqIiwiayIsImV4cG9ydHMiLCJzdHJpbmdpZnkiLCJzcGFjZSIsImFyZ3VtZW50cyIsIkpTT04iLCJlIiwic3RyaW5naWZ5U3RyaWN0IiwicGFyc2UiLCJoYXNDaXJjdWxhciIsInRlc3QiLCJNYXAiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLE1BQVQsQ0FBaUJDLElBQWpCLEVBQXVCQyxRQUF2QixFQUFpQ0MsSUFBakMsRUFBdUNDLElBQXZDLEVBQTZDO0FBQzNDLE1BQUlDLE1BQUosRUFBWUMsR0FBWixFQUFpQkMsS0FBakIsRUFBd0JDLENBQXhCLEVBQTJCQyxDQUEzQjtBQUNBLE1BQUlDLFNBQVMsR0FBR04sSUFBSSxDQUFDTyxHQUFMLENBQVNWLElBQVQsQ0FBaEI7O0FBQ0EsTUFBSVMsU0FBUyxJQUFJLElBQWpCLEVBQXVCO0FBQ3JCLFdBQU9BLFNBQVA7QUFDRDs7QUFDRCxNQUFJRSxLQUFLLEdBQUdULElBQUksQ0FBQ1UsTUFBakI7QUFDQSxNQUFJQyxLQUFLLEdBQUdDLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsUUFBakIsQ0FBMEJDLElBQTFCLENBQStCakIsSUFBL0IsQ0FBWjs7QUFDQSxNQUFJYSxLQUFLLEtBQUssaUJBQWQsRUFBaUM7QUFDL0JULElBQUFBLE1BQU0sR0FBRyxFQUFUO0FBQ0FELElBQUFBLElBQUksQ0FBQ2UsR0FBTCxDQUFTbEIsSUFBVCxFQUFlVyxLQUFmO0FBQ0FULElBQUFBLElBQUksQ0FBQ2lCLElBQUwsQ0FBVWYsTUFBVjtBQUNBLFFBQUlnQixJQUFJLEdBQUdOLE1BQU0sQ0FBQ00sSUFBUCxDQUFZcEIsSUFBWixDQUFYOztBQUNBLFNBQUtPLENBQUMsR0FBRyxDQUFKLEVBQU9DLENBQUMsR0FBR1ksSUFBSSxDQUFDUixNQUFyQixFQUE2QkwsQ0FBQyxHQUFHQyxDQUFqQyxFQUFvQ0QsQ0FBQyxFQUFyQyxFQUF5QztBQUN2Q0YsTUFBQUEsR0FBRyxHQUFHZSxJQUFJLENBQUNiLENBQUQsQ0FBVjtBQUNBRCxNQUFBQSxLQUFLLEdBQUdOLElBQUksQ0FBQ0ssR0FBRCxDQUFaO0FBQ0EsVUFBSUosUUFBSixFQUFjSyxLQUFLLEdBQUdMLFFBQVEsQ0FBQ2dCLElBQVQsQ0FBY2pCLElBQWQsRUFBb0JLLEdBQXBCLEVBQXlCQyxLQUF6QixDQUFSO0FBQ2RGLE1BQUFBLE1BQU0sQ0FBQ0MsR0FBRCxDQUFOLEdBQWNOLE1BQU0sQ0FBQ08sS0FBRCxFQUFRTCxRQUFSLEVBQWtCQyxJQUFsQixFQUF3QkMsSUFBeEIsQ0FBcEI7QUFDRDtBQUNGLEdBWEQsTUFXTyxJQUFJVSxLQUFLLEtBQUssZ0JBQWQsRUFBZ0M7QUFDckNULElBQUFBLE1BQU0sR0FBRyxFQUFUO0FBQ0FELElBQUFBLElBQUksQ0FBQ2UsR0FBTCxDQUFTbEIsSUFBVCxFQUFlVyxLQUFmO0FBQ0FULElBQUFBLElBQUksQ0FBQ2lCLElBQUwsQ0FBVWYsTUFBVjs7QUFDQSxTQUFLRyxDQUFDLEdBQUcsQ0FBSixFQUFPQyxDQUFDLEdBQUdSLElBQUksQ0FBQ1ksTUFBckIsRUFBNkJMLENBQUMsR0FBR0MsQ0FBakMsRUFBb0NELENBQUMsRUFBckMsRUFBeUM7QUFDdkNELE1BQUFBLEtBQUssR0FBR04sSUFBSSxDQUFDTyxDQUFELENBQVo7QUFDQSxVQUFJTixRQUFKLEVBQWNLLEtBQUssR0FBR0wsUUFBUSxDQUFDZ0IsSUFBVCxDQUFjakIsSUFBZCxFQUFvQk8sQ0FBcEIsRUFBdUJELEtBQXZCLENBQVI7QUFDZEYsTUFBQUEsTUFBTSxDQUFDRyxDQUFELENBQU4sR0FBWVIsTUFBTSxDQUFDTyxLQUFELEVBQVFMLFFBQVIsRUFBa0JDLElBQWxCLEVBQXdCQyxJQUF4QixDQUFsQjtBQUNEO0FBQ0YsR0FUTSxNQVNBO0FBQ0xELElBQUFBLElBQUksQ0FBQ2lCLElBQUwsQ0FBVW5CLElBQVY7QUFDRDs7QUFDRCxTQUFPVyxLQUFQO0FBQ0Q7O0FBRUQsU0FBU1UsTUFBVCxDQUFpQm5CLElBQWpCLEVBQXVCb0IsT0FBdkIsRUFBZ0M7QUFDOUIsTUFBSWYsQ0FBQyxHQUFHTCxJQUFJLENBQUNVLE1BQWI7QUFDQSxNQUFJVyxDQUFKLEVBQU9DLENBQVAsRUFBVXhCLElBQVYsRUFBZ0JLLEdBQWhCLEVBQXFCQyxLQUFyQixFQUE0Qk8sS0FBNUI7O0FBQ0EsU0FBT04sQ0FBQyxFQUFSLEVBQVk7QUFDVlAsSUFBQUEsSUFBSSxHQUFHRSxJQUFJLENBQUNLLENBQUQsQ0FBWDtBQUNBTSxJQUFBQSxLQUFLLEdBQUdDLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsUUFBakIsQ0FBMEJDLElBQTFCLENBQStCakIsSUFBL0IsQ0FBUjs7QUFDQSxRQUFJYSxLQUFLLEtBQUssaUJBQWQsRUFBaUM7QUFDL0IsVUFBSU8sSUFBSSxHQUFHTixNQUFNLENBQUNNLElBQVAsQ0FBWXBCLElBQVosQ0FBWDs7QUFDQSxXQUFLdUIsQ0FBQyxHQUFHLENBQUosRUFBT0MsQ0FBQyxHQUFHSixJQUFJLENBQUNSLE1BQXJCLEVBQTZCVyxDQUFDLEdBQUdDLENBQWpDLEVBQW9DRCxDQUFDLEVBQXJDLEVBQXlDO0FBQ3ZDbEIsUUFBQUEsR0FBRyxHQUFHZSxJQUFJLENBQUNHLENBQUQsQ0FBVjtBQUNBakIsUUFBQUEsS0FBSyxHQUFHSixJQUFJLENBQUNGLElBQUksQ0FBQ0ssR0FBRCxDQUFMLENBQVo7QUFDQSxZQUFJaUIsT0FBSixFQUFhaEIsS0FBSyxHQUFHZ0IsT0FBTyxDQUFDTCxJQUFSLENBQWFqQixJQUFiLEVBQW1CSyxHQUFuQixFQUF3QkMsS0FBeEIsQ0FBUjtBQUNiTixRQUFBQSxJQUFJLENBQUNLLEdBQUQsQ0FBSixHQUFZQyxLQUFaO0FBQ0Q7QUFDRixLQVJELE1BUU8sSUFBSU8sS0FBSyxLQUFLLGdCQUFkLEVBQWdDO0FBQ3JDLFdBQUtVLENBQUMsR0FBRyxDQUFKLEVBQU9DLENBQUMsR0FBR3hCLElBQUksQ0FBQ1ksTUFBckIsRUFBNkJXLENBQUMsR0FBR0MsQ0FBakMsRUFBb0NELENBQUMsRUFBckMsRUFBeUM7QUFDdkNqQixRQUFBQSxLQUFLLEdBQUdKLElBQUksQ0FBQ0YsSUFBSSxDQUFDdUIsQ0FBRCxDQUFMLENBQVo7QUFDQSxZQUFJRCxPQUFKLEVBQWFoQixLQUFLLEdBQUdnQixPQUFPLENBQUNMLElBQVIsQ0FBYWpCLElBQWIsRUFBbUJ1QixDQUFuQixFQUFzQmpCLEtBQXRCLENBQVI7QUFDYk4sUUFBQUEsSUFBSSxDQUFDdUIsQ0FBRCxDQUFKLEdBQVVqQixLQUFWO0FBQ0Q7QUFDRjtBQUNGO0FBQ0Y7O0FBRURtQixPQUFPLENBQUNDLFNBQVIsR0FBb0IsU0FBU0EsU0FBVCxDQUFvQjFCLElBQXBCLEVBQTBCQyxRQUExQixFQUFvQzBCLEtBQXBDLEVBQTJDO0FBQzdELE1BQUk7QUFDRixXQUFPQyxTQUFTLENBQUNoQixNQUFWLEtBQXFCLENBQXJCLEdBQ0hpQixJQUFJLENBQUNILFNBQUwsQ0FBZTFCLElBQWYsQ0FERyxHQUVINkIsSUFBSSxDQUFDSCxTQUFMLENBQWUxQixJQUFmLEVBQXFCQyxRQUFyQixFQUErQjBCLEtBQS9CLENBRko7QUFHRCxHQUpELENBSUUsT0FBT0csQ0FBUCxFQUFVO0FBQ1YsV0FBT0wsT0FBTyxDQUFDTSxlQUFSLENBQXdCL0IsSUFBeEIsRUFBOEJDLFFBQTlCLEVBQXdDMEIsS0FBeEMsQ0FBUDtBQUNEO0FBQ0YsQ0FSRDs7QUFVQUYsT0FBTyxDQUFDTyxLQUFSLEdBQWdCLFNBQVNBLEtBQVQsQ0FBZ0JoQyxJQUFoQixFQUFzQnNCLE9BQXRCLEVBQStCO0FBQzdDLE1BQUlXLFdBQVcsR0FBRyxNQUFNQyxJQUFOLENBQVdsQyxJQUFYLENBQWxCOztBQUNBLE1BQUksQ0FBQ2lDLFdBQUwsRUFBa0I7QUFDaEIsV0FBT0wsU0FBUyxDQUFDaEIsTUFBVixLQUFxQixDQUFyQixHQUNIaUIsSUFBSSxDQUFDRyxLQUFMLENBQVdoQyxJQUFYLENBREcsR0FFSDZCLElBQUksQ0FBQ0csS0FBTCxDQUFXaEMsSUFBWCxFQUFpQnNCLE9BQWpCLENBRko7QUFHRCxHQUpELE1BSU87QUFDTCxRQUFJcEIsSUFBSSxHQUFHMkIsSUFBSSxDQUFDRyxLQUFMLENBQVdoQyxJQUFYLENBQVg7QUFDQXFCLElBQUFBLE1BQU0sQ0FBQ25CLElBQUQsRUFBT29CLE9BQVAsQ0FBTjtBQUNBLFdBQU9wQixJQUFJLENBQUMsQ0FBRCxDQUFYO0FBQ0Q7QUFDRixDQVhEOztBQWFBdUIsT0FBTyxDQUFDTSxlQUFSLEdBQTBCLFNBQVNBLGVBQVQsQ0FBMEIvQixJQUExQixFQUFnQ0MsUUFBaEMsRUFBMEMwQixLQUExQyxFQUFpRDtBQUN6RSxNQUFJekIsSUFBSSxHQUFHLEVBQVg7QUFDQUgsRUFBQUEsTUFBTSxDQUFDQyxJQUFELEVBQU9DLFFBQVAsRUFBaUJDLElBQWpCLEVBQXVCLElBQUlpQyxHQUFKLEVBQXZCLENBQU47QUFDQSxTQUFPUixLQUFLLEdBQ1IsTUFBTUUsSUFBSSxDQUFDSCxTQUFMLENBQWV4QixJQUFmLEVBQXFCLElBQXJCLEVBQTJCeUIsS0FBM0IsQ0FERSxHQUVSLE1BQU1FLElBQUksQ0FBQ0gsU0FBTCxDQUFleEIsSUFBZixDQUZWO0FBR0QsQ0FORCIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGVuY29kZSAoZGF0YSwgcmVwbGFjZXIsIGxpc3QsIHNlZW4pIHtcbiAgdmFyIHN0b3JlZCwga2V5LCB2YWx1ZSwgaSwgbFxuICB2YXIgc2VlbkluZGV4ID0gc2Vlbi5nZXQoZGF0YSlcbiAgaWYgKHNlZW5JbmRleCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHNlZW5JbmRleFxuICB9XG4gIHZhciBpbmRleCA9IGxpc3QubGVuZ3RoXG4gIHZhciBwcm90byA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkYXRhKVxuICBpZiAocHJvdG8gPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgc3RvcmVkID0ge31cbiAgICBzZWVuLnNldChkYXRhLCBpbmRleClcbiAgICBsaXN0LnB1c2goc3RvcmVkKVxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSlcbiAgICBmb3IgKGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV1cbiAgICAgIHZhbHVlID0gZGF0YVtrZXldXG4gICAgICBpZiAocmVwbGFjZXIpIHZhbHVlID0gcmVwbGFjZXIuY2FsbChkYXRhLCBrZXksIHZhbHVlKVxuICAgICAgc3RvcmVkW2tleV0gPSBlbmNvZGUodmFsdWUsIHJlcGxhY2VyLCBsaXN0LCBzZWVuKVxuICAgIH1cbiAgfSBlbHNlIGlmIChwcm90byA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgIHN0b3JlZCA9IFtdXG4gICAgc2Vlbi5zZXQoZGF0YSwgaW5kZXgpXG4gICAgbGlzdC5wdXNoKHN0b3JlZClcbiAgICBmb3IgKGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhbHVlID0gZGF0YVtpXVxuICAgICAgaWYgKHJlcGxhY2VyKSB2YWx1ZSA9IHJlcGxhY2VyLmNhbGwoZGF0YSwgaSwgdmFsdWUpXG4gICAgICBzdG9yZWRbaV0gPSBlbmNvZGUodmFsdWUsIHJlcGxhY2VyLCBsaXN0LCBzZWVuKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsaXN0LnB1c2goZGF0YSlcbiAgfVxuICByZXR1cm4gaW5kZXhcbn1cblxuZnVuY3Rpb24gZGVjb2RlIChsaXN0LCByZXZpdmVyKSB7XG4gIHZhciBpID0gbGlzdC5sZW5ndGhcbiAgdmFyIGosIGssIGRhdGEsIGtleSwgdmFsdWUsIHByb3RvXG4gIHdoaWxlIChpLS0pIHtcbiAgICBkYXRhID0gbGlzdFtpXVxuICAgIHByb3RvID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpXG4gICAgaWYgKHByb3RvID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKVxuICAgICAgZm9yIChqID0gMCwgayA9IGtleXMubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgIGtleSA9IGtleXNbal1cbiAgICAgICAgdmFsdWUgPSBsaXN0W2RhdGFba2V5XV1cbiAgICAgICAgaWYgKHJldml2ZXIpIHZhbHVlID0gcmV2aXZlci5jYWxsKGRhdGEsIGtleSwgdmFsdWUpXG4gICAgICAgIGRhdGFba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwcm90byA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgZm9yIChqID0gMCwgayA9IGRhdGEubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgIHZhbHVlID0gbGlzdFtkYXRhW2pdXVxuICAgICAgICBpZiAocmV2aXZlcikgdmFsdWUgPSByZXZpdmVyLmNhbGwoZGF0YSwgaiwgdmFsdWUpXG4gICAgICAgIGRhdGFbal0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnRzLnN0cmluZ2lmeSA9IGZ1bmN0aW9uIHN0cmluZ2lmeSAoZGF0YSwgcmVwbGFjZXIsIHNwYWNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDFcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIDogSlNPTi5zdHJpbmdpZnkoZGF0YSwgcmVwbGFjZXIsIHNwYWNlKVxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGV4cG9ydHMuc3RyaW5naWZ5U3RyaWN0KGRhdGEsIHJlcGxhY2VyLCBzcGFjZSlcbiAgfVxufVxuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UgKGRhdGEsIHJldml2ZXIpIHtcbiAgdmFyIGhhc0NpcmN1bGFyID0gL15cXHMvLnRlc3QoZGF0YSlcbiAgaWYgKCFoYXNDaXJjdWxhcikge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxXG4gICAgICA/IEpTT04ucGFyc2UoZGF0YSlcbiAgICAgIDogSlNPTi5wYXJzZShkYXRhLCByZXZpdmVyKVxuICB9IGVsc2Uge1xuICAgIHZhciBsaXN0ID0gSlNPTi5wYXJzZShkYXRhKVxuICAgIGRlY29kZShsaXN0LCByZXZpdmVyKVxuICAgIHJldHVybiBsaXN0WzBdXG4gIH1cbn1cblxuZXhwb3J0cy5zdHJpbmdpZnlTdHJpY3QgPSBmdW5jdGlvbiBzdHJpbmdpZnlTdHJpY3QgKGRhdGEsIHJlcGxhY2VyLCBzcGFjZSkge1xuICB2YXIgbGlzdCA9IFtdXG4gIGVuY29kZShkYXRhLCByZXBsYWNlciwgbGlzdCwgbmV3IE1hcCgpKVxuICByZXR1cm4gc3BhY2VcbiAgICA/ICcgJyArIEpTT04uc3RyaW5naWZ5KGxpc3QsIG51bGwsIHNwYWNlKVxuICAgIDogJyAnICsgSlNPTi5zdHJpbmdpZnkobGlzdClcbn1cbiJdfQ==