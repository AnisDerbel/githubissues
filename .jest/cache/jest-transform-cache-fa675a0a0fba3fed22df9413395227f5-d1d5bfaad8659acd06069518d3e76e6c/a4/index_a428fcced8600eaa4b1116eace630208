0172d5ca783f886417b1e1642a1314d8
"use strict";

var __assign = this && this.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  Object.defineProperty(o, k2, {
    enumerable: true,
    get: function get() {
      return m[k];
    }
  });
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});

var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});

var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) {
    if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  }

  __setModuleDefault(result, mod);

  return result;
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

var ElementType = __importStar(require("domelementtype"));

var entities_1 = require("entities");

var foreignNames_1 = require("./foreignNames");

var unencodedElements = new Set(["style", "script", "xmp", "iframe", "noembed", "noframes", "plaintext", "noscript"]);

function formatAttributes(attributes, opts) {
  if (!attributes) return;
  return Object.keys(attributes).map(function (key) {
    var _a, _b;

    var value = (_a = attributes[key]) !== null && _a !== void 0 ? _a : "";

    if (opts.xmlMode === "foreign") {
      key = (_b = foreignNames_1.attributeNames.get(key)) !== null && _b !== void 0 ? _b : key;
    }

    if (!opts.emptyAttrs && !opts.xmlMode && value === "") {
      return key;
    }

    return key + "=\"" + (opts.decodeEntities ? entities_1.encodeXML(value) : value.replace(/"/g, "&quot;")) + "\"";
  }).join(" ");
}

var singleTag = new Set(["area", "base", "basefont", "br", "col", "command", "embed", "frame", "hr", "img", "input", "isindex", "keygen", "link", "meta", "param", "source", "track", "wbr"]);

function render(node, options) {
  if (options === void 0) {
    options = {};
  }

  var nodes = Array.isArray(node) || node.cheerio ? node : [node];
  var output = "";

  for (var i = 0; i < nodes.length; i++) {
    output += renderNode(nodes[i], options);
  }

  return output;
}

exports.default = render;

function renderNode(node, options) {
  switch (node.type) {
    case ElementType.Root:
      return render(node.children, options);

    case ElementType.Directive:
    case ElementType.Doctype:
      return renderDirective(node);

    case ElementType.Comment:
      return renderComment(node);

    case ElementType.CDATA:
      return renderCdata(node);

    case ElementType.Script:
    case ElementType.Style:
    case ElementType.Tag:
      return renderTag(node, options);

    case ElementType.Text:
      return renderText(node, options);
  }
}

var foreignModeIntegrationPoints = new Set(["mi", "mo", "mn", "ms", "mtext", "annotation-xml", "foreignObject", "desc", "title"]);
var foreignElements = new Set(["svg", "math"]);

function renderTag(elem, opts) {
  var _a;

  if (opts.xmlMode === "foreign") {
    elem.name = (_a = foreignNames_1.elementNames.get(elem.name)) !== null && _a !== void 0 ? _a : elem.name;

    if (elem.parent && foreignModeIntegrationPoints.has(elem.parent.name)) {
      opts = __assign(__assign({}, opts), {
        xmlMode: false
      });
    }
  }

  if (!opts.xmlMode && foreignElements.has(elem.name)) {
    opts = __assign(__assign({}, opts), {
      xmlMode: "foreign"
    });
  }

  var tag = "<" + elem.name;
  var attribs = formatAttributes(elem.attribs, opts);

  if (attribs) {
    tag += " " + attribs;
  }

  if (elem.children.length === 0 && (opts.xmlMode ? opts.selfClosingTags !== false : opts.selfClosingTags && singleTag.has(elem.name))) {
    if (!opts.xmlMode) tag += " ";
    tag += "/>";
  } else {
    tag += ">";

    if (elem.children.length > 0) {
      tag += render(elem.children, opts);
    }

    if (opts.xmlMode || !singleTag.has(elem.name)) {
      tag += "</" + elem.name + ">";
    }
  }

  return tag;
}

function renderDirective(elem) {
  return "<" + elem.data + ">";
}

function renderText(elem, opts) {
  var data = elem.data || "";

  if (opts.decodeEntities && !(elem.parent && unencodedElements.has(elem.parent.name))) {
    data = entities_1.encodeXML(data);
  }

  return data;
}

function renderCdata(elem) {
  return "<![CDATA[" + elem.children[0].data + "]]>";
}

function renderComment(elem) {
  return "<!--" + elem.data + "-->";
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsIl9fY3JlYXRlQmluZGluZyIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19zZXRNb2R1bGVEZWZhdWx0IiwidiIsInZhbHVlIiwiX19pbXBvcnRTdGFyIiwibW9kIiwiX19lc01vZHVsZSIsInJlc3VsdCIsImV4cG9ydHMiLCJFbGVtZW50VHlwZSIsInJlcXVpcmUiLCJlbnRpdGllc18xIiwiZm9yZWlnbk5hbWVzXzEiLCJ1bmVuY29kZWRFbGVtZW50cyIsIlNldCIsImZvcm1hdEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwib3B0cyIsImtleXMiLCJtYXAiLCJrZXkiLCJfYSIsIl9iIiwieG1sTW9kZSIsImF0dHJpYnV0ZU5hbWVzIiwiZW1wdHlBdHRycyIsImRlY29kZUVudGl0aWVzIiwiZW5jb2RlWE1MIiwicmVwbGFjZSIsImpvaW4iLCJzaW5nbGVUYWciLCJyZW5kZXIiLCJub2RlIiwib3B0aW9ucyIsIm5vZGVzIiwiQXJyYXkiLCJpc0FycmF5IiwiY2hlZXJpbyIsIm91dHB1dCIsInJlbmRlck5vZGUiLCJkZWZhdWx0IiwidHlwZSIsIlJvb3QiLCJjaGlsZHJlbiIsIkRpcmVjdGl2ZSIsIkRvY3R5cGUiLCJyZW5kZXJEaXJlY3RpdmUiLCJDb21tZW50IiwicmVuZGVyQ29tbWVudCIsIkNEQVRBIiwicmVuZGVyQ2RhdGEiLCJTY3JpcHQiLCJTdHlsZSIsIlRhZyIsInJlbmRlclRhZyIsIlRleHQiLCJyZW5kZXJUZXh0IiwiZm9yZWlnbk1vZGVJbnRlZ3JhdGlvblBvaW50cyIsImZvcmVpZ25FbGVtZW50cyIsImVsZW0iLCJuYW1lIiwiZWxlbWVudE5hbWVzIiwicGFyZW50IiwiaGFzIiwidGFnIiwiYXR0cmlicyIsInNlbGZDbG9zaW5nVGFncyIsImRhdGEiXSwibWFwcGluZ3MiOiJBQUFBOztBQUNBLElBQUlBLFFBQVEsR0FBSSxRQUFRLEtBQUtBLFFBQWQsSUFBMkIsWUFBWTtBQUNsREEsRUFBQUEsUUFBUSxHQUFHQyxNQUFNLENBQUNDLE1BQVAsSUFBaUIsVUFBU0MsQ0FBVCxFQUFZO0FBQ3BDLFNBQUssSUFBSUMsQ0FBSixFQUFPQyxDQUFDLEdBQUcsQ0FBWCxFQUFjQyxDQUFDLEdBQUdDLFNBQVMsQ0FBQ0MsTUFBakMsRUFBeUNILENBQUMsR0FBR0MsQ0FBN0MsRUFBZ0RELENBQUMsRUFBakQsRUFBcUQ7QUFDakRELE1BQUFBLENBQUMsR0FBR0csU0FBUyxDQUFDRixDQUFELENBQWI7O0FBQ0EsV0FBSyxJQUFJSSxDQUFULElBQWNMLENBQWQ7QUFBaUIsWUFBSUgsTUFBTSxDQUFDUyxTQUFQLENBQWlCQyxjQUFqQixDQUFnQ0MsSUFBaEMsQ0FBcUNSLENBQXJDLEVBQXdDSyxDQUF4QyxDQUFKLEVBQ2JOLENBQUMsQ0FBQ00sQ0FBRCxDQUFELEdBQU9MLENBQUMsQ0FBQ0ssQ0FBRCxDQUFSO0FBREo7QUFFSDs7QUFDRCxXQUFPTixDQUFQO0FBQ0gsR0FQRDs7QUFRQSxTQUFPSCxRQUFRLENBQUNhLEtBQVQsQ0FBZSxJQUFmLEVBQXFCTixTQUFyQixDQUFQO0FBQ0gsQ0FWRDs7QUFXQSxJQUFJTyxlQUFlLEdBQUksUUFBUSxLQUFLQSxlQUFkLEtBQW1DYixNQUFNLENBQUNjLE1BQVAsR0FBaUIsVUFBU0MsQ0FBVCxFQUFZQyxDQUFaLEVBQWVDLENBQWYsRUFBa0JDLEVBQWxCLEVBQXNCO0FBQzVGLE1BQUlBLEVBQUUsS0FBS0MsU0FBWCxFQUFzQkQsRUFBRSxHQUFHRCxDQUFMO0FBQ3RCakIsRUFBQUEsTUFBTSxDQUFDb0IsY0FBUCxDQUFzQkwsQ0FBdEIsRUFBeUJHLEVBQXpCLEVBQTZCO0FBQUVHLElBQUFBLFVBQVUsRUFBRSxJQUFkO0FBQW9CQyxJQUFBQSxHQUFHLEVBQUUsZUFBVztBQUFFLGFBQU9OLENBQUMsQ0FBQ0MsQ0FBRCxDQUFSO0FBQWM7QUFBcEQsR0FBN0I7QUFDSCxDQUh3RCxHQUduRCxVQUFTRixDQUFULEVBQVlDLENBQVosRUFBZUMsQ0FBZixFQUFrQkMsRUFBbEIsRUFBc0I7QUFDeEIsTUFBSUEsRUFBRSxLQUFLQyxTQUFYLEVBQXNCRCxFQUFFLEdBQUdELENBQUw7QUFDdEJGLEVBQUFBLENBQUMsQ0FBQ0csRUFBRCxDQUFELEdBQVFGLENBQUMsQ0FBQ0MsQ0FBRCxDQUFUO0FBQ0gsQ0FOcUIsQ0FBdEI7O0FBT0EsSUFBSU0sa0JBQWtCLEdBQUksUUFBUSxLQUFLQSxrQkFBZCxLQUFzQ3ZCLE1BQU0sQ0FBQ2MsTUFBUCxHQUFpQixVQUFTQyxDQUFULEVBQVlTLENBQVosRUFBZTtBQUMzRnhCLEVBQUFBLE1BQU0sQ0FBQ29CLGNBQVAsQ0FBc0JMLENBQXRCLEVBQXlCLFNBQXpCLEVBQW9DO0FBQUVNLElBQUFBLFVBQVUsRUFBRSxJQUFkO0FBQW9CSSxJQUFBQSxLQUFLLEVBQUVEO0FBQTNCLEdBQXBDO0FBQ0gsQ0FGOEQsR0FFMUQsVUFBU1QsQ0FBVCxFQUFZUyxDQUFaLEVBQWU7QUFDaEJULEVBQUFBLENBQUMsQ0FBQyxTQUFELENBQUQsR0FBZVMsQ0FBZjtBQUNILENBSndCLENBQXpCOztBQUtBLElBQUlFLFlBQVksR0FBSSxRQUFRLEtBQUtBLFlBQWQsSUFBK0IsVUFBVUMsR0FBVixFQUFlO0FBQzdELE1BQUlBLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxVQUFmLEVBQTJCLE9BQU9ELEdBQVA7QUFDM0IsTUFBSUUsTUFBTSxHQUFHLEVBQWI7QUFDQSxNQUFJRixHQUFHLElBQUksSUFBWCxFQUFpQixLQUFLLElBQUlWLENBQVQsSUFBY1UsR0FBZDtBQUFtQixRQUFJVixDQUFDLEtBQUssU0FBTixJQUFtQmpCLE1BQU0sQ0FBQ1MsU0FBUCxDQUFpQkMsY0FBakIsQ0FBZ0NDLElBQWhDLENBQXFDZ0IsR0FBckMsRUFBMENWLENBQTFDLENBQXZCLEVBQXFFSixlQUFlLENBQUNnQixNQUFELEVBQVNGLEdBQVQsRUFBY1YsQ0FBZCxDQUFmO0FBQXhGOztBQUNqQk0sRUFBQUEsa0JBQWtCLENBQUNNLE1BQUQsRUFBU0YsR0FBVCxDQUFsQjs7QUFDQSxTQUFPRSxNQUFQO0FBQ0gsQ0FORDs7QUFPQTdCLE1BQU0sQ0FBQ29CLGNBQVAsQ0FBc0JVLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQUVMLEVBQUFBLEtBQUssRUFBRTtBQUFULENBQTdDOztBQUlBLElBQUlNLFdBQVcsR0FBR0wsWUFBWSxDQUFDTSxPQUFPLENBQUMsZ0JBQUQsQ0FBUixDQUE5Qjs7QUFDQSxJQUFJQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQU1BLElBQUlFLGNBQWMsR0FBR0YsT0FBTyxDQUFDLGdCQUFELENBQTVCOztBQUNBLElBQUlHLGlCQUFpQixHQUFHLElBQUlDLEdBQUosQ0FBUSxDQUM1QixPQUQ0QixFQUU1QixRQUY0QixFQUc1QixLQUg0QixFQUk1QixRQUo0QixFQUs1QixTQUw0QixFQU01QixVQU40QixFQU81QixXQVA0QixFQVE1QixVQVI0QixDQUFSLENBQXhCOztBQWFBLFNBQVNDLGdCQUFULENBQTBCQyxVQUExQixFQUFzQ0MsSUFBdEMsRUFBNEM7QUFDeEMsTUFBSSxDQUFDRCxVQUFMLEVBQ0k7QUFDSixTQUFPdEMsTUFBTSxDQUFDd0MsSUFBUCxDQUFZRixVQUFaLEVBQ0ZHLEdBREUsQ0FDRSxVQUFVQyxHQUFWLEVBQWU7QUFDcEIsUUFBSUMsRUFBSixFQUFRQyxFQUFSOztBQUNBLFFBQUluQixLQUFLLEdBQUcsQ0FBQ2tCLEVBQUUsR0FBR0wsVUFBVSxDQUFDSSxHQUFELENBQWhCLE1BQTJCLElBQTNCLElBQW1DQyxFQUFFLEtBQUssS0FBSyxDQUEvQyxHQUFtREEsRUFBbkQsR0FBd0QsRUFBcEU7O0FBQ0EsUUFBSUosSUFBSSxDQUFDTSxPQUFMLEtBQWlCLFNBQXJCLEVBQWdDO0FBRTVCSCxNQUFBQSxHQUFHLEdBQUcsQ0FBQ0UsRUFBRSxHQUFHVixjQUFjLENBQUNZLGNBQWYsQ0FBOEJ4QixHQUE5QixDQUFrQ29CLEdBQWxDLENBQU4sTUFBa0QsSUFBbEQsSUFBMERFLEVBQUUsS0FBSyxLQUFLLENBQXRFLEdBQTBFQSxFQUExRSxHQUErRUYsR0FBckY7QUFDSDs7QUFDRCxRQUFJLENBQUNILElBQUksQ0FBQ1EsVUFBTixJQUFvQixDQUFDUixJQUFJLENBQUNNLE9BQTFCLElBQXFDcEIsS0FBSyxLQUFLLEVBQW5ELEVBQXVEO0FBQ25ELGFBQU9pQixHQUFQO0FBQ0g7O0FBQ0QsV0FBT0EsR0FBRyxHQUFHLEtBQU4sSUFBZUgsSUFBSSxDQUFDUyxjQUFMLEdBQXNCZixVQUFVLENBQUNnQixTQUFYLENBQXFCeEIsS0FBckIsQ0FBdEIsR0FBb0RBLEtBQUssQ0FBQ3lCLE9BQU4sQ0FBYyxJQUFkLEVBQW9CLFFBQXBCLENBQW5FLElBQW9HLElBQTNHO0FBQ0gsR0FaTSxFQWFGQyxJQWJFLENBYUcsR0FiSCxDQUFQO0FBY0g7O0FBSUQsSUFBSUMsU0FBUyxHQUFHLElBQUloQixHQUFKLENBQVEsQ0FDcEIsTUFEb0IsRUFFcEIsTUFGb0IsRUFHcEIsVUFIb0IsRUFJcEIsSUFKb0IsRUFLcEIsS0FMb0IsRUFNcEIsU0FOb0IsRUFPcEIsT0FQb0IsRUFRcEIsT0FSb0IsRUFTcEIsSUFUb0IsRUFVcEIsS0FWb0IsRUFXcEIsT0FYb0IsRUFZcEIsU0Fab0IsRUFhcEIsUUFib0IsRUFjcEIsTUFkb0IsRUFlcEIsTUFmb0IsRUFnQnBCLE9BaEJvQixFQWlCcEIsUUFqQm9CLEVBa0JwQixPQWxCb0IsRUFtQnBCLEtBbkJvQixDQUFSLENBQWhCOztBQTZCQSxTQUFTaUIsTUFBVCxDQUFnQkMsSUFBaEIsRUFBc0JDLE9BQXRCLEVBQStCO0FBQzNCLE1BQUlBLE9BQU8sS0FBSyxLQUFLLENBQXJCLEVBQXdCO0FBQUVBLElBQUFBLE9BQU8sR0FBRyxFQUFWO0FBQWU7O0FBRXpDLE1BQUlDLEtBQUssR0FBR0MsS0FBSyxDQUFDQyxPQUFOLENBQWNKLElBQWQsS0FBdUJBLElBQUksQ0FBQ0ssT0FBNUIsR0FBc0NMLElBQXRDLEdBQTZDLENBQUNBLElBQUQsQ0FBekQ7QUFDQSxNQUFJTSxNQUFNLEdBQUcsRUFBYjs7QUFDQSxPQUFLLElBQUl4RCxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHb0QsS0FBSyxDQUFDakQsTUFBMUIsRUFBa0NILENBQUMsRUFBbkMsRUFBdUM7QUFDbkN3RCxJQUFBQSxNQUFNLElBQUlDLFVBQVUsQ0FBQ0wsS0FBSyxDQUFDcEQsQ0FBRCxDQUFOLEVBQVdtRCxPQUFYLENBQXBCO0FBQ0g7O0FBQ0QsU0FBT0ssTUFBUDtBQUNIOztBQUNEOUIsT0FBTyxDQUFDZ0MsT0FBUixHQUFrQlQsTUFBbEI7O0FBQ0EsU0FBU1EsVUFBVCxDQUFvQlAsSUFBcEIsRUFBMEJDLE9BQTFCLEVBQW1DO0FBQy9CLFVBQVFELElBQUksQ0FBQ1MsSUFBYjtBQUNJLFNBQUtoQyxXQUFXLENBQUNpQyxJQUFqQjtBQUNJLGFBQU9YLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDVyxRQUFOLEVBQWdCVixPQUFoQixDQUFiOztBQUNKLFNBQUt4QixXQUFXLENBQUNtQyxTQUFqQjtBQUNBLFNBQUtuQyxXQUFXLENBQUNvQyxPQUFqQjtBQUNJLGFBQU9DLGVBQWUsQ0FBQ2QsSUFBRCxDQUF0Qjs7QUFDSixTQUFLdkIsV0FBVyxDQUFDc0MsT0FBakI7QUFDSSxhQUFPQyxhQUFhLENBQUNoQixJQUFELENBQXBCOztBQUNKLFNBQUt2QixXQUFXLENBQUN3QyxLQUFqQjtBQUNJLGFBQU9DLFdBQVcsQ0FBQ2xCLElBQUQsQ0FBbEI7O0FBQ0osU0FBS3ZCLFdBQVcsQ0FBQzBDLE1BQWpCO0FBQ0EsU0FBSzFDLFdBQVcsQ0FBQzJDLEtBQWpCO0FBQ0EsU0FBSzNDLFdBQVcsQ0FBQzRDLEdBQWpCO0FBQ0ksYUFBT0MsU0FBUyxDQUFDdEIsSUFBRCxFQUFPQyxPQUFQLENBQWhCOztBQUNKLFNBQUt4QixXQUFXLENBQUM4QyxJQUFqQjtBQUNJLGFBQU9DLFVBQVUsQ0FBQ3hCLElBQUQsRUFBT0MsT0FBUCxDQUFqQjtBQWZSO0FBaUJIOztBQUNELElBQUl3Qiw0QkFBNEIsR0FBRyxJQUFJM0MsR0FBSixDQUFRLENBQ3ZDLElBRHVDLEVBRXZDLElBRnVDLEVBR3ZDLElBSHVDLEVBSXZDLElBSnVDLEVBS3ZDLE9BTHVDLEVBTXZDLGdCQU51QyxFQU92QyxlQVB1QyxFQVF2QyxNQVJ1QyxFQVN2QyxPQVR1QyxDQUFSLENBQW5DO0FBV0EsSUFBSTRDLGVBQWUsR0FBRyxJQUFJNUMsR0FBSixDQUFRLENBQUMsS0FBRCxFQUFRLE1BQVIsQ0FBUixDQUF0Qjs7QUFDQSxTQUFTd0MsU0FBVCxDQUFtQkssSUFBbkIsRUFBeUIxQyxJQUF6QixFQUErQjtBQUMzQixNQUFJSSxFQUFKOztBQUVBLE1BQUlKLElBQUksQ0FBQ00sT0FBTCxLQUFpQixTQUFyQixFQUFnQztBQUU1Qm9DLElBQUFBLElBQUksQ0FBQ0MsSUFBTCxHQUFZLENBQUN2QyxFQUFFLEdBQUdULGNBQWMsQ0FBQ2lELFlBQWYsQ0FBNEI3RCxHQUE1QixDQUFnQzJELElBQUksQ0FBQ0MsSUFBckMsQ0FBTixNQUFzRCxJQUF0RCxJQUE4RHZDLEVBQUUsS0FBSyxLQUFLLENBQTFFLEdBQThFQSxFQUE5RSxHQUFtRnNDLElBQUksQ0FBQ0MsSUFBcEc7O0FBRUEsUUFBSUQsSUFBSSxDQUFDRyxNQUFMLElBQ0FMLDRCQUE0QixDQUFDTSxHQUE3QixDQUFpQ0osSUFBSSxDQUFDRyxNQUFMLENBQVlGLElBQTdDLENBREosRUFDd0Q7QUFDcEQzQyxNQUFBQSxJQUFJLEdBQUd4QyxRQUFRLENBQUNBLFFBQVEsQ0FBQyxFQUFELEVBQUt3QyxJQUFMLENBQVQsRUFBcUI7QUFBRU0sUUFBQUEsT0FBTyxFQUFFO0FBQVgsT0FBckIsQ0FBZjtBQUNIO0FBQ0o7O0FBQ0QsTUFBSSxDQUFDTixJQUFJLENBQUNNLE9BQU4sSUFBaUJtQyxlQUFlLENBQUNLLEdBQWhCLENBQW9CSixJQUFJLENBQUNDLElBQXpCLENBQXJCLEVBQXFEO0FBQ2pEM0MsSUFBQUEsSUFBSSxHQUFHeEMsUUFBUSxDQUFDQSxRQUFRLENBQUMsRUFBRCxFQUFLd0MsSUFBTCxDQUFULEVBQXFCO0FBQUVNLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCLENBQWY7QUFDSDs7QUFDRCxNQUFJeUMsR0FBRyxHQUFHLE1BQU1MLElBQUksQ0FBQ0MsSUFBckI7QUFDQSxNQUFJSyxPQUFPLEdBQUdsRCxnQkFBZ0IsQ0FBQzRDLElBQUksQ0FBQ00sT0FBTixFQUFlaEQsSUFBZixDQUE5Qjs7QUFDQSxNQUFJZ0QsT0FBSixFQUFhO0FBQ1RELElBQUFBLEdBQUcsSUFBSSxNQUFNQyxPQUFiO0FBQ0g7O0FBQ0QsTUFBSU4sSUFBSSxDQUFDaEIsUUFBTCxDQUFjMUQsTUFBZCxLQUF5QixDQUF6QixLQUNDZ0MsSUFBSSxDQUFDTSxPQUFMLEdBRU9OLElBQUksQ0FBQ2lELGVBQUwsS0FBeUIsS0FGaEMsR0FJT2pELElBQUksQ0FBQ2lELGVBQUwsSUFBd0JwQyxTQUFTLENBQUNpQyxHQUFWLENBQWNKLElBQUksQ0FBQ0MsSUFBbkIsQ0FMaEMsQ0FBSixFQUsrRDtBQUMzRCxRQUFJLENBQUMzQyxJQUFJLENBQUNNLE9BQVYsRUFDSXlDLEdBQUcsSUFBSSxHQUFQO0FBQ0pBLElBQUFBLEdBQUcsSUFBSSxJQUFQO0FBQ0gsR0FURCxNQVVLO0FBQ0RBLElBQUFBLEdBQUcsSUFBSSxHQUFQOztBQUNBLFFBQUlMLElBQUksQ0FBQ2hCLFFBQUwsQ0FBYzFELE1BQWQsR0FBdUIsQ0FBM0IsRUFBOEI7QUFDMUIrRSxNQUFBQSxHQUFHLElBQUlqQyxNQUFNLENBQUM0QixJQUFJLENBQUNoQixRQUFOLEVBQWdCMUIsSUFBaEIsQ0FBYjtBQUNIOztBQUNELFFBQUlBLElBQUksQ0FBQ00sT0FBTCxJQUFnQixDQUFDTyxTQUFTLENBQUNpQyxHQUFWLENBQWNKLElBQUksQ0FBQ0MsSUFBbkIsQ0FBckIsRUFBK0M7QUFDM0NJLE1BQUFBLEdBQUcsSUFBSSxPQUFPTCxJQUFJLENBQUNDLElBQVosR0FBbUIsR0FBMUI7QUFDSDtBQUNKOztBQUNELFNBQU9JLEdBQVA7QUFDSDs7QUFDRCxTQUFTbEIsZUFBVCxDQUF5QmEsSUFBekIsRUFBK0I7QUFDM0IsU0FBTyxNQUFNQSxJQUFJLENBQUNRLElBQVgsR0FBa0IsR0FBekI7QUFDSDs7QUFDRCxTQUFTWCxVQUFULENBQW9CRyxJQUFwQixFQUEwQjFDLElBQTFCLEVBQWdDO0FBQzVCLE1BQUlrRCxJQUFJLEdBQUdSLElBQUksQ0FBQ1EsSUFBTCxJQUFhLEVBQXhCOztBQUVBLE1BQUlsRCxJQUFJLENBQUNTLGNBQUwsSUFDQSxFQUFFaUMsSUFBSSxDQUFDRyxNQUFMLElBQWVqRCxpQkFBaUIsQ0FBQ2tELEdBQWxCLENBQXNCSixJQUFJLENBQUNHLE1BQUwsQ0FBWUYsSUFBbEMsQ0FBakIsQ0FESixFQUMrRDtBQUMzRE8sSUFBQUEsSUFBSSxHQUFHeEQsVUFBVSxDQUFDZ0IsU0FBWCxDQUFxQndDLElBQXJCLENBQVA7QUFDSDs7QUFDRCxTQUFPQSxJQUFQO0FBQ0g7O0FBQ0QsU0FBU2pCLFdBQVQsQ0FBcUJTLElBQXJCLEVBQTJCO0FBQ3ZCLFNBQU8sY0FBY0EsSUFBSSxDQUFDaEIsUUFBTCxDQUFjLENBQWQsRUFBaUJ3QixJQUEvQixHQUFzQyxLQUE3QztBQUNIOztBQUNELFNBQVNuQixhQUFULENBQXVCVyxJQUF2QixFQUE2QjtBQUN6QixTQUFPLFNBQVNBLElBQUksQ0FBQ1EsSUFBZCxHQUFxQixLQUE1QjtBQUNIIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKlxuICogTW9kdWxlIGRlcGVuZGVuY2llc1xuICovXG52YXIgRWxlbWVudFR5cGUgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcImRvbWVsZW1lbnR0eXBlXCIpKTtcbnZhciBlbnRpdGllc18xID0gcmVxdWlyZShcImVudGl0aWVzXCIpO1xuLypcbiAqIE1peGVkLWNhc2UgU1ZHIGFuZCBNYXRoTUwgdGFncyAmIGF0dHJpYnV0ZXNcbiAqIHJlY29nbml6ZWQgYnkgdGhlIEhUTUwgcGFyc2VyLCBzZWVcbiAqIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3BhcnNpbmcuaHRtbCNwYXJzaW5nLW1haW4taW5mb3JlaWduXG4gKi9cbnZhciBmb3JlaWduTmFtZXNfMSA9IHJlcXVpcmUoXCIuL2ZvcmVpZ25OYW1lc1wiKTtcbnZhciB1bmVuY29kZWRFbGVtZW50cyA9IG5ldyBTZXQoW1xuICAgIFwic3R5bGVcIixcbiAgICBcInNjcmlwdFwiLFxuICAgIFwieG1wXCIsXG4gICAgXCJpZnJhbWVcIixcbiAgICBcIm5vZW1iZWRcIixcbiAgICBcIm5vZnJhbWVzXCIsXG4gICAgXCJwbGFpbnRleHRcIixcbiAgICBcIm5vc2NyaXB0XCIsXG5dKTtcbi8qKlxuICogRm9ybWF0IGF0dHJpYnV0ZXNcbiAqL1xuZnVuY3Rpb24gZm9ybWF0QXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBvcHRzKSB7XG4gICAgaWYgKCFhdHRyaWJ1dGVzKVxuICAgICAgICByZXR1cm47XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB2YXIgdmFsdWUgPSAoX2EgPSBhdHRyaWJ1dGVzW2tleV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIGlmIChvcHRzLnhtbE1vZGUgPT09IFwiZm9yZWlnblwiKSB7XG4gICAgICAgICAgICAvKiBGaXggdXAgbWl4ZWQtY2FzZSBhdHRyaWJ1dGUgbmFtZXMgKi9cbiAgICAgICAgICAgIGtleSA9IChfYiA9IGZvcmVpZ25OYW1lc18xLmF0dHJpYnV0ZU5hbWVzLmdldChrZXkpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRzLmVtcHR5QXR0cnMgJiYgIW9wdHMueG1sTW9kZSAmJiB2YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5ICsgXCI9XFxcIlwiICsgKG9wdHMuZGVjb2RlRW50aXRpZXMgPyBlbnRpdGllc18xLmVuY29kZVhNTCh2YWx1ZSkgOiB2YWx1ZS5yZXBsYWNlKC9cIi9nLCBcIiZxdW90O1wiKSkgKyBcIlxcXCJcIjtcbiAgICB9KVxuICAgICAgICAuam9pbihcIiBcIik7XG59XG4vKipcbiAqIFNlbGYtZW5jbG9zaW5nIHRhZ3NcbiAqL1xudmFyIHNpbmdsZVRhZyA9IG5ldyBTZXQoW1xuICAgIFwiYXJlYVwiLFxuICAgIFwiYmFzZVwiLFxuICAgIFwiYmFzZWZvbnRcIixcbiAgICBcImJyXCIsXG4gICAgXCJjb2xcIixcbiAgICBcImNvbW1hbmRcIixcbiAgICBcImVtYmVkXCIsXG4gICAgXCJmcmFtZVwiLFxuICAgIFwiaHJcIixcbiAgICBcImltZ1wiLFxuICAgIFwiaW5wdXRcIixcbiAgICBcImlzaW5kZXhcIixcbiAgICBcImtleWdlblwiLFxuICAgIFwibGlua1wiLFxuICAgIFwibWV0YVwiLFxuICAgIFwicGFyYW1cIixcbiAgICBcInNvdXJjZVwiLFxuICAgIFwidHJhY2tcIixcbiAgICBcIndiclwiLFxuXSk7XG4vKipcbiAqIFJlbmRlcnMgYSBET00gbm9kZSBvciBhbiBhcnJheSBvZiBET00gbm9kZXMgdG8gYSBzdHJpbmcuXG4gKlxuICogQ2FuIGJlIHRob3VnaHQgb2YgYXMgdGhlIGVxdWl2YWxlbnQgb2YgdGhlIGBvdXRlckhUTUxgIG9mIHRoZSBwYXNzZWQgbm9kZShzKS5cbiAqXG4gKiBAcGFyYW0gbm9kZSBOb2RlIHRvIGJlIHJlbmRlcmVkLlxuICogQHBhcmFtIG9wdGlvbnMgQ2hhbmdlcyBzZXJpYWxpemF0aW9uIGJlaGF2aW9yXG4gKi9cbmZ1bmN0aW9uIHJlbmRlcihub2RlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAvLyBUT0RPOiBUaGlzIGlzIGEgYml0IGhhY2t5LlxuICAgIHZhciBub2RlcyA9IEFycmF5LmlzQXJyYXkobm9kZSkgfHwgbm9kZS5jaGVlcmlvID8gbm9kZSA6IFtub2RlXTtcbiAgICB2YXIgb3V0cHV0ID0gXCJcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG91dHB1dCArPSByZW5kZXJOb2RlKG5vZGVzW2ldLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHJlbmRlcjtcbmZ1bmN0aW9uIHJlbmRlck5vZGUobm9kZSwgb3B0aW9ucykge1xuICAgIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgICAgIGNhc2UgRWxlbWVudFR5cGUuUm9vdDpcbiAgICAgICAgICAgIHJldHVybiByZW5kZXIobm9kZS5jaGlsZHJlbiwgb3B0aW9ucyk7XG4gICAgICAgIGNhc2UgRWxlbWVudFR5cGUuRGlyZWN0aXZlOlxuICAgICAgICBjYXNlIEVsZW1lbnRUeXBlLkRvY3R5cGU6XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyRGlyZWN0aXZlKG5vZGUpO1xuICAgICAgICBjYXNlIEVsZW1lbnRUeXBlLkNvbW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyQ29tbWVudChub2RlKTtcbiAgICAgICAgY2FzZSBFbGVtZW50VHlwZS5DREFUQTpcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJDZGF0YShub2RlKTtcbiAgICAgICAgY2FzZSBFbGVtZW50VHlwZS5TY3JpcHQ6XG4gICAgICAgIGNhc2UgRWxlbWVudFR5cGUuU3R5bGU6XG4gICAgICAgIGNhc2UgRWxlbWVudFR5cGUuVGFnOlxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlclRhZyhub2RlLCBvcHRpb25zKTtcbiAgICAgICAgY2FzZSBFbGVtZW50VHlwZS5UZXh0OlxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlclRleHQobm9kZSwgb3B0aW9ucyk7XG4gICAgfVxufVxudmFyIGZvcmVpZ25Nb2RlSW50ZWdyYXRpb25Qb2ludHMgPSBuZXcgU2V0KFtcbiAgICBcIm1pXCIsXG4gICAgXCJtb1wiLFxuICAgIFwibW5cIixcbiAgICBcIm1zXCIsXG4gICAgXCJtdGV4dFwiLFxuICAgIFwiYW5ub3RhdGlvbi14bWxcIixcbiAgICBcImZvcmVpZ25PYmplY3RcIixcbiAgICBcImRlc2NcIixcbiAgICBcInRpdGxlXCIsXG5dKTtcbnZhciBmb3JlaWduRWxlbWVudHMgPSBuZXcgU2V0KFtcInN2Z1wiLCBcIm1hdGhcIl0pO1xuZnVuY3Rpb24gcmVuZGVyVGFnKGVsZW0sIG9wdHMpIHtcbiAgICB2YXIgX2E7XG4gICAgLy8gSGFuZGxlIFNWRyAvIE1hdGhNTCBpbiBIVE1MXG4gICAgaWYgKG9wdHMueG1sTW9kZSA9PT0gXCJmb3JlaWduXCIpIHtcbiAgICAgICAgLyogRml4IHVwIG1peGVkLWNhc2UgZWxlbWVudCBuYW1lcyAqL1xuICAgICAgICBlbGVtLm5hbWUgPSAoX2EgPSBmb3JlaWduTmFtZXNfMS5lbGVtZW50TmFtZXMuZ2V0KGVsZW0ubmFtZSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGVsZW0ubmFtZTtcbiAgICAgICAgLyogRXhpdCBmb3JlaWduIG1vZGUgYXQgaW50ZWdyYXRpb24gcG9pbnRzICovXG4gICAgICAgIGlmIChlbGVtLnBhcmVudCAmJlxuICAgICAgICAgICAgZm9yZWlnbk1vZGVJbnRlZ3JhdGlvblBvaW50cy5oYXMoZWxlbS5wYXJlbnQubmFtZSkpIHtcbiAgICAgICAgICAgIG9wdHMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0cyksIHsgeG1sTW9kZTogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFvcHRzLnhtbE1vZGUgJiYgZm9yZWlnbkVsZW1lbnRzLmhhcyhlbGVtLm5hbWUpKSB7XG4gICAgICAgIG9wdHMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0cyksIHsgeG1sTW9kZTogXCJmb3JlaWduXCIgfSk7XG4gICAgfVxuICAgIHZhciB0YWcgPSBcIjxcIiArIGVsZW0ubmFtZTtcbiAgICB2YXIgYXR0cmlicyA9IGZvcm1hdEF0dHJpYnV0ZXMoZWxlbS5hdHRyaWJzLCBvcHRzKTtcbiAgICBpZiAoYXR0cmlicykge1xuICAgICAgICB0YWcgKz0gXCIgXCIgKyBhdHRyaWJzO1xuICAgIH1cbiAgICBpZiAoZWxlbS5jaGlsZHJlbi5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgKG9wdHMueG1sTW9kZVxuICAgICAgICAgICAgPyAvLyBJbiBYTUwgbW9kZSBvciBmb3JlaWduIG1vZGUsIGFuZCB1c2VyIGhhc24ndCBleHBsaWNpdGx5IHR1cm5lZCBvZmYgc2VsZi1jbG9zaW5nIHRhZ3NcbiAgICAgICAgICAgICAgICBvcHRzLnNlbGZDbG9zaW5nVGFncyAhPT0gZmFsc2VcbiAgICAgICAgICAgIDogLy8gVXNlciBleHBsaWNpdGx5IGFza2VkIGZvciBzZWxmLWNsb3NpbmcgdGFncywgZXZlbiBpbiBIVE1MIG1vZGVcbiAgICAgICAgICAgICAgICBvcHRzLnNlbGZDbG9zaW5nVGFncyAmJiBzaW5nbGVUYWcuaGFzKGVsZW0ubmFtZSkpKSB7XG4gICAgICAgIGlmICghb3B0cy54bWxNb2RlKVxuICAgICAgICAgICAgdGFnICs9IFwiIFwiO1xuICAgICAgICB0YWcgKz0gXCIvPlwiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFnICs9IFwiPlwiO1xuICAgICAgICBpZiAoZWxlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0YWcgKz0gcmVuZGVyKGVsZW0uY2hpbGRyZW4sIG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLnhtbE1vZGUgfHwgIXNpbmdsZVRhZy5oYXMoZWxlbS5uYW1lKSkge1xuICAgICAgICAgICAgdGFnICs9IFwiPC9cIiArIGVsZW0ubmFtZSArIFwiPlwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YWc7XG59XG5mdW5jdGlvbiByZW5kZXJEaXJlY3RpdmUoZWxlbSkge1xuICAgIHJldHVybiBcIjxcIiArIGVsZW0uZGF0YSArIFwiPlwiO1xufVxuZnVuY3Rpb24gcmVuZGVyVGV4dChlbGVtLCBvcHRzKSB7XG4gICAgdmFyIGRhdGEgPSBlbGVtLmRhdGEgfHwgXCJcIjtcbiAgICAvLyBJZiBlbnRpdGllcyB3ZXJlbid0IGRlY29kZWQsIG5vIG5lZWQgdG8gZW5jb2RlIHRoZW0gYmFja1xuICAgIGlmIChvcHRzLmRlY29kZUVudGl0aWVzICYmXG4gICAgICAgICEoZWxlbS5wYXJlbnQgJiYgdW5lbmNvZGVkRWxlbWVudHMuaGFzKGVsZW0ucGFyZW50Lm5hbWUpKSkge1xuICAgICAgICBkYXRhID0gZW50aXRpZXNfMS5lbmNvZGVYTUwoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuZnVuY3Rpb24gcmVuZGVyQ2RhdGEoZWxlbSkge1xuICAgIHJldHVybiBcIjwhW0NEQVRBW1wiICsgZWxlbS5jaGlsZHJlblswXS5kYXRhICsgXCJdXT5cIjtcbn1cbmZ1bmN0aW9uIHJlbmRlckNvbW1lbnQoZWxlbSkge1xuICAgIHJldHVybiBcIjwhLS1cIiArIGVsZW0uZGF0YSArIFwiLS0+XCI7XG59XG4iXX0=